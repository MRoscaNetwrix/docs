"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[470466],{28453:(e,o,t)=>{t.d(o,{R:()=>r,x:()=>s});var i=t(296540);const n={},a=i.createContext(n);function r(e){const o=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(a.Provider,{value:o},e.children)}},75225:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"policypak/video/scriptstriggers/integration/auditpol","title":"Using Endpoint Policy Manager Cloud and Auditpol.exe to enable Advanced Auditing on non-domain joined computers","description":"Use Netwrix Endpoint Policy Manager (formerly PolicyPak)\'s Scripts and Triggers Manager and Auditpol.exe to configure advanced auditing on your remote (domain or non-domain joined) computers","source":"@site/docs/policypak/policypak/video/scriptstriggers/integration/auditpol.md","sourceDirName":"policypak/video/scriptstriggers/integration","slug":"/policypak/video/scriptstriggers/integration/auditpol","permalink":"/docs/policypak/policypak/video/scriptstriggers/integration/auditpol","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/policypak/policypak/video/scriptstriggers/integration/auditpol.md","tags":[],"version":"current","frontMatter":{},"sidebar":"policyPakSidebar","previous":{"title":"Endpoint Policy Manager Scripts and AnyConnect: Run a script after you connect via VPN","permalink":"/docs/policypak/policypak/video/scriptstriggers/integration/anyconnect"},"next":{"title":"Endpoint Policy Manager Scripts: Automate Software deployments with PP Scripts and Chocolaty.org","permalink":"/docs/policypak/policypak/video/scriptstriggers/integration/chocolaty"}}');var n=t(474848),a=t(28453);const r={},s="Using Endpoint Policy Manager Cloud and Auditpol.exe to enable Advanced Auditing on non-domain joined computers",c={},d=[];function l(e){const o={h1:"h1",header:"header",p:"p",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.header,{children:(0,n.jsx)(o.h1,{id:"using-endpoint-policy-manager-cloud-and-auditpolexe-to-enable-advanced-auditing-on-non-domain-joined-computers",children:"Using Endpoint Policy Manager Cloud and Auditpol.exe to enable Advanced Auditing on non-domain joined computers"})}),"\n",(0,n.jsx)(o.p,{children:"Use Netwrix Endpoint Policy Manager (formerly PolicyPak)'s Scripts and Triggers Manager and Auditpol.exe to configure advanced auditing on your remote (domain or non-domain joined) computers"}),"\n",(0,n.jsx)(o.p,{children:"Hi, this is John from Endpoint Policy Manager. In this video, we're going to show you how you can enable advanced auditing for remote domain or nondomain joined computers using Endpoint Policy Manager Cloud. Local domain joined computers have the ability to create group policy objects to enable the various auditing policies. Remote, nondomain joined machines do not have this luxury. Microsoft, however, provides a command line utility called Auditpol to facilitate this option, and Endpoint Policy Manager provides the vehicle in which to distribute this policy to remote machines whether domain joined or not. Let's dive in. Let's take a look how Endpoint Policy Manager can help you enable advanced auditing."}),"\n",(0,n.jsx)(o.p,{children:"We have our Endpoint Policy Manager Cloud web GUI. We're going to create a policy for my test group. I'm going to create and link a new policy here, and we're going to scroll down to Scripts Manager and use this to deliver the policy. I'm going to give it a quick little name, call it Advanced Auditing. We're going to create a collection because when you're doing this, you're probably not going to create just one. You're going to create several policies. A collection will give you a way of grouping them together. You also have the ability if you wanted to add item level targeting, so if you need to further group these computers by say computer type, computer name, laptops or not, whether they belong to a certain IP address range or not, you can add this here as well as you can with most other Endpoint Policy Manager policies."}),"\n",(0,n.jsx)(o.p,{children:"We're not going to do this right now. We're just going to create our collection, click OK. Then inside the collection, we're going to create a new policy. Now, this is done on the machine side so we're going to click on Machine. Under Name, we'll do file system audit. It's going to be enabled, and of course, we can also add item level targeting here as well. The Apply Action, this is where we can apply our script. I precreated the script down here. We're just going to copy it and paste it. This is using the Auditpol set command for the file system subcategory, and I'm going to audit both success and failures."}),"\n",(0,n.jsx)(o.p,{children:"Now on the revert action should this machine fall out of scope \u2013 it's no longer in that group that it belongs \u2013 I'm going to disable it. Add a Batch Script. Paste in the command, so same command, but now I am going to disable success and failure audits. Under Policy process mode, you can apply it Once, Always, or Once or when forced. Once is all we need to do. Once it's applied, it's going to stay there. It's not going to change, so [03:10]. Click OK, and now we have our policy created."}),"\n",(0,n.jsx)(o.p,{children:"I'm going to go ahead, and I'm going to temporarily disable this policy, so I don't want it coming down just yet. Let's take a look here. Here's my command to check on the auditing. See what's set, what isn't set for the object access. We can see the file system, which is what I set my command, is not yet set. There's no auditing involved. Come over here to my event viewer, just do a little refresh. Okay, there's nothing in my event log. I'm going to open up a file, close it up, refresh, still nothing. Now let's go over, and let's reenable this. Click on it. Enable the policy, Yes. Minimize that, and we're going to sync up the cloud."}),"\n",(0,n.jsx)(o.p,{children:"Now you can see the Advanced Auditing, what I just created, is now a policy that's been brought down from the cloud. I'm going to go and check my get command for Auditpol. I'm now auditing success and failures for the system, and I come over here and access my file, refresh. I've got a bunch of audits. You can see here that it's for the file access test file, which is what I opened up. There's four entries here, all for that one file. We can see that we're able to enable advanced auditing using Endpoint Policy Manager, using this command line and Scripts Manager."}),"\n",(0,n.jsx)(o.p,{children:"Now, you know we put a reverse script if this policy's computer is for whatever reason no longer falls under scope, so we're going to disable the policy and remove the auditing. Let's come back over here. Disable the policy. Click Yes. This could've been the computer no longer being associated with this particular group, being put in a different group in a different set of policies, maybe a different set of auditing. Either way. Minimize that. Let's update the policy. Now you'll see the policy is no longer there. Query object access, and again, back to no auditing. Let's clear the log. Open up my file. Close it. Refresh. No logging. Okay, so this is how we can enable advanced auditing in remote domain or nondomain joined computers. Thanks for watching."})]})}function p(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}}}]);