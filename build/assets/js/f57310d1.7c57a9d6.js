"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[681656],{28453:(e,t,i)=>{i.d(t,{R:()=>d,x:()=>a});var r=i(296540);const n={},s=r.createContext(n);function d(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),r.createElement(s.Provider,{value:t},e.children)}},53860:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>o,contentTitle:()=>a,default:()=>l,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"auditor/api/writeactivityrecords","title":"Write Activity Records","description":"Endpoint","source":"@site/docs/auditor/auditor/api/writeactivityrecords.md","sourceDirName":"auditor/api","slug":"/auditor/api/writeactivityrecords","permalink":"/docs/auditor/auditor/api/writeactivityrecords","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/api/writeactivityrecords.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Security","permalink":"/docs/auditor/auditor/api/security"},"next":{"title":"Additional Configuration to Review Changes Made via Exchange Server","permalink":"/docs/auditor/auditor/configuration/activedirectory/additional"}}');var n=i(474848),s=i(28453);const d={},a="Write Activity Records",o={},c=[{value:"Endpoint",id:"endpoint",level:2},{value:"Request Parameters",id:"request-parameters",level:2},{value:"Response",id:"response",level:2},{value:"Usage Example\u2014Write Data",id:"usage-examplewrite-data",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"write-activity-records",children:"Write Activity Records"})}),"\n",(0,n.jsx)(t.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"Write data to the Audit Database and to the Long-Term Archive. By default, all imported data is written to a special Netwrix_Auditor_API database and recognized as the Netwrix API data source. This data is not associated with any monitoring plan in the product. You can associate Activity Records with a plan, in this case data will be written to a database linked to this plan. Make sure the plan you specify is already created in Netwrix Auditor, the Netwrix API data source is added to the plan and enabled for monitoring."}),"\n",(0,n.jsxs)(t.p,{children:["To feed data, send a POST request containing Activity Records. The user sending a request must be assigned the Contributor role in Netwrix Auditor. After feeding data to the Audit Database it will become available for search in the Netwrix Auditor client and through ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/searchactivityrecords",children:"/netwrix/api/v1/activity_records/search"})," and ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/retrieveactivityrecords",children:"/netwrix/api/v1/activity_records/enum"})," endpoints."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Method"}),(0,n.jsx)(t.th,{children:"Endpoint"}),(0,n.jsx)(t.th,{children:"POST Data"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"POST"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"https://{host:port}/netwrix/api/v1/activity_records/{?format=json}"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/activityrecords",children:"Activity Records"})})]})})]}),"\n",(0,n.jsx)(t.p,{children:"Netwrix recommends limiting the input Activity Records file to 50MB and maximum 1,000 Activity Records."}),"\n",(0,n.jsx)(t.h2,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{children:"Mandatory"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"host:port"})}),(0,n.jsx)(t.td,{children:"Yes"}),(0,n.jsxs)(t.td,{children:["Replace with the IP address or a name of your Netwrix Auditor Server host and port (e.g., ",(0,n.jsx)(t.em,{children:"172.28.6.15:9699"}),", ",(0,n.jsx)(t.em,{children:"stationwin12:9699"}),", ",(0,n.jsx)(t.em,{children:"WKSWin2012.enterprise.local:9699"}),").  With enabled HTTPS, provide the computer name as it appears in certificate properties."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"?format=json"})}),(0,n.jsx)(t.td,{children:"No"}),(0,n.jsx)(t.td,{children:"Add this parameter to write data in JSON format. Otherwise, Netwrix Auditor Server will expect XML-formatted Activity Records and will consider JSON invalid."})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"response",children:"Response"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Request Status"}),(0,n.jsx)(t.th,{children:"Response"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Success"}),(0,n.jsxs)(t.td,{children:["The HTTP status code in the response header is 200 OK and the body is empty. ",(0,n.jsx)(t.code,{children:"HTTP/1.1 200 OK `````` Server: Microsoft-HTTPAPI/2.0 `````` Content-Length: 0 `````` Content-Type: text/plain `````` Date: Fri, 08 Apr 2017 13:56:22 GMT"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Error"}),(0,n.jsxs)(t.td,{children:["The header status code is an error code. Depending on the error code, the response body may contain an error object. ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/responsestatuscodes",children:"See Response Status Codes for more information."})]})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"usage-examplewrite-data",children:"Usage Example\u2014Write Data"}),"\n",(0,n.jsx)(t.p,{children:"This example describes how to feed Activity Records to the Audit Database."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1 \u2013"})," Send a POST request containing Activity Records. ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/activityrecords",children:"Activity Records"})," For example:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.th,{})})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:"XML"})}),(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:'curl -H "Content-Type:application/xml; Charset=UTF-8" https://WKSWin2012:9699/netwrix/api/v1/activity_records/ -u Enterprise\\NetwrixUser:NetwrixIsCool --data-binary @C:\\APIdocs\\Input.xml`````` <?xml version="1.0" encoding="utf-8"?> `````` <ActivityRecordList xmlns="http://schemas.netwrix.com/api/v1/activity_records/"> `````` <ActivityRecord> `````` <Who>Admin</Who> `````` <ObjectType>Stored Procedure</ObjectType> `````` <Action>Added</Action> `````` <What>Databases\\ReportServer\\Stored Procedures\\dbo.sp_New</What> `````` <MonitoringPlan> `````` <Name>Integrations and custom sources</Name> `````` </MonitoringPlan> `````` <Where>WKSWin12SQL</Where> `````` <When>2017-02-19T03:43:49-11:00</When> `````` </ActivityRecord> `````` <ActivityRecord> `````` <Action>Modified</Action> `````` <ObjectType>Mailbox</ObjectType> `````` <What>Shared Mailbox</What> `````` <When>2017-02-10T14:46:00Z</When> `````` <Where>BLUPR05MB1940</Where> `````` <Who>admin@enterprise.onmicrosoft.com</Who> `````` <DetailList> `````` <Detail> `````` <PropertyName>Custom_Attribute</PropertyName> `````` <Before>1</Before> `````` <After>2</After> `````` </Detail> `````` </DetailList> `````` </ActivityRecord> `````` </ActivityRecordList> '})})}),(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:"JSON"})}),(0,n.jsx)(t.tr,{children:(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:'curl -H "Content-Type:application/json; Charset=UTF-8" https://WKSWin2012:9699/netwrix/api/v1/activity_records/?format=json -u Enterprise\\NetwrixUser:NetwrixIsCool --data-binary @C:\\APIdocs\\Input.json'})," ",(0,n.jsx)(t.code,{children:'[ `````` { `````` "Who": "Admin", `````` "ObjectType": "Stored Procedure", `````` "Action": "Added", `````` "MonitoringPlan": {"Name": "Integrations and custom sources"}, `````` "What": "Databases\\\\ReportServer\\\\Stored Procedures\\\\dbo.sp_New", `````` "Where": "WKSWin12SQL", `````` "When": "2017-02-19T03:43:49-11:00" `````` }, `````` { `````` "Action": "Modified", `````` "ObjectType": "Mailbox", `````` "What": "Shared Mailbox", `````` "When": "2017-02-10T14:46:00Z", `````` "Where": "BLUPR05MB1940", `````` "Who": "admin@enterprise.onmicrosoft.com", `````` "DetailList": [ `````` { `````` "PropertyName": "Custom_Attribute", `````` "Before": "1", `````` "After": "2" `````` } `````` ] `````` } `````` ]'})]})})]})]}),"\n",(0,n.jsxs)(t.p,{children:["Ensure to pass information about transferred data, including ",(0,n.jsx)(t.code,{children:"Content-Type:application/xml"})," or ",(0,n.jsx)(t.code,{children:"application/json "}),"and encoding. The syntax greatly depends on the tool you use."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2 \u2013"})," Receive the response. Below is an example of a successful write request. The status is 200 OK and the body is empty."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"HTTP/1.1 200 OK\n"})}),"\n",(0,n.jsx)(t.p,{children:"Server: Microsoft-HTTPAPI/2.0"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"Content-Length: 0\n"})}),"\n",(0,n.jsx)(t.p,{children:"Content-Type: text/plain"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"Date: Fri, 08 Apr 2017 13:56:22 GMT\n```\n\n__Step 3 \u2013__ Send more POST requests containing Activity Records if necessary.\n\n__Step 4 \u2013__ Check that posted data is now available in the Audit Database. Run a search request to [/netwrix/api/v1/activity\\_records/search](/docs/auditor/auditor/api/searchactivityrecords.md) endpoint or use interactive search in the Netwrix Auditor client. For example:\n\n![apiactivity_thumb_0_0](/img/product_docs/auditor/auditor/api/apiactivity_thumb_0_0.webp)\n\n__Step 5 \u2013__ For input Activity Records, the data source is set to Netwrix API.\n\n![apiactivitydetails](/img/product_docs/auditor/auditor/api/apiactivitydetails.webp)\n"})})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);