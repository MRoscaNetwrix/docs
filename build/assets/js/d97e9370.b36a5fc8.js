"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[591795],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>l});var i=t(296540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},789927:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"config/entraid/access","title":"Microsoft Entra ID Auditing Configuration","description":"The Access Analyzer for Entra ID Solution provides the ability to audit Microsoft Entra ID, formerly Azure Active Directory. It scans:","source":"@site/docs/accessanalyzer/config/entraid/access.md","sourceDirName":"config/entraid","slug":"/config/entraid/access","permalink":"/docs/accessanalyzer/config/entraid/access","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/accessanalyzer/config/entraid/access.md","tags":[],"version":"current","frontMatter":{},"sidebar":"accessAnalyzerSidebar","previous":{"title":"Validate Setup","permalink":"/docs/accessanalyzer/config/dellunity/validate"},"next":{"title":"Microsoft Entra ID Tenant Target Requirements","permalink":"/docs/accessanalyzer/config/entraid/overview"}}');var r=t(474848),s=t(28453);const o={},l="Microsoft Entra ID Auditing Configuration",a={},c=[{value:"Permissions",id:"permissions",level:2},{value:"Register a Microsoft Entra ID Application",id:"register-a-microsoft-entra-id-application",level:2},{value:"Grant Permissions to the Registered Application",id:"grant-permissions-to-the-registered-application",level:2},{value:"Identify the Client ID",id:"identify-the-client-id",level:2},{value:"Generate the Client Secret Key",id:"generate-the-client-secret-key",level:2},{value:"Identify the Tenant Name",id:"identify-the-tenant-name",level:2}];function d(e){const n={a:"a",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"microsoft-entra-id-auditing-configuration",children:"Microsoft Entra ID Auditing Configuration"})}),"\n",(0,r.jsx)(n.p,{children:"The Access Analyzer for Entra ID Solution provides the ability to audit Microsoft Entra ID, formerly Azure Active Directory. It scans:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Microsoft Entra ID (formerly Azure AD)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," A user account with the Global Administrator role is required to register an app with Microsoft Entra ID."]}),"\n",(0,r.jsx)(n.p,{children:"Data Collector"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/overview",children:"AzureADInventory Data Collector"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Configuration Settings from the Registered Application"}),"\n",(0,r.jsx)(n.p,{children:"The following settings are needed from your tenant once you have registered the application:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Client ID \u2013 This is the Application (client) ID for the registered application"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Key \u2013 This is the Client Secret Value generated when a new secret is created"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CAUTION:"})," It is not possible to retrieve the value after saving the new key. It must be copied first."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," In order to add custom attributes, you will also need to know the Tenant name of the Entra ID environment."]}),"\n",(0,r.jsx)(n.h2,{id:"permissions",children:"Permissions"}),"\n",(0,r.jsx)(n.p,{children:"The following permissions are required:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Microsoft Graph API"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Application Permissions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AuditLog.Read.All \u2013 Read all audit log data"}),"\n",(0,r.jsx)(n.li,{children:"Directory.Read.All \u2013 Read directory data"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Delegated Permissions:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Group.Read.All \u2013 Read all groups"}),"\n",(0,r.jsx)(n.li,{children:"User.Read.All \u2013 Read all users' full profiles"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Access URLs"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://login.windows.net",children:"https://login.windows.net"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://graph.windows.net",children:"https://graph.windows.net"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://login.microsoftonline.com",children:"https://login.microsoftonline.com"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://graph.microsoft.com",children:"https://graph.microsoft.com"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"All sub-directories of the access URLs listed"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"register-a-microsoft-entra-id-application",children:"Register a Microsoft Entra ID Application"}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps to register Access Analyzer with Microsoft Entra ID."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," The steps below are for registering an app through the Microsoft Entra admin center. These steps may vary slightly if you use a different Microsoft portal. See the relevant Microsoft documentation for additional information."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Sign in to the ",(0,r.jsx)(n.a,{href:"https://entra.microsoft.com/",children:"Microsoft Entra admin center"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," On the left navigation menu, navigate to ",(0,r.jsx)(n.strong,{children:"Identity"})," > ",(0,r.jsx)(n.strong,{children:"Applications"})," and click App registrations."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," In the top toolbar, click ",(0,r.jsx)(n.strong,{children:"New registration"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4 \u2013"})," Enter the following information in the Register an application page:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Name \u2013 Enter a user-facing display name for the application, for example Netwrix Access Analyzer (formerly Enterprise Auditor) Entra ID"}),"\n",(0,r.jsxs)(n.li,{children:["Supported account types \u2013 Select ",(0,r.jsx)(n.strong,{children:"Accounts in this organizational directory only"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 5 \u2013"})," Click ",(0,r.jsx)(n.strong,{children:"Register"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"The Overview page for the newly registered app opens. Review the newly created registered application. Now that the application has been registered, permissions need to be granted to it."}),"\n",(0,r.jsx)(n.h2,{id:"grant-permissions-to-the-registered-application",children:"Grant Permissions to the Registered Application"}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps to grant permissions to the registered application."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," The steps below are for registering an app through the Microsoft Entra admin center. These steps may vary slightly if you use a different Microsoft portal. See the relevant Microsoft documentation for additional information."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Select the newly-created, registered application. If you left the Overview page, it will be listed in the ",(0,r.jsx)(n.strong,{children:"Identity"})," > ",(0,r.jsx)(n.strong,{children:"Applications"})," > ",(0,r.jsx)(n.strong,{children:"App registrations"})," > ",(0,r.jsx)(n.strong,{children:"All applications"})," list."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," On the registered app blade, click ",(0,r.jsx)(n.strong,{children:"API permissions"})," in the Manage section."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," In the top toolbar, click ",(0,r.jsx)(n.strong,{children:"Add a permission"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4 \u2013"})," On the Request API permissions blade, select ",(0,r.jsx)(n.strong,{children:"Microsoft Graph"})," on the Microsoft APIs tab. Select the following permissions:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Under Application Permissions, select:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"AuditLog.Read.All \u2013 Read all audit log data"}),"\n",(0,r.jsx)(n.li,{children:"Directory.Read.All \u2013 Read directory data"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Under Delegated Permissions, select:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Group.Read.All \u2013 Read all groups"}),"\n",(0,r.jsx)(n.li,{children:"User.Read.All \u2013 Read all users' full profiles"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 5 \u2013"})," At the bottom of the page, click ",(0,r.jsx)(n.strong,{children:"Add Permissions"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 6 \u2013"})," Click ",(0,r.jsx)(n.strong,{children:"Grant Admin Consent for [tenant]"}),". Then click ",(0,r.jsx)(n.strong,{children:"Yes"})," in the confirmation window."]}),"\n",(0,r.jsx)(n.p,{children:"Now that the permissions have been granted to it, the Connection Profile and host settings for Access Analyzer need to be collected."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," Additional permissions need to be configured to collect Microsoft Entra roles information. See the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/requirements/solutions/entraid/entraroles",children:"Microsoft Entra Roles Auditing Configuration"})," topic for additional information."]}),"\n",(0,r.jsx)(n.h2,{id:"identify-the-client-id",children:"Identify the Client ID"}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps to find the registered application's Client ID."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," The steps below are for registering an app through the Microsoft Entra admin center. These steps may vary slightly if you use a different Microsoft portal. See the relevant Microsoft documentation for additional information."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Select the newly-created, registered application. If you left the Overview page, it will be listed in the ",(0,r.jsx)(n.strong,{children:"Identity"})," > ",(0,r.jsx)(n.strong,{children:"Applications"})," > ",(0,r.jsx)(n.strong,{children:"App registrations"})," > ",(0,r.jsx)(n.strong,{children:"All applications"})," list."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," Copy the ",(0,r.jsx)(n.strong,{children:"Application (client) ID"})," value."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," Save this value in a text file."]}),"\n",(0,r.jsxs)(n.p,{children:["This Application (client) ID value is needed for the Access Analyzer Connection Profile and the Custom Attributes page of the AzureADInventory Data Collector. See the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/settings/connection/profile/entraid",children:"Azure Active Directory for User Credentials"})," topic and the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/customattributes",children:"AzureADInventory:\xa0Custom Attributes"})," topic for additional information. Next generate the application\u2019s Client Secret Key."]}),"\n",(0,r.jsx)(n.h2,{id:"generate-the-client-secret-key",children:"Generate the Client Secret Key"}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps to find the registered application's Client Secret, create a new key, and save its value when saving the new key."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," The steps below are for registering an app through the Microsoft Entra admin center. These steps may vary slightly if you use a different Microsoft portal. See the relevant Microsoft documentation for additional information."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CAUTION:"})," It is not possible to retrieve the value after saving the new key. It must be copied first."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Select the newly-created, registered application. If you left the Overview page, it will be listed in the ",(0,r.jsx)(n.strong,{children:"Identity"})," > ",(0,r.jsx)(n.strong,{children:"Applications"})," > ",(0,r.jsx)(n.strong,{children:"App registrations"})," > ",(0,r.jsx)(n.strong,{children:"All applications"})," list."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," On the registered app blade, click ",(0,r.jsx)(n.strong,{children:"Certificates & secrets"})," in the Manage section."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," In the top toolbar, click ",(0,r.jsx)(n.strong,{children:"New client secret"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4 \u2013"})," On the Add a client secret blade, complete the following:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Description \u2013 Enter a unique description for this secret"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Expires \u2013 Select the duration."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," Setting the duration on the key to expire requires reconfiguration at the time of expiration. It is best to configure it to expire in 1 or 2 years."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 5 \u2013"})," Click ",(0,r.jsx)(n.strong,{children:"Add"})," to generate the key."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CAUTION:"})," If this page is left before the key is copied, then the key is not retrievable, and this process will have to be repeated."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 6 \u2013"})," The Client Secret will be displayed in the Value column of the table. You can use the Copy to clipboard button to copy the Client Secret."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 7 \u2013"})," Save this value in a text file."]}),"\n",(0,r.jsxs)(n.p,{children:["This Client Secret value is needed for the Access Analyzer Connection Profile and the Custom Attributes page of the AzureADInventory Data Collector. See the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/settings/connection/profile/entraid",children:"Azure Active Directory for User Credentials"})," topic and the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/customattributes",children:"AzureADInventory:\xa0Custom Attributes"})," topic for additional information."]}),"\n",(0,r.jsx)(n.h2,{id:"identify-the-tenant-name",children:"Identify the Tenant Name"}),"\n",(0,r.jsx)(n.p,{children:"Follow the steps to find the Tenant Name where the registered application resides."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," The steps below are for registering an app through the Microsoft Entra admin center. These steps may vary slightly if you use a different Microsoft portal. See the relevant Microsoft documentation for additional information."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Sign in to the ",(0,r.jsx)(n.a,{href:"https://entra.microsoft.com/",children:"Microsoft Entra admin center"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," On the left navigation menu, navigate to ",(0,r.jsx)(n.strong,{children:"Identity"})," > ",(0,r.jsx)(n.strong,{children:"Settings"})," and click ",(0,r.jsx)(n.strong,{children:"Domain names"})," to open the Custom domain names list."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," Copy the domain name from the list of domains."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4 \u2013"})," Save this value in a text file."]}),"\n",(0,r.jsxs)(n.p,{children:["This is needed for the Host List and the Custom Attributes page of the AzureADInventory Data Collector. See the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/configurejob",children:"Microsoft Entra ID Connection Profile & Host List"})," and\xa0",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/customattributes",children:"AzureADInventory:\xa0Custom Attributes"})," topics for additional information."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);