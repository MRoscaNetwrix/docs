"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[607715],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(296540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},131051:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"enterpriseauditor/admin/jobs/instantjobs/ex_registerazureappauth","title":"EX\\\\_RegisterAzureAppAuth Job","description":"EX\\\\_RegisterAzureAppAuth will register an Microsoft Entra ID (formerly Azure AD) application for authentication and provision appropriate permissions for Exchange Online scans. It requires:","source":"@site/docs/accessanalyzer/enterpriseauditor/admin/jobs/instantjobs/ex_registerazureappauth.md","sourceDirName":"enterpriseauditor/admin/jobs/instantjobs","slug":"/enterpriseauditor/admin/jobs/instantjobs/ex_registerazureappauth","permalink":"/docs/accessanalyzer/enterpriseauditor/admin/jobs/instantjobs/ex_registerazureappauth","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/accessanalyzer/enterpriseauditor/admin/jobs/instantjobs/ex_registerazureappauth.md","tags":[],"version":"current","frontMatter":{},"sidebar":"accessAnalyzerSidebar","previous":{"title":"AD\\\\_PasswordExpirationNotification Job","permalink":"/docs/accessanalyzer/enterpriseauditor/admin/jobs/instantjobs/ad_passwordexpirationnotification"},"next":{"title":"FS\\\\_DEFEND\\\\_SDD Job","permalink":"/docs/accessanalyzer/enterpriseauditor/admin/jobs/instantjobs/fs_defend_sdd"}}');var s=t(474848),i=t(28453);const o={},a="EX_RegisterAzureAppAuth Job",l={},c=[{value:"Using the EX_RegisterAzureAppAuth Job",id:"using-the-ex_registerazureappauth-job",level:2}];function d(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"ex_registerazureappauth-job",children:"EX_RegisterAzureAppAuth Job"})}),"\n",(0,s.jsx)(n.p,{children:"EX_RegisterAzureAppAuth will register an Microsoft Entra ID (formerly Azure AD) application for authentication and provision appropriate permissions for Exchange Online scans. It requires:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["A Connection Profile containing a Microsoft Entra ID Global Admin credential with an Account Type of ",(0,s.jsx)(n.strong,{children:"Task (Local)"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Exchange Online Management v3.4.0"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You can install this module with the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Install-Module -Name ExchangeOnlineManagement -RequiredVersion 3.4.0\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Azure AD PowerShell module installed on targeted hosts"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"NOTE:"})," If the module is not already installed, the job will attempt to install it."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You can install the module with the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Install-Module AzureAD\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"TLS\xa01.2 is required for the Azure AD PowerShell module. Run the following command to configure it:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Microsoft Graph PowerShell module installed on targeted hosts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"You can install the module with the following command:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Install-Module Microsoft.Graph\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"using-the-ex_registerazureappauth-job",children:"Using the EX_RegisterAzureAppAuth Job"}),"\n",(0,s.jsx)(n.p,{children:"Follow the steps to configure and run the EX_RegisterAzureAppAuth Job."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 1 \u2013"})," In Access Analyzer navigate to the Exchange Job Group (or any other Job Group you wish to place the EX_RegistureAzureApp job into)."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 2 \u2013"})," Click ",(0,s.jsx)(n.strong,{children:"Add Instant Job"})," to open the Instant Job Wizard."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 3 \u2013"})," Install the EX_RegisterAzureAppAuth Job from the Instant Job Library under the Exchange General library. After installation, the job tree automatically refreshes with the new job available within the selected Job Group. See the ",(0,s.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/jobs/instantjobs/overview",children:"Instant Job Wizard"})," topic for additional information."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 4 \u2013"})," On the job description page, in the Configuration section, select the edit button for ",(0,s.jsx)(n.strong,{children:"Name of the app as it will appear in the Azure applications list"})," and enter the name you want to apply to the registered Microsoft Entra ID application. Click ",(0,s.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 5 \u2013"})," In the same section, select the edit button for ",(0,s.jsx)(n.strong,{children:"Password used for the Azure application and to encrypt the certificate file in the local file system"})," and enter the password to use for the Microsoft Entra ID application. Click ",(0,s.jsx)(n.strong,{children:"Save"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 6 \u2013"})," (Optional) For non-standard tenant types, edit the ",(0,s.jsx)(n.strong,{children:"Azure Environment Name..."})," option to provide the full environment name. For a standard tenant, leave this option blank."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["For example, if leveraging a government (or GCC) tenant, enter ",(0,s.jsx)(n.strong,{children:"AzureGovernment"})]}),"\n",(0,s.jsx)(n.li,{children:"Additional options include: AzureChinaCloud, AzureCloud, AzureGermanyCloud, AzurePPE, AzureGovernment2, and AzureGovernment3"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 7 \u2013"})," On the ",(0,s.jsx)(n.strong,{children:"Configure"})," > ",(0,s.jsx)(n.strong,{children:"Hosts"})," node, select the target hosts. The targeted hosts should be the Microsoft Entra tenant name (for example, ",(0,s.jsx)(n.code,{children:"myorg.onmicrosoft.com"}),"). Click ",(0,s.jsx)(n.strong,{children:"Save"}),". The job is now ready to be run."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 8 \u2013"})," Run the EX_RegisterAzureAppAuth Job."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Step 9 \u2013"})," After the job successfully runs, it opens a browser window to Microsoft Entra ID. Log-in as a Global Administrator, and grant administrator consent to the Application's configured API Permissions."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"If this login attempt fails or you close the browser, you will need to login to Microsoft Entra ID as a Global Administrator and navigate to the Application's API Permissions to grant Admin Consent before the Application can be used for Exchange scans in Access Analyzer."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The Microsoft Entra ID application is now provisioned with the necessary permissions for Exchange Online scans. There will be a new Connection Profile for this Application. Restart the Access Analyzer Console and enter a password to use this Connection Profile."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.em,{children:"Remember,"})," the required rights and roles for Exchange Online still need to be configured. See the ",(0,s.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/requirements/target/exchangeonline",children:"Target Exchange Online Requirements, Permissions, and Ports"})," topic for additional information."]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);