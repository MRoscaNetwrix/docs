"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[56035],{28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>l});var s=r(296540);const n={},i=s.createContext(n);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(i.Provider,{value:t},e.children)}},817483:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"activitymonitor/admin/outputs/logfile/sqlservertsv","title":"SQL Server JSON Log File","description":"The following information lists all of the columns generated by SQL Server Activity Monitor into a JSON log file, along with descriptions.","source":"@site/docs/activitymonitor/activitymonitor/admin/outputs/logfile/sqlservertsv.md","sourceDirName":"activitymonitor/admin/outputs/logfile","slug":"/activitymonitor/admin/outputs/logfile/sqlservertsv","permalink":"/docs/activitymonitor/activitymonitor/admin/outputs/logfile/sqlservertsv","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/activitymonitor/activitymonitor/admin/outputs/logfile/sqlservertsv.md","tags":[],"version":"current","frontMatter":{},"sidebar":"activityMonitorSidebar","previous":{"title":"SharePoint TSV Log File","permalink":"/docs/activitymonitor/activitymonitor/admin/outputs/logfile/sharepointtsv"},"next":{"title":"Log Files Tab","permalink":"/docs/activitymonitor/activitymonitor/admin/outputs/logfiles"}}');var n=r(474848),i=r(28453);const o={},l="SQL Server JSON Log File",d={},a=[{value:"JSON Examples",id:"json-examples",level:2},{value:"Error",id:"error",level:3},{value:"Login (Success)",id:"login-success",level:3},{value:"Login (Failed)",id:"login-failed",level:3},{value:"Logout",id:"logout",level:3},{value:"SqlEvent",id:"sqlevent",level:3},{value:"Permission",id:"permission",level:3}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"sql-server-json-log-file",children:"SQL Server JSON Log File"})}),"\n",(0,n.jsx)(t.p,{children:"The following information lists all of the columns generated by SQL Server Activity Monitor into a JSON log file, along with descriptions."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Field"}),(0,n.jsx)(t.th,{children:"Type"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Example"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TimeLogged"}),(0,n.jsx)(t.td,{children:"DateTime"}),(0,n.jsxs)(t.td,{children:["UNC Datetime of the event, format: yyyy-MM-ddTHH:mm",":ss",".fffZ"]}),(0,n.jsx)(t.td,{children:"2021-02-18T15:39:29.424Z"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ActivityType"}),(0,n.jsx)(t.td,{children:"Fixed string"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"SqlServer"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"AgentHost"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Host of Stealthbits Activity Monitor Agent Service"}),(0,n.jsx)(t.td,{children:"W7-VS17"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"UserName"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Name of user performed the operation"}),(0,n.jsx)(t.td,{children:"admin"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Success"}),(0,n.jsx)(t.td,{children:"bool"}),(0,n.jsxs)(t.td,{children:["The result of the operation. For Login operations, ",(0,n.jsx)(t.strong,{children:"False"})," means the login has failed. For other operations, the result is always ",(0,n.jsx)(t.strong,{children:"True"}),"."]}),(0,n.jsx)(t.td,{children:"True"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TypeMask"}),(0,n.jsx)(t.td,{children:"uint"}),(0,n.jsx)(t.td,{children:"Integer representation of performed operation: combination (mask) of codes of SqlServerEvent enumeration.   - Select = 0x01, - Insert = 0x02, - Update = 0x04, - Delete = 0x08, - Merge = 0x10, - Execute = 0x20, - LoginSuccessful = 0x40, - LoginFailed = 0x80, - Logout = 0x0100, - Grant = 0x0200, - Revoke = 0x0400, - Deny = 0x0800, - Error = 0x1000, - Create = 0x2000, - Alter = 0x4000, - Drop = 0x8000"}),(0,n.jsx)(t.td,{children:"33 (Combination of Select and Execute)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TypeMaskDesc"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Text representation of TypeMask field"}),(0,n.jsx)(t.td,{children:"Select | Execute"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ClientAppName"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Name of application that cause the operation"}),(0,n.jsx)(t.td,{children:"Microsoft SQL Server Management Studio - Transact-SQL IntelliSense"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ClientHostName"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Name of client host"}),(0,n.jsx)(t.td,{children:"W10"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ClientIp"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"IP address of the client (can be empty)"}),(0,n.jsx)(t.td,{children:"127.0.0.1"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"DatabaseName"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Name of affected Database"}),(0,n.jsx)(t.td,{children:"AdventureWorks"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"SqlText"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Query text"}),(0,n.jsx)(t.td,{children:"select * from [SalesLT].[Customer]"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"ErrorNumber"}),(0,n.jsx)(t.td,{children:"Integer"}),(0,n.jsx)(t.td,{children:"MSSQL Error Code"}),(0,n.jsx)(t.td,{children:"208"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Message"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Message text of the error"}),(0,n.jsx)(t.td,{children:"Invalid object name 'SalesLT.Customer1'."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Category"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Category of the error"}),(0,n.jsx)(t.td,{children:"2"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"SqlObjects"}),(0,n.jsx)(t.td,{children:"String"}),(0,n.jsx)(t.td,{children:"Array of affected objects"}),(0,n.jsx)(t.td,{})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"json-examples",children:"JSON Examples"}),"\n",(0,n.jsx)(t.h3,{id:"error",children:"Error"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"TimeLogged":"2021-06-11T12:57:18.600Z","ActivityType":"SqlServer","AgentHost":"W7-VS17","UserName":"testuser1","Success":true,"TypeMask":4096,"TypeMaskDesc":"Error","ClientAppName":"Microsoft SQL Server Management Studio - Query","ClientHostName":"W10","ClientIp":"127.0.0.1","DatabaseName":"StealthRECOVER_22-04","SqlText":"select * from [SalesLT].[Customer1]","ErrorNumber":208,"Message":"Invalid object name \'SalesLT.Customer1\'.","Category":"2"}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"login-success",children:"Login (Success)"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"TimeLogged":"2021-06-11T12:50:40.038Z","ActivityType":"SqlServer","AgentHost":"W7-VS17","UserName":"testuser1","Success":true,"TypeMask":64,"TypeMaskDesc":"Login","ClientAppName":"Microsoft SQL Server Management Studio - Query","ClientHostName":"W10","ClientIp":"127.0.0.1","DatabaseName":"master"}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"login-failed",children:"Login (Failed)"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"TimeLogged":"2021-06-11T12:28:24.165Z","ActivityType":"SqlServer","AgentHost":"W7-VS17","UserName":"","Success":false,"TypeMask":64,"TypeMaskDesc":"Login","ClientAppName":"Microsoft SQL Server Management Studio","ClientHostName":"W10","ClientIp":"","DatabaseName":"master","ErrorNumber":18456,"Message":"Login failed for user \'testuser\'. Reason: Could not find a login matching the name provided. [CLIENT: local machine]"}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"logout",children:"Logout"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"TimeLogged":"2021-06-11T13:14:28.386Z","ActivityType":"SqlServer","AgentHost":"W7-VS17","UserName":"testuser1","Success":true,"TypeMask":256,"TypeMaskDesc":"Logout","ClientAppName":"Microsoft SQL Server Management Studio - Query","ClientHostName":"W10","ClientIp":"127.0.0.1","DatabaseName":"StealthRECOVER_22-04"}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"sqlevent",children:"SqlEvent"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"TimeLogged":"2021-06-11T13:22:48.682Z","ActivityType":"SqlServer","AgentHost":"W7-VS17","UserName":"sa","Success":true,"TypeMask":5,"TypeMaskDesc":"Select | Update","ClientAppName":"Microsoft SQL Server Management Studio - Query","ClientHostName":"W10","ClientIp":"127.0.0.1","DatabaseName":"AdventureWorksLT2019","SqlText":"select top 100 * \\r\\nfrom [SalesLT].[SalesOrderDetail] d\\r\\nleft join [SalesLT].[Product] p on p.ProductID=d.ProductID;\\r\\nUpdate [SalesLT].[Product] set ProductNumber=\'zzz\' where ProductNumber=\'xxx\';\\r\\n","SqlObjects":[{"t":"U","db":"AdventureWorksLT2019","s":"saleslt","o":"SalesOrderDetail","op":"Select"},{"t":"U","db":"AdventureWorksLT2019","s":"saleslt","o":"Product","op":"Select | Update"}]}\n'})}),"\n",(0,n.jsx)(t.h3,{id:"permission",children:"Permission"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{"TimeLogged":"2021-06-11T13:27:48.009Z","ActivityType":"SqlServer","AgentHost":"W7-VS17","UserName":"sa","Success":true,"TypeMask":512,"TypeMaskDesc":"Grant","ClientAppName":"Microsoft SQL Server Management Studio - Query","ClientHostName":"W10","ClientIp":"127.0.0.1","DatabaseName":"AdventureWorksLT2019","SqlText":"\\r\\n\\r\\nGRANT ALL ON [SalesLT].[Product] TO [sqluser3]; ","SqlObjects":[{"t":"U","db":"AdventureWorksLT2019","s":"saleslt","o":"Product","op":"Grant"}]}\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);