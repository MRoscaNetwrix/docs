"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[196910],{28453:(e,r,t)=>{t.d(r,{R:()=>s,x:()=>a});var n=t(296540);const i={},o=n.createContext(i);function s(e){const r=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),n.createElement(o.Provider,{value:r},e.children)}},286431:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>g,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"auditor/configuration/sqlserver/configuringtracelogging","title":"Configuring Trace Logging","description":"If trace logging is disabled in SQL Server, then changes will be reported in Netwrix Auditor as made by system.","source":"@site/docs/auditor/auditor/configuration/sqlserver/configuringtracelogging.md","sourceDirName":"auditor/configuration/sqlserver","slug":"/auditor/configuration/sqlserver/configuringtracelogging","permalink":"/docs/auditor/auditor/configuration/sqlserver/configuringtracelogging","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/configuration/sqlserver/configuringtracelogging.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"SharePoint Ports","permalink":"/docs/auditor/auditor/configuration/sharepoint/ports"},"next":{"title":"SQL Server","permalink":"/docs/auditor/auditor/configuration/sqlserver/overview"}}');var i=t(474848),o=t(28453);const s={},a="Configuring Trace Logging",c={},l=[];function d(e){const r={a:"a",code:"code",em:"em",h1:"h1",header:"header",p:"p",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"configuring-trace-logging",children:"Configuring Trace Logging"})}),"\n",(0,i.jsxs)(r.p,{children:["If trace logging is disabled in SQL Server, then changes will be reported in Netwrix Auditor as made by ",(0,i.jsx)(r.em,{children:"system"}),".\nTo detect actual change initiator, Netwrix Auditor needs native trace logs data. During every data collection, Netwrix Auditor will check if the internal SQL audit mechanism is enabled, and enable it if necessary. To read more, refer to ",(0,i.jsx)(r.a,{href:"https://kb.netwrix.com/728",children:"this Netwrix Knowledge Base article"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"CAUTION:"})," Folder associated with Netwrix Auditor must be excluded from antivirus scanning. See the ",(0,i.jsx)(r.a,{href:"https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA04u0000000HirCAE.html",children:"Antivirus Exclusions for Netwrix Auditor"})," knowledge base article for additional information."]}),"\n",(0,i.jsx)(r.p,{children:"In some cases, however, you may need to disable trace logging on your SQL Server instance. For that, follow the procedure below."}),"\n",(0,i.jsx)(r.p,{children:"If you enable monitoring of SQL logons, SQL trace for these logons will be created anyway."}),"\n",(0,i.jsx)(r.p,{children:"Follow the steps to exclude SQL Server instance from turning trace logging on automatically."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Step 1 \u2013"})," On Netwrix Auditor server, go to the ",(0,i.jsx)(r.em,{children:"%Netwrix Auditor installation folder%\\SQL Server Auditing"})," folder."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Step 2 \u2013"})," Locate the ",(0,i.jsx)(r.em,{children:"omittracelist.txt"})," file and open it for editing."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Step 3 \u2013"})," Specify SQL Server instances that you want to exclude from switching trace logging on automatically. Syntax: ",(0,i.jsx)(r.code,{children:"server\\instance name"})]}),"\n",(0,i.jsx)(r.p,{children:"Each entry must be a separate line. Lines that start with the # sign are treated as comments and will be ignored."}),"\n",(0,i.jsx)(r.p,{children:'With trace logging disabled, the "Who", "Workstation" and "When" values will be not reported correctly by Netwrix Auditor (except for content changes).'}),"\n",(0,i.jsxs)(r.p,{children:["By default, SQL Server trace logs will be stored in the predefined location (depending on the SQL Server version).\nFor example, SQL Server 2019 error logs are located at ",(0,i.jsxs)(r.em,{children:[(0,i.jsx)(r.code,{children:"<drive>"}),":\\Program Files\\Microsoft SQL Server\\MSSQL13.",(0,i.jsx)(r.code,{children:"<InstanceName>"}),"\\MSSQL\\Log"]}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["You can change this default location, using the ",(0,i.jsx)(r.em,{children:"pathstotracelogs.txt"})," file."]}),"\n",(0,i.jsx)(r.p,{children:"Follow the steps to change trace log location."}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Step 1 \u2013"})," On Netwrix Auditor server, go to ",(0,i.jsx)(r.em,{children:"%Netwrix Auditor installation folder%\\SQL Server Auditing"})," folder."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Step 2 \u2013"})," Locate the ",(0,i.jsx)(r.em,{children:"pathstotracelogs.txt"})," file and open it for editing."]}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.strong,{children:"Step 3 \u2013"})," Specify SQL Server instance that you need to audit and enter a UNC path to the folder where you want the trace logs to be stored. Syntax: ",(0,i.jsx)(r.code,{children:"SQLServer\\Instance|UNC path"})]}),"\n",(0,i.jsx)(r.p,{children:"Each entry must be a separate line. Lines that start with the # sign are treated as comments and will be ignored."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.strong,{children:"Example:"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"SQLSRV01\\MSSQL2016|C:\\Logs\\NA trace logs\\"})}),"\n",(0,i.jsx)(r.p,{children:"If you want to change trace logs location for multiple instances of one SQL server, make sure that specified UNC paths are unique across these instances."}),"\n",(0,i.jsx)(r.p,{children:"Correct:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"SQLSRV01\\MSSQL2014|C:\\Program Files\\Microsoft SQL Server\\MSSQL\\LOG\\"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"SQLSRV01\\MSSQL2019|C:\\Logs\\SQL trace logs\\"})}),"\n",(0,i.jsx)(r.p,{children:"Incorrect:"}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"SQLSRV01\\MSSQL2014|C:\\Logs\\SQL trace logs\\"})}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.code,{children:"SQLSRV01\\MSSQL2019|C:\\Logs\\SQL trace logs\\"})})]})}function g(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);