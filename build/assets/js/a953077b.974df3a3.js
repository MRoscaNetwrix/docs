"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[444313],{28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>c});var s=r(296540);const n={},i=s.createContext(n);function o(e){const t=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(i.Provider,{value:t},e.children)}},408966:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"activitymonitor/troubleshooting/performancemonitoring","title":"Performance Monitoring","description":"This topic provides a list of Activity Monitor performance counters and standard system-wide performance counters (Memory and CPU usage, TCP disconnections, etc) that are recommended for Activity Monitor performance monitoring. These performance counters can help diagnose performance issues.","source":"@site/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring.md","sourceDirName":"activitymonitor/troubleshooting","slug":"/activitymonitor/troubleshooting/performancemonitoring","permalink":"/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring.md","tags":[],"version":"current","frontMatter":{},"sidebar":"activityMonitorSidebar","previous":{"title":"Troubleshooting and Maintenance","permalink":"/docs/activitymonitor/activitymonitor/troubleshooting/overview"},"next":{"title":"Trace Logs","permalink":"/docs/activitymonitor/activitymonitor/troubleshooting/tracelogs"}}');var n=r(474848),i=r(28453);const o={},c="Performance Monitoring",d={},l=[{value:"Performance Counters",id:"performance-counters",level:2},{value:"Recommended System Performance Counters",id:"recommended-system-performance-counters",level:2},{value:"Register Performance Counters",id:"register-performance-counters",level:2},{value:"Collect Performance Data",id:"collect-performance-data",level:2},{value:"Unregister Performance Counters",id:"unregister-performance-counters",level:2}];function h(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"performance-monitoring",children:"Performance Monitoring"})}),"\n",(0,n.jsx)(t.p,{children:"This topic provides a list of Activity Monitor performance counters and standard system-wide performance counters (Memory and CPU usage, TCP disconnections, etc) that are recommended for Activity Monitor performance monitoring. These performance counters can help diagnose performance issues."}),"\n",(0,n.jsx)(t.h2,{id:"performance-counters",children:"Performance Counters"}),"\n",(0,n.jsx)(t.p,{children:"The following performance counters are provided by Activity Monitor."}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Category"}),(0,n.jsx)(t.th,{children:"Recommended"}),(0,n.jsx)(t.th,{children:"Counter"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Events Received"}),(0,n.jsx)(t.td,{children:"Number of events received from NetApp"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Events Received/sec"}),(0,n.jsx)(t.td,{children:"Rate at which events are received from NetApp"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Events Reported"}),(0,n.jsx)(t.td,{children:"Number of events passed the filters and being reported to outputs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Events Reported/sec"}),(0,n.jsx)(t.td,{children:"Rate at which events are reported to outputs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Session Negotiated"}),(0,n.jsx)(t.td,{children:"Number of connections established with ONTAP cluster nodes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Active Connections"}),(0,n.jsx)(t.td,{children:"Number of active connections with ONTAP cluster nodes"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Outage Files"}),(0,n.jsx)(t.td,{children:"Number of outage (resilience) files processed"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"NetApp"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - NetApp\\Overloaded"}),(0,n.jsx)(t.td,{children:"Number of times the agent was overloaded and had to limit the rate of events. This counter may increase from time to time when processing large batches of events. But if it keeps increasing, it is a sure sign that the agent is not coping with the load. Consider moving some SVMs to another agent or spreading the load from one SVM across multiple agents."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"VNX, Isilon, Unity"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Dell\\Events Received"}),(0,n.jsx)(t.td,{children:"Number of events received from CEE"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"VNX, Isilon, Unity"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Dell\\Events Received/sec"}),(0,n.jsx)(t.td,{children:"Rate at which events are received from CEE"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"VNX, Isilon, Unity"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Dell\\Events Reported"}),(0,n.jsx)(t.td,{children:"Number of events passed the filters and being reported to outputs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"VNX, Isilon, Unity"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Dell\\Events Reported/sec"}),(0,n.jsx)(t.td,{children:"Rate at which events are reported to outputs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"VNX, Isilon, Unity"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Dell\\Queue Size"}),(0,n.jsx)(t.td,{children:"Number of events received from CEE and waiting in queue to be processed"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"VNX, Isilon, Unity"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Dell\\Receive Throttling"}),(0,n.jsx)(t.td,{children:"Delay, in milliseconds, introduced to manage the queue"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Events Reported"}),(0,n.jsx)(t.td,{children:"Total number of events reported"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Events Reported/sec"}),(0,n.jsx)(t.td,{children:"Rate at which events are reported"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Events Reported to Files"}),(0,n.jsx)(t.td,{children:"Total number of events reported to log files"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Events Reported to Syslog"}),(0,n.jsx)(t.td,{children:"Total number of events reported to syslog servers"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Events Reported to AMQP"}),(0,n.jsx)(t.td,{children:"Total number of events reported to AMQP servers (not used currently)"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Resolved SIDs"}),(0,n.jsx)(t.td,{children:"Number of attempts, both successful and failed, to resolve SIDs to names"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Resolved SIDs/sec"}),(0,n.jsx)(t.td,{children:"Rate at which SIDs are resolved to names"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Resolved SIDs Failures"}),(0,n.jsx)(t.td,{children:"Number of failed attempts to resolve SIDs to names"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Resolved SIDs Avg Time"}),(0,n.jsx)(t.td,{children:"The moving average length of time, in microseconds, per a SID to name translation"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Resolved SIDs Max Time"}),(0,n.jsx)(t.td,{children:"The moving maximum length of time, in microseconds, per a SID to name translation"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Translated UIDs"}),(0,n.jsx)(t.td,{children:"Number of attempts, both successful and failed, to translate UIDs to SIDs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Translated UIDs/sec"}),(0,n.jsx)(t.td,{children:"Rate at which UIDs are translated to SIDs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Translated UIDs Failures"}),(0,n.jsx)(t.td,{children:"Number of failed attempts to translate UIDs to SIDs"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Translated UIDs Avg Time"}),(0,n.jsx)(t.td,{children:"The moving average length of time, in microseconds, per a UID to SID translation"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\Translated UIDs Max Time"}),(0,n.jsx)(t.td,{children:"The moving maximum length of time, in microseconds, per a UID to SID translation"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\DNS Queries"}),(0,n.jsx)(t.td,{children:"Number of DNS queries, both successful and failed"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\DNS Queries/sec"}),(0,n.jsx)(t.td,{children:"Rate at which DNS queries are executed"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\DNS Queries Failures"}),(0,n.jsx)(t.td,{children:"Number of failed DNS queries"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\DNS Queries Avg Time"}),(0,n.jsx)(t.td,{children:"The moving average length of time, in microseconds, per a DNS query"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Outputs"}),(0,n.jsx)(t.td,{children:"\u2714"}),(0,n.jsx)(t.td,{children:"Activity Monitor - Outputs\\DNS Queries Max Time"}),(0,n.jsx)(t.td,{children:"The moving maximum length of time, in microseconds, per a DNS query"})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"NOTE:"})," DNS and AD queries typically contribute the most to the processing time. Since the resolution occurs in real time, slow responses can affect throughput (A 100ms DNS response limits the throughput to 10 events per second). Observing average and maximum values of DNS Queries Time, Resolved SIDs Time, and Translated UIDs Time allows you to estimate the response time."]}),"\n",(0,n.jsx)(t.h2,{id:"recommended-system-performance-counters",children:"Recommended System Performance Counters"}),"\n",(0,n.jsx)(t.p,{children:"In addition to the Activity Monitor performance counters, it is recommended to use the following performance counters:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Counter"}),(0,n.jsx)(t.th,{children:"Notes"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Processor(_Total)% Processor Time"}),(0,n.jsx)(t.td,{children:"The percentage of elapsed time that the processor spends to execute a non-Idle thread."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Memory\\Available MBytes"}),(0,n.jsx)(t.td,{children:"The amount of physical memory, in Megabytes, immediately available for allocation to a process or for system use."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Paging File(_Total)% Usage"}),(0,n.jsx)(t.td,{children:"The percentage of the paging file that is currently in use."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TCPv4\\Connections Reset"}),(0,n.jsx)(t.td,{children:"The rate of reset TCPv4 connections"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TCPv4\\Segments Received/sec"}),(0,n.jsx)(t.td,{children:"The quantity of segments received via TCPv4 per second."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TCPv4\\Segments Retransmitted/Sec"}),(0,n.jsx)(t.td,{children:"Quantity of segments retransmitted via TCPv4 per second."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TCPv6\\Segments Received/sec"}),(0,n.jsx)(t.td,{children:"The quantity of segments received via TCPv6 per second."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"TCPv6\\Segments Retransmitted/Sec"}),(0,n.jsx)(t.td,{children:"Quantity of segments retransmitted via TCPv6 per second."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Network Interface(*)\\Bytes Received/sec"}),(0,n.jsx)(t.td,{children:"From all network adapters:  The rate at which bytes are received."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Network Interface(*)\\Bytes Sent/sec"}),(0,n.jsx)(t.td,{children:"From all network adapters:  The rate at which bytes are sent."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Network Interface(*)\\Output Queue Length"}),(0,n.jsx)(t.td,{children:"From all network adapters:  The length of the output packet queue (in packets)."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Network Interface(*)\\Packets Received Discarded"}),(0,n.jsx)(t.td,{children:"From all network adapters:  The number of inbound packets that were chosen to be discarded even though no errors had been detected to prevent their being deliverable to a higher-layer protocol."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Network Interface(*)\\Packets Received Errors"}),(0,n.jsx)(t.td,{children:"From all network adapters:  The number of inbound packets that contained errors. As a result, the errored packets were not delivered to a higher-layer protocol."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent.Grpc.Host)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Agent:  The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent.Grpc.Host)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Agent:  The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent.Grpc.Host)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Agent:  The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent.Grpc.Host)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Agent:  The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent.Grpc.Host)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Agent:  The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent.Grpc.Host)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Agent:  The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Agent version 6.0 and earlier: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Agent version 6.0 and earlier: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Agent version 6.0 and earlier: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Agent version 6.0 and earlier: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Agent version 6.0 and earlier: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(ConfigurationAgent)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Agent version 6.0 and earlier: The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(SBTService)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Windows Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(SBTService)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Windows Monitoring: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(SBTService)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Windows Monitoring: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(SBTService)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Windows Monitoring: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(SBTService)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Windows Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(SBTService)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Windows Monitoring: The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FPolicyServerSvc)% Processor Time"}),(0,n.jsx)(t.td,{children:"For NetApp Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FPolicyServerSvc)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For NetApp Monitoring: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FPolicyServerSvc)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For NetApp Monitoring: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FPolicyServerSvc)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For NetApp Monitoring: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FPolicyServerSvc)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For NetApp Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FPolicyServerSvc)\\Working Set"}),(0,n.jsx)(t.td,{children:"For NetApp Monitoring: The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(HitachiService)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Hitachi Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(HitachiService)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Hitachi Monitoring: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(HitachiService)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Hitachi Monitoring: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(HitachiService)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Hitachi Monitoring: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(HitachiService)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Hitachi Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(HitachiService)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Hitachi Monitoring: The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(CelerraServerSvc)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Dell Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(CelerraServerSvc)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Dell Monitoring: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(CelerraServerSvc)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Dell Monitoring: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(CelerraServerSvc)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Dell Monitoring: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(CelerraServerSvc)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Dell Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(CelerraServerSvc)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Dell Monitoring: The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FSACLoggingSvc)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Logging Service: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FSACLoggingSvc)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Logging Service: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FSACLoggingSvc)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Logging Service: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FSACLoggingSvc)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Logging Service: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FSACLoggingSvc)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Logging Service: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(FSACLoggingSvc)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Logging Service: The associated process's physical memory usage, in bytes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(MonitorService)% Processor Time"}),(0,n.jsx)(t.td,{children:"For Other, Different Device Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(MonitorService)\\Elapsed Time"}),(0,n.jsx)(t.td,{children:"For Other, Different Device Monitoring: The duration from when the process was started until the time it terminated."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(MonitorService)\\Handle Count"}),(0,n.jsx)(t.td,{children:"For Other, Different Device Monitoring: The number of operating system handles the process has opened."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(MonitorService)\\Thread Count"}),(0,n.jsx)(t.td,{children:"For Other, Different Device Monitoring: The set of threads that are running in the associated process."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(MonitorService)\\Private Bytes"}),(0,n.jsx)(t.td,{children:"For Other, Different Device Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Process(MonitorService)\\Working Set"}),(0,n.jsx)(t.td,{children:"For Other, Different Device Monitoring: The associated process's physical memory usage, in bytes."})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"register-performance-counters",children:"Register Performance Counters"}),"\n",(0,n.jsx)(t.p,{children:"The Activity Monitor performance counters are not registered by default and must be registered manually."}),"\n",(0,n.jsx)(t.p,{children:"Follow the steps to register the Activity Monitor performance counters on each SAM Agent server."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1 \u2013"})," Run ",(0,n.jsx)(t.code,{children:"cmd.exe"})," as Administrator."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2 \u2013"})," Change current directory to the agent installation folder (",(0,n.jsx)(t.code,{children:"C:\\Program Files\\Netwrix\\Activity Monitor\\Agent"}),")."]}),"\n",(0,n.jsx)(t.p,{children:'cd "C:\\Program Files\\Netwrix\\Activity Monitor\\Agent"'}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 3 \u2013"})," Register the performance counters manifest file."]}),"\n",(0,n.jsxs)(t.p,{children:["lodctr /M",":PerfCounters",".man"]}),"\n",(0,n.jsxs)(t.p,{children:["Expected output: Info: Successfully installed performance counters in ",(0,n.jsx)(t.code,{children:"C:\\Program Files\\Netwrix\\Activity Monitor\\Agent\\PerfCounters.man"})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 4 \u2013"})," Restart the services:"]}),"\n",(0,n.jsx)(t.p,{children:"sc stop SBFileMonAgentSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc stop FPolicyServerSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc stop CelerraServerSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc stop SBTLoggingSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc start SBFileMonAgentSvc"}),"\n",(0,n.jsx)(t.h2,{id:"collect-performance-data",children:"Collect Performance Data"}),"\n",(0,n.jsx)(t.p,{children:"The performance data can be observed or saved using any tool capable of collecting performance counters. For example, Performance Monitor."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"NOTE:"})," The following script is only compatible with PowerShell 5.X and previous versions. Using PowerShell 7.X requires Windows Performance Monitor to be configured to collect performance counters."]}),"\n",(0,n.jsxs)(t.p,{children:["Below is a PowerShell script that collects the counters every second and stores them in ",(0,n.jsx)(t.code,{children:"perfcounters_SERVERNAME_TIMESTAMP.csv"})," files. The expected file size per day is about 50MB."]}),"\n",(0,n.jsx)(t.p,{children:"Run the script on each agent server using the following command:"}),"\n",(0,n.jsx)(t.p,{children:"powershell -file AM.PerfCollect.ps1"}),"\n",(0,n.jsxs)(t.p,{children:["To stop the script press ",(0,n.jsx)(t.strong,{children:"Ctrl+C"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Script (save it to AM.PerfCollect.ps1):"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-powershell",children:'$sampleInterval = 1\n\n$maxSamples = 0\n\n$outputFile = "perfcounters_$($env:COMPUTERNAME)_$(Get-Date -Format "yyyy_MM_dd_HH_mm_ss").csv"\n\n$counters =\n\n@(\n\n"\\Processor(_Total)\\% Processor Time"\n\n,"\\Memory\\Available MBytes"\n\n,"\\Paging File(_Total)\\% Usage"\n\n,"\\TCPv4\\Connections Reset"\n\n,"\\TCPv4\\Segments Received/sec"\n\n,"\\TCPv4\\Segments Retransmitted/Sec"\n\n,"\\TCPv6\\Connections Reset"\n\n,"\\TCPv6\\Segments Received/sec"\n\n,"\\TCPv6\\Segments Retransmitted/Sec"\n\n,"\\Network Interface(*)\\Bytes Received/sec"\n\n,"\\Network Interface(*)\\Bytes Sent/sec"\n\n,"\\Network Interface(*)\\Output Queue Length"\n\n,"\\Network Interface(*)\\Packets Received Discarded"\n\n,"\\Network Interface(*)\\Packets Received Errors"\n\n,"\\Activity Monitor - NetApp\\Events Received"\n\n,"\\Activity Monitor - NetApp\\Events Received/sec"\n\n,"\\Activity Monitor - NetApp\\Events Reported"\n\n,"\\Activity Monitor - NetApp\\Events Reported/sec"\n\n,"\\Activity Monitor - NetApp\\Session Negotiated"\n\n,"\\Activity Monitor - NetApp\\Active Connections"\n\n,"\\Activity Monitor - NetApp\\Outage Files"\n\n,"\\Activity Monitor - Dell\\Events Received"\n\n,"\\Activity Monitor - Dell\\Events Received/sec"\n\n,"\\Activity Monitor - Dell\\Events Reported"\n\n,"\\Activity Monitor - Dell\\Events Reported/sec"\n\n,"\\Activity Monitor - Dell\\Queue Size"\n\n,"\\Activity Monitor - Dell\\Receive Throttling"\n\n,"\\Process(FPolicyServerSvc)\\% Processor Time"\n\n,"\\Process(FPolicyServerSvc)\\Elapsed Time"\n\n,"\\Process(FPolicyServerSvc)\\Handle Count"\n\n,"\\Process(FPolicyServerSvc)\\Thread Count"\n\n,"\\Process(FPolicyServerSvc)\\Private Bytes"\n\n,"\\Process(FPolicyServerSvc)\\Working Set"\n\n,"\\Process(FSACLoggingSvc)\\% Processor Time"\n\n,"\\Process(FSACLoggingSvc)\\Elapsed Time"\n\n,"\\Process(FSACLoggingSvc)\\Handle Count"\n\n,"\\Process(FSACLoggingSvc)\\Thread Count"\n\n,"\\Process(FSACLoggingSvc)\\Private Bytes"\n\n,"\\Process(FSACLoggingSvc)\\Working Set"\n\n,"\\Process(CelerraServerSvc)\\% Processor Time"\n\n,"\\Process(CelerraServerSvc)\\Elapsed Time"\n\n,"\\Process(CelerraServerSvc)\\Handle Count"\n\n,"\\Process(CelerraServerSvc)\\Thread Count"\n\n,"\\Process(CelerraServerSvc)\\Private Bytes"\n\n,"\\Process(CelerraServerSvc)\\Working Set"\n\n)\n\n$variables = @{\n\nSampleInterval = $sampleInterval\n\nCounter = $counters\n\n}\n\nif ($maxSamples -eq 0) {\n\n$variables.Add("Continuous", 1)}\n\nelse {\n\n$variables.Add("MaxSamples", "$maxSamples")\n\n}\n\nWrite-Host "Collecting performance counters to $outputFile... Press Ctrl+C to stop."\n\nGet-Counter @variables | Export-Counter -FileFormat csv -Path $outputFile -Force\n'})}),"\n",(0,n.jsx)(t.h2,{id:"unregister-performance-counters",children:"Unregister Performance Counters"}),"\n",(0,n.jsx)(t.p,{children:"When performance monitoring is not needed anymore, unregister the Activity Monitor performance counters."}),"\n",(0,n.jsx)(t.p,{children:"Follow the steps to unregister the Activity Monitor performance counters on each SAM Agent server."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1 \u2013"})," Run ",(0,n.jsx)(t.code,{children:"cmd.exe"})," as Administrator."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2 \u2013"})," Change current directory to the agent installation folder."]}),"\n",(0,n.jsx)(t.p,{children:'cd "C:\\Program Files\\Netwrix\\Activity Monitor\\Agent"'}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 3 \u2013"})," Unregister the performance counters manifest file."]}),"\n",(0,n.jsxs)(t.p,{children:["unlodctr /M",":PerfCounters",".man"]}),"\n",(0,n.jsx)(t.p,{children:"Expected output: Info: Successfully uninstalled the performance counters from the counter definition XML file PerfCounters.man."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 4 \u2013"})," Restart the services:"]}),"\n",(0,n.jsx)(t.p,{children:"sc stop SBFileMonAgentSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc stop FPolicyServerSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc stop CelerraServerSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc stop SBTLoggingSvc"}),"\n",(0,n.jsx)(t.p,{children:"sc start SBFileMonAgentSvc"}),"\n",(0,n.jsx)(t.p,{children:"Once the services have been restarted, the Activity Monitor performance counters are unregistered."})]})}function a(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);