"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[919555],{3003:(e,r,o)=>{o.d(r,{A:()=>t});const t=o.p+"assets/images/menuitems_userview_v603-405d87598c23ef097c69001b063a2b3d.webp"},28453:(e,r,o)=>{o.d(r,{R:()=>n,x:()=>d});var t=o(296540);const i={},s=t.createContext(i);function n(e){const r=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:n(e.components),t.createElement(s.Provider,{value:r},e.children)}},322721:(e,r,o)=>{o.r(r),o.d(r,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>n,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"usercube/integration-guide/workflows/how-to/workflow-update-multi/index","title":"For Resource Update (Multi Records)","description":"This section guides you through the procedure for the creation of a workflow to update an existing resource through its several records.","source":"@site/docs/usercube_saas/usercube/integration-guide/workflows/how-to/workflow-update-multi/index.md","sourceDirName":"usercube/integration-guide/workflows/how-to/workflow-update-multi","slug":"/usercube/integration-guide/workflows/how-to/workflow-update-multi/","permalink":"/docs/usercube_saas/usercube/integration-guide/workflows/how-to/workflow-update-multi/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube_saas/usercube/integration-guide/workflows/how-to/workflow-update-multi/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSaasSidebar","previous":{"title":"For Resource Update (Mono Record)","permalink":"/docs/usercube_saas/usercube/integration-guide/workflows/how-to/workflow-update-mono/"},"next":{"title":"For Resource Update (No Record)","permalink":"/docs/usercube_saas/usercube/integration-guide/workflows/how-to/workflow-update-resource/"}}');var i=o(474848),s=o(28453);const n={},d="For Resource Update (Multi Records)",a={},c=[{value:"Declare a Workflow",id:"declare-a-workflow",level:2},{value:"Create Forms",id:"create-forms",level:2},{value:"Link the Forms to the Workflow",id:"link-the-forms-to-the-workflow",level:2},{value:"Assign the Right Permissions",id:"assign-the-right-permissions",level:2},{value:"Create Menu Items in the UI",id:"create-menu-items-in-the-ui",level:2},{value:"Add Aspects",id:"add-aspects",level:2},{value:"Homonym Detection (Optional)",id:"homonym-detection-optional",level:2},{value:"Customize the Display Table (Optional)",id:"customize-the-display-table-optional",level:2}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"for-resource-update-multi-records",children:"For Resource Update (Multi Records)"})}),"\n",(0,i.jsx)(r.p,{children:"This section guides you through the procedure for the creation of a workflow to update an existing resource through its several records."}),"\n",(0,i.jsx)(r.h2,{id:"declare-a-workflow",children:"Declare a Workflow"}),"\n",(0,i.jsxs)(r.p,{children:["This ",(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/workflows/workflow/",children:"\nWorkflow\n"})," is made of three activities:"]}),"\n",(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"Action With Refine"}),": sends the resource's records update request with a possibility of delegation."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"Review With Feedback"}),": reviews the update request with the possibility of getting feedback from another user."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"Persist"}),": saves the collected data and triggers provisioning."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["See the ",(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/workflows/activity-templates/",children:"\nActivity Templates\n"})," topic for additional information."]}),"\n",(0,i.jsx)(r.p,{children:"The example below creates a workflow to update the records of an existing user:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<Workflow Identifier="Directory_User_UpdateSeveralRecords" DisplayName_L1="User - Manage positions" VariablesType="Workflow_Directory_User">  <Activity Identifier="Request"  DisplayName_L1="Request" Template="ActionWithRefine" />  <Activity Identifier="Review"  DisplayName_L1="Review" Template="ReviewWithFeedback" />  <Activity Identifier="Persist"  DisplayName_L1="Commit" Template="Persist" /></Workflow>\n\n'})}),"\n",(0,i.jsx)(r.h2,{id:"create-forms",children:"Create Forms"}),"\n",(0,i.jsxs)(r.p,{children:["The XML configuration below represents the creation of a ",(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/user-interface/form/",children:"Form"})," that defines the elements to display in the workflow."]}),"\n",(0,i.jsx)(r.p,{children:"Here we create three structured forms, all to be called in our final workflow form:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\nFirst form for the user\'s record data, shared with all records:\n<Form Identifier="Directory_User_UpdateSeveralRecords_Shared" EntityType="Directory_UserRecord">  <Control DisplayName_L1="Contract" OutputType="LayoutFieldset">    <Control Binding="ContractStartDate" />    <Control Binding="ContractEndDate" AddedMinutes="1440" />  </Control></Form>\n\nSecond form for the user\'s record data, specific to each record individually:\n<Form Identifier="Directory_User_UpdateSeveralRecords_Base" EntityType="Workflow_Directory_User">  <Control OutputType="LayoutContainer" EntityType="Directory_UserRecord">    <Control DisplayName_L1="Position" OutputType="LayoutFieldset">      <Control Binding="Title" IsRequired="true" />      <Control Binding="Department" />      <Control Binding="Site" DefaultValueBinding="Department.Manager.MainRecord.Site" />      <Control Binding="StartDate" />      <Control Binding="EndDate" />    </Control>  </Control></Form>\n\n'})}),"\n",(0,i.jsx)(r.h2,{id:"link-the-forms-to-the-workflow",children:"Link the Forms to the Workflow"}),"\n",(0,i.jsxs)(r.p,{children:["After creating a workflow with given activities, it is necessary to create the form to be displayed when launching the workflow. It has the type corresponding to a resource's update with several records, i.e. ",(0,i.jsx)(r.code,{children:"WorkflowUpdateSeveralRecordEntityForm"})," and it must specify the workflow's context (the entity type of the involved resources, the main property, the activity when the form is called, etc):"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<WorkflowUpdateSeveralRecordsEntityForm RecordFilter="CurrentAndFuture" Identifier="Directory_User_UpdateSeveralRecords" EntityType="Workflow_Directory_User" MainProperty="Workflow_Directory_User:Directory_User" RecordProperty="Directory_User:Records" WorkflowRequestType="Self" Activity="Directory_User_UpdateSeveralRecords:Request" FormTitle_L1="Manage positions" RecordTable="Directory_User_UpdateSeveralRecords"></WorkflowUpdateSeveralRecordsEntityForm>\n\n'})}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.code,{children:"WorkflowUpdateSeveralRecordEntityForm"})," displays a date picker for the end of transition, to schedule the record replacement."]}),"\n",(0,i.jsxs)(r.p,{children:["A ",(0,i.jsx)(r.code,{children:"WorkflowUpdateSeveralRecordEntityForm"})," requires the following child elements:"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"MainControl"})," that defines user's data;"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<WorkflowUpdateSeveralRecordsEntityForm RecordFilter="CurrentAndFuture" Identifier="Directory_User_UpdateSeveralRecords" EntityType="Workflow_Directory_User" MainProperty="Workflow_Directory_User:Directory_User" RecordProperty="Directory_User:Records" WorkflowRequestType="Self" Activity="Directory_User_UpdateSeveralRecords:Request" FormTitle_L1="Manage positions" RecordTable="Directory_User_UpdateSeveralRecords">\n  <MainControl OutputType="LayoutContainer" />\n</WorkflowUpdateSeveralRecordsEntityForm>\n\n'})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"MainControl"})," attribute is here an empty container, because it is a mandatory attribute that is not involved in the changes of this workflow."]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"RecordControl"})," that defines the record data shared with all records and calls the firstform created previously;"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<WorkflowUpdateSeveralRecordsEntityForm RecordFilter="CurrentAndFuture" Identifier="Directory_User_UpdateSeveralRecords" EntityType="Workflow_Directory_User" MainProperty="Workflow_Directory_User:Directory_User" RecordProperty="Directory_User:Records" WorkflowRequestType="Self" Activity="Directory_User_UpdateSeveralRecords:Request" FormTitle_L1="Manage positions" RecordTable="Directory_User_UpdateSeveralRecords">  <MainControl OutputType="LayoutContainer"/>\n  <RecordControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Shared" />\n</WorkflowUpdateSeveralRecordsEntityForm>\n\n'})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"RecordUniqueItemControl"})," that defines the record data specific to each record individually, and calls the secondform created previously;"]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<WorkflowUpdateSeveralRecordsEntityForm RecordFilter="CurrentAndFuture" Identifier="Directory_User_UpdateSeveralRecords" EntityType="Workflow_Directory_User" MainProperty="Workflow_Directory_User:Directory_User" RecordProperty="Directory_User:Records" WorkflowRequestType="Self" Activity="Directory_User_UpdateSeveralRecords:Request" FormTitle_L1="Manage positions" RecordTable="Directory_User_UpdateSeveralRecords">  <MainControl OutputType="LayoutContainer"/>  <RecordControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Shared"/>\n  <RecordUniqueItemControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Base" />\n</WorkflowUpdateSeveralRecordsEntityForm>\n\n'})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"RecordSlaveControl"})," that copies an existing record to be the base, i.e. pre-fill the fields, for the update of record data specific to each record individually. Thus it calls the same form as ",(0,i.jsx)(r.code,{children:"RecordUniqueItemControl"}),"."]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<WorkflowUpdateSeveralRecordsEntityForm RecordFilter="CurrentAndFuture" Identifier="Directory_User_UpdateSeveralRecords" EntityType="Workflow_Directory_User" MainProperty="Workflow_Directory_User:Directory_User" RecordProperty="Directory_User:Records" WorkflowRequestType="Self" Activity="Directory_User_UpdateSeveralRecords:Request" FormTitle_L1="Manage positions" RecordTable="Directory_User_UpdateSeveralRecords">  <MainControl OutputType="LayoutContainer"/>  <RecordControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Shared"/>  <RecordUniqueItemControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Base" />\n  <RecordSlaveControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Base" />\n</WorkflowUpdateSeveralRecordsEntityForm>\n\n'})}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"RecordSlaveUniqueItemControl"})," that copies an existing record to be the base, i.e. pre-fill the fields, for the update of record data shared with all records. Thus it calls the same form as ",(0,i.jsx)(r.code,{children:"RecordControl"}),"."]}),"\n"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<WorkflowUpdateSeveralRecordsEntityForm RecordFilter="CurrentAndFuture" Identifier="Directory_User_UpdateSeveralRecords" EntityType="Workflow_Directory_User" MainProperty="Workflow_Directory_User:Directory_User" RecordProperty="Directory_User:Records" WorkflowRequestType="Self" Activity="Directory_User_UpdateSeveralRecords:Request" FormTitle_L1="Manage positions" RecordTable="Directory_User_UpdateSeveralRecords">  <MainControl OutputType="LayoutContainer"/>  <RecordControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Shared"/>  <RecordUniqueItemControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Base" />  <RecordSlaveControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Base" />\n  <RecordSlaveUniqueItemControl OutputType="TransformImport" EmbeddedForm="Directory_User_UpdateSeveralRecords_Shared" />\n</WorkflowUpdateSeveralRecordsEntityForm>\n\n'})}),"\n",(0,i.jsxs)(r.p,{children:["The ",(0,i.jsx)(r.code,{children:"RecordSlaveControl"})," attribute calls here the same form as ",(0,i.jsx)(r.code,{children:"RecordUniqueControl"}),", because it copies part of the main record to pre-fill the fields of ",(0,i.jsx)(r.code,{children:"RecordUniqueControl"}),"."]}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"UI Form",src:o(958588).A+"",width:"1246",height:"860"})}),"\n",(0,i.jsx)(r.h2,{id:"assign-the-right-permissions",children:"Assign the Right Permissions"}),"\n",(0,i.jsxs)(r.p,{children:["Some profiles must get specific permissions so that the workflow is visible and usable by the right users.\nRead about ",(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/workflows/workflow/",children:"\nWorkflow\n"}),"s permissions."]}),"\n",(0,i.jsxs)(r.p,{children:["Below is an example of an access control rule where the ",(0,i.jsx)(r.code,{children:"Administrator"})," profile gets the permissions for the whole update request from the previously created workflow:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<AccessControlRule Profile="Administrator" EntityType="Workflow_Directory_User" Identifier="Administrator_Workflows_Directory_User_*" DisplayName_L1="Administrator_Workflows_Directory_User_*">  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Request/ActionPending" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Request/RefinePending" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Request/Aborted" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Request/Purged" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Review/ReviewPending" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Review/RefinePending" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Review/Aborted" CanExecute="true" />  <Entry Permission="/Custom/Workflows/Directory_User_UpdateSeveralRecords/Review/Purged" CanExecute="true" /></AccessControlRule>\n\n'})}),"\n",(0,i.jsx)(r.h2,{id:"create-menu-items-in-the-ui",children:"Create Menu Items in the UI"}),"\n",(0,i.jsxs)(r.p,{children:[(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/user-interface/menuitem/",children:"\nMenu Item\n"})," must be defined to make the workflow accessible in the UI."]}),"\n",(0,i.jsx)(r.p,{children:"Updating an existing resource, this workflow manages one given resource at a time. Hence an interesting location for this workflow could be the individual view page of users."}),"\n",(0,i.jsx)(r.p,{children:(0,i.jsx)(r.img,{alt:"Workflow Menu Items - User&#39;s Page",src:o(3003).A+"",width:"3594",height:"985"})}),"\n",(0,i.jsx)(r.p,{children:"To create a menu item here for the new workflow, you can add the following XML configuration to the existing menu items list:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'\n<MenuItem Identifier="Menu_Directory_User" DisplayName_L1="Menu">  <MenuItem Identifier="Menu_Directory_User_Changes" DisplayName_L1="Actions">    <MenuItem Identifier="Menu_Directory_User_Changes_Update" DisplayName_L1="Section">      ...\n      <MenuItem Identifier="Menu_Directory_User_Changes_ManagePositions" DisplayName_L1="Manage Positions" IconCode="Edit" Workflow="Directory_User_UpdateSeveralRecords" />\n    </MenuItem>  </MenuItem></MenuItem>\n\n'})}),"\n",(0,i.jsx)(r.h2,{id:"add-aspects",children:"Add Aspects"}),"\n",(0,i.jsx)(r.p,{children:"For each workflow, it is possible to add aspects according to the workflow's purpose."}),"\n",(0,i.jsx)(r.h2,{id:"homonym-detection-optional",children:"Homonym Detection (Optional)"}),"\n",(0,i.jsxs)(r.p,{children:["To perform a homonymy check on a workflow and thus prevent user duplicates,see the ",(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/workflows/how-to/configure-homonym-test/",children:"\nConfigure a Homonym Detection\n"})," topic for additional information."]}),"\n",(0,i.jsx)(r.p,{children:"When using records, the homonym detection displays the list of records and not just the list of users."}),"\n",(0,i.jsx)(r.h2,{id:"customize-the-display-table-optional",children:"Customize the Display Table (Optional)"}),"\n",(0,i.jsxs)(r.p,{children:["To configure a display table different from the default one provided by Identity Manager, see the ",(0,i.jsx)(r.a,{href:"/docs/usercube_saas/usercube/integration-guide/ui/how-tos/custom-display-table/",children:"Customize Display Tables"})," topic for additional information."]})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},958588:(e,r,o)=>{o.d(r,{A:()=>t});const t=o.p+"assets/images/howto_resourceupdatemulti_form_v603-f1365e7f5e6dc0c5a533fcdd3f9ddb41.webp"}}]);