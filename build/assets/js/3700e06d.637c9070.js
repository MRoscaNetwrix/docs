"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[680904],{28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var o=n(296540);const a={},r=o.createContext(a);function i(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),o.createElement(r.Provider,{value:t},e.children)}},959242:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"changetracker/install/deployment/databasecustompathlinux","title":"Linux","description":"By default the Netwrix Change Tracker database resides on the /var/lib/mongo path. A typical installation will look like the below:","source":"@site/docs/changetracker/changetracker/install/deployment/databasecustompathlinux.md","sourceDirName":"changetracker/install/deployment","slug":"/changetracker/install/deployment/databasecustompathlinux","permalink":"/docs/changetracker/changetracker/install/deployment/databasecustompathlinux","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/changetracker/changetracker/install/deployment/databasecustompathlinux.md","tags":[],"version":"current","frontMatter":{},"sidebar":"changeTrackerSidebar","previous":{"title":"Installing Gen 7 Agent for Windows","permalink":"/docs/changetracker/changetracker/install/agent/windows"},"next":{"title":"MongoDB Configuration","permalink":"/docs/changetracker/changetracker/install/deployment/databasecustompathoverview"}}');var a=n(474848),r=n(28453);const i={},s="Linux",d={},l=[{value:"Modify Database Storage Path Prior to Installation of Change Tracker",id:"modify-database-storage-path-prior-to-installation-of-change-tracker",level:2},{value:"Modify the Database Storage Path after Installing the Product",id:"modify-the-database-storage-path-after-installing-the-product",level:2}];function c(e){const t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"linux",children:"Linux"})}),"\n",(0,a.jsx)(t.p,{children:"By default the Netwrix Change Tracker database resides on the /var/lib/mongo path. A typical installation will look like the below:"}),"\n",(0,a.jsx)(t.h1,{id:"cd-varlibmongo",children:"cd /var/lib/mongo"}),"\n",(0,a.jsx)(t.h1,{id:"ls",children:"ls"}),"\n",(0,a.jsx)(t.p,{children:"journal mongod.lock NNTHubService.2 NNTHubService.5 NNTHubService.ns"}),"\n",(0,a.jsx)(t.p,{children:"local.0 NNTHubService.0 NNTHubService.3 NNTHubService.6"}),"\n",(0,a.jsx)(t.p,{children:"local.ns NNTHubService.1 NNTHubService.4 NNTHubService.7"}),"\n",(0,a.jsxs)(t.p,{children:["The minimum requirement for Netwrix Change Tracker implementation is 10GB free space for the volume supporting ",(0,a.jsx)(t.code,{children:"/var/lib"}),"."]}),"\n",(0,a.jsx)(t.h2,{id:"modify-database-storage-path-prior-to-installation-of-change-tracker",children:"Modify Database Storage Path Prior to Installation of Change Tracker"}),"\n",(0,a.jsxs)(t.p,{children:["If you prefer database files to be written to a different path/volume then it is best to carry out the following procedure instead of using the standard ",(0,a.jsx)(t.strong,{children:"nnthubservice.rpm"})," installer package."]}),"\n",(0,a.jsxs)(t.p,{children:["You can install mongo first and alter the ",(0,a.jsx)(t.code,{children:"dbpath"})," parameter before installing the rest of the system if you wish - it s probably best setup as early as possible to prevent the large files being created."]}),"\n",(0,a.jsx)(t.h1,{id:"yum-install-mongodb-org",children:"yum install mongodb-org"}),"\n",(0,a.jsx)(t.p,{children:"Should install just mongo at which point you can tweak the parameters as required before proceeding with the rest of the installation. First stop any mongo processes:"}),"\n",(0,a.jsx)(t.h1,{id:"service-mongod-stop",children:"service mongod stop"}),"\n",(0,a.jsx)(t.p,{children:"Create the folder for the data to be moved to:"}),"\n",(0,a.jsx)(t.h1,{id:"mkdir--p-optmongoddata",children:"mkdir -p /opt/mongod/data"}),"\n",(0,a.jsx)(t.p,{children:"Then edit the mongod config file."}),"\n",(0,a.jsx)(t.h1,{id:"vi-etcmongodconf",children:"vi /etc/mongod.conf"}),"\n",(0,a.jsx)(t.p,{children:"and look for the entry:"}),"\n",(0,a.jsx)(t.p,{children:"dbpath=/var/lib/mongo"}),"\n",(0,a.jsx)(t.p,{children:"and change it to:"}),"\n",(0,a.jsx)(t.p,{children:"dbpath=/opt/mongod/data"}),"\n",(0,a.jsx)(t.p,{children:"Finally, restart the database using:"}),"\n",(0,a.jsx)(t.h1,{id:"service-mongod-start",children:"service mongod start"}),"\n",(0,a.jsx)(t.h2,{id:"modify-the-database-storage-path-after-installing-the-product",children:"Modify the Database Storage Path after Installing the Product"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.em,{children:"Remember,"})," if SELinux is enabled then please copy the directory created by the install to the new location. The copy command (example below), will take all the SELinux labelling with the copied directory."]}),"\n",(0,a.jsx)(t.h1,{id:"cp--avr-varlibmongo-secondpartition",children:"cp -avr /var/lib/mongo/ /secondpartition/"}),"\n",(0,a.jsx)(t.p,{children:"Stop the hub and mongo services:"}),"\n",(0,a.jsx)(t.h1,{id:"service-nnthubservice-stop",children:"service nnthubservice stop"}),"\n",(0,a.jsx)(t.h1,{id:"service-mongod-stop-1",children:"service mongod stop"}),"\n",(0,a.jsx)(t.p,{children:"Create the folder for the data to be moved to:"}),"\n",(0,a.jsx)(t.h1,{id:"mkdir--p-optmongoddata-1",children:"mkdir -p /opt/mongod/data"}),"\n",(0,a.jsx)(t.p,{children:"Move the data files into the new folder:"}),"\n",(0,a.jsx)(t.h1,{id:"cd-optmongoddata",children:"cd /opt/mongod/data/"}),"\n",(0,a.jsx)(t.h1,{id:"mv-varlibmongo",children:"mv /var/lib/mongo/*"}),"\n",(0,a.jsx)(t.p,{children:"Remove the old folder:"}),"\n",(0,a.jsx)(t.h1,{id:"rmdir-varlibmongo",children:"rmdir /var/lib/mongo"}),"\n",(0,a.jsx)(t.p,{children:"Change the config to point to the new folder:"}),"\n",(0,a.jsx)(t.h1,{id:"vi-etcmongodconf-1",children:"vi /etc/mongod.conf"}),"\n",(0,a.jsx)(t.p,{children:"Then look for the entry:"}),"\n",(0,a.jsx)(t.p,{children:"dbpath=/var/lib/mongo"}),"\n",(0,a.jsx)(t.p,{children:"And change it to:"}),"\n",(0,a.jsx)(t.p,{children:"dbpath=/opt/mongod/data"}),"\n",(0,a.jsx)(t.p,{children:"Restart mongo and the hub:"}),"\n",(0,a.jsx)(t.h1,{id:"service-mongod-start-1",children:"service mongod start"}),"\n",(0,a.jsx)(t.h1,{id:"service-nnhubservice-start",children:"service nnhubservice start"}),"\n",(0,a.jsx)(t.p,{children:"In addition it is possible to ask mongo to use smaller files on disk-space constrained systems. In the mongod.conf file you can add a further parameter:"}),"\n",(0,a.jsx)(t.p,{children:"smallfiles=true"})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}}}]);