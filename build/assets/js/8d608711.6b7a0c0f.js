"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[14844],{28453:(e,r,n)=>{n.d(r,{R:()=>o,x:()=>c});var i=n(296540);const s={},t=i.createContext(s);function o(e){const r=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(t.Provider,{value:r},e.children)}},411397:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"groupid/requirements/permissions/gmsarequirements","title":"gMSA for Active Directory","description":"Directory Manager enables you to use a Group Managed Service Account (gMSA) to connect an Active Directory identity store to the identity provider. To ensure that the gMSA can be configured and used effectively, verify the following:","source":"@site/docs/groupid/groupid/requirements/permissions/gmsarequirements.md","sourceDirName":"groupid/requirements/permissions","slug":"/groupid/requirements/permissions/gmsarequirements","permalink":"/docs/groupid/groupid/requirements/permissions/gmsarequirements","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/groupid/groupid/requirements/permissions/gmsarequirements.md","tags":[],"version":"current","frontMatter":{},"sidebar":"groupIdSidebar","previous":{"title":"Service Account for Active Directory and Exchange","permalink":"/docs/groupid/groupid/requirements/permissions/adserviceaccount"},"next":{"title":"Service Account Permissions","permalink":"/docs/groupid/groupid/requirements/permissions/overview"}}');var s=n(474848),t=n(28453);const o={},c="gMSA for Active Directory",a={},l=[{value:"General Checks",id:"general-checks",level:2},{value:"Required Permissions",id:"required-permissions",level:2},{value:"Allowed Principals",id:"allowed-principals",level:2}];function d(e){const r={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"gmsa-for-active-directory",children:"gMSA for Active Directory"})}),"\n",(0,s.jsx)(r.p,{children:"Directory Manager enables you to use a Group Managed Service Account (gMSA) to connect an Active Directory identity store to the identity provider. To ensure that the gMSA can be configured and used effectively, verify the following:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"General Checks"}),"\n",(0,s.jsx)(r.li,{children:"Required Permissions"}),"\n",(0,s.jsx)(r.li,{children:"Allowed Principals"}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"general-checks",children:"General Checks"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["Run the following cmdlet in Windows PowerShell on the Directory Manager server to verify the gMSA status as either ",(0,s.jsx)(r.em,{children:"true"})," or ",(0,s.jsx)(r.em,{children:"false"}),"."]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"Test-ADServiceAccount -Identity <gMSA>\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:["In case a gMSA is configured for GroupIDAppPool11 or as a service account for identity store make sure the account name follows the format:",(0,s.jsx)(r.br,{}),"\n","FQDN<gMSA>$)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"required-permissions",children:"Required Permissions"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"The gMSA must have full permissions on the Directory Manager installation folder."}),"\n",(0,s.jsx)(r.li,{children:"It must be a member of the local administrator group (Administrators) on the Directory Manager server."}),"\n",(0,s.jsx)(r.li,{children:"It must be a member of the local IIS group (IIS_IUSRS) on the Directory Manager server."}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"allowed-principals",children:"Allowed Principals"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"The following principals must be allowed to retrieve the managed password for the gMSA that you use to connect an identity store to an identity provider:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Directory Manager server (type: Computer)"}),"\n",(0,s.jsx)(r.li,{children:"The account configured for the Directory Manager app pool (type: Service Account)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsx)(r.p,{children:"If any of these principals are not allowed to retrieve the managed password for the gMSA, do the following depending on the scenario:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:["If a\xa0group is mentioned in the 'PrincipalsAllowedToRetrieveManagedPassword' parameter of the\xa0New-ADServiceAccount cmdlet, add the missing principal (Directory Manager server and/or app pool account) to the group.",(0,s.jsx)(r.br,{}),"\n","Both these principals must\nbe enlisted directly or indirectly in the 'PrincipalsAllowedToRetrieveManagedPassword' parameter."]}),"\n",(0,s.jsx)(r.li,{children:"If an individual principals are mentioned in the 'PrincipalsAllowedToRetrieveManagedPassword' parameter of the\xa0New-ADServiceAccount cmdlet, use the 'PrincipalsAllowedToRetrieveManagedPassword' parameter of the Set-ADServiceAccount\ncmdlet to add the missing principals (Directory Manager server and/or app pool account)."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:"NOTE: Restart the Directory Manager server if you apply any of the above."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"See Also"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"/docs/groupid/groupid/admincenter/identitystore/manage",children:"Manage an Identity Store"})}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);