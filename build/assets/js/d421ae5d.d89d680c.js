"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[525525],{6014:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/launchgid-68f46b53ab18e02918d3edf1825678b4.jpg"},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>c});var i=t(296540);const r={},s=i.createContext(r);function a(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:n},e.children)}},370476:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/securitysettings-569868b74366ff8867831c2c012fe6f8.jpg"},418143:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/servicesconfiguration-ddc82b786d436a9bd01d9133bbcb1c72.jpg"},448072:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/license-ad7a29e9314cc6848a8bbbf5461282b3.jpg"},462261:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/databasesettings-812029ce8e024ecf9751965ae1aa0af7.jpg"},558031:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/createserviceaccount-95a01dc89b4d718909845dddf404adc7.jpg"},627754:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/elasticsearchsettings-2-fc9f333099d7d7cfdb8c5020c4cb0e98.jpg"},795572:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/selectelasticcluster-23495f1abb44b6b83852f0cad6202fd2.jpg"},835560:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"groupid/install/configure/gidserver","title":"Configure a New Directory Manager Server with a New or an Existing Database","description":"This option configures the Directory Managerserver and the Directory Manager Data Service on the machine where Directory Manageris being installed.","source":"@site/docs/groupid/groupid/install/configure/gidserver.md","sourceDirName":"groupid/install/configure","slug":"/groupid/install/configure/gidserver","permalink":"/docs/groupid/groupid/install/configure/gidserver","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/groupid/groupid/install/configure/gidserver.md","tags":[],"version":"current","frontMatter":{},"sidebar":"groupIdSidebar","previous":{"title":"Configure a new Directory Manager server to add it to an existing Directory Manager 11 cluster with an existing database","permalink":"/docs/groupid/groupid/install/configure/database"},"next":{"title":"Configuration","permalink":"/docs/groupid/groupid/install/configure/overview"}}');var r=t(474848),s=t(28453);const a={},c="Configure a New Directory Manager Server with a New or an Existing Database",o={},d=[];function h(e){const n={a:"a",em:"em",h1:"h1",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"configure-a-new-directory-manager-server-with-a-new-or-an-existing-database",children:"Configure a New Directory Manager Server with a New or an Existing Database"})}),"\n",(0,r.jsx)(n.p,{children:"This option configures the Directory Managerserver and the Directory Manager Data Service on the machine where Directory Manageris being installed.\nIt also configures the Directory Manager Elasticsearch Service as a master node for the Elasticsearch service cluster to support load balancing."}),"\n",(0,r.jsx)(n.p,{children:"To configure Directory Manager server on the machine where the Configuration Tool is being run:"}),"\n",(0,r.jsxs)(n.p,{children:["Step 1 \u2013 Select the ",(0,r.jsx)(n.strong,{children:"Configure a new GroupID server with new or existing database"})," option on the Select to create new server or use existing server page of the Configuration Tool and select ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Database Settings page",src:t(462261).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsxs)(n.p,{children:["Step 2 \u2013 In the SQL Server list, select the ",(0,r.jsx)(n.strong,{children:"SQL Server"})," to use with Directory Manager. If the required server does not appear in the list, make sure that the SQL Server Browser service is running on the SQL Server machine and then click the ",(0,r.jsx)(n.strong,{children:"Refresh"})," button."]}),"\n",(0,r.jsx)(n.p,{children:"Step 3 \u2013 In the Authentication list, select an authentication mode to be used when connecting to the SQL Server database. Modes are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["SQL Server Authentication - To set SQL Server to work with Directory Managerusing an SQL Server account. See SQL\xa0Authentication in ",(0,r.jsx)(n.a,{href:"/docs/groupid/groupid/requirements/setupauthentication",children:"Authentication Modes"})," topic."]}),"\n",(0,r.jsxs)(n.li,{children:["Windows Authentication - To set SQL Server to work with Directory Managerusing a Windows user account. See Windows Authentication in in ",(0,r.jsx)(n.a,{href:"/docs/groupid/groupid/requirements/setupauthentication",children:"Authentication Modes"})," topic."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Step 4 \u2013 Depending on the authentication mode selected, do the following:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["For SQL Server Authentication: enter the user name and password of the selected SQL Server in the ",(0,r.jsx)(n.strong,{children:"SQL Username"})," and ",(0,r.jsx)(n.strong,{children:"SQL Password"})," boxes."]}),"\n",(0,r.jsxs)(n.li,{children:["For Windows Authentication: provide the credentials of a domain account or a Windows local account that Directory Managerwill use to connect with SQL Server. On clicking ",(0,r.jsx)(n.strong,{children:"OK"}),", the system authenticates with that account on SQL Server via Windows authentication."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Step 5 \u2013 In the SQL\xa0Database box, either specify name of a new SQL database to use for Directory Manager or continue using your existing database."}),"\n",(0,r.jsxs)(n.p,{children:["Step 6 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Security Settings page",src:t(370476).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsxs)(n.p,{children:["Step 7 \u2013 On the Security Settings page, enter an encryption key in the ",(0,r.jsx)(n.strong,{children:"Passphrase"})," and ",(0,r.jsx)(n.strong,{children:"Confirm Passphrase"})," boxes to secure Directory Manager data."]}),"\n",(0,r.jsx)(n.p,{children:"Directory Manager Data Service uses this key to encrypt and decrypt the data that it stores in, and retrieves from, the SQL Server database."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The passphrase must have at least eight characters."}),"\n",(0,r.jsx)(n.li,{children:"Be sure to save this passphrase with you. Providing an incorrect passphrase at any later point will result in the loss of Directory Managerdata."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Step 8 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"License page",src:t(448072).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsxs)(n.p,{children:["Step 9 \u2013 On the License page, enter a valid license number and key in the respective boxes. A valid license and key enable the ",(0,r.jsx)(n.strong,{children:"Next"})," button. If the ",(0,r.jsx)(n.strong,{children:"Next"})," button remains disabled, check your entries for errors."]}),"\n",(0,r.jsxs)(n.p,{children:["Step 10 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Elasticsearch setting page",src:t(892923).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsx)(n.p,{children:"Step 11 \u2013 Directory Manager provides the following two options for Elasticsearch configuration. Select the relevant option:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Let GroupID install and manage Elasticsearch"}),": If you select this option, Directory Manager Configuration Tool will install Elasticsearch. It presents you default configuration of Elasticsearch cluster it will create:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Select Elastic Cluster page",src:t(795572).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Cluster Name: for Elasticsearch node(s) within the cluster. You can modify the name."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Port: the default port for Elasticsearch API communication. Modify the port number if the mentioned default port is not available."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"TCP Port: the default port for communication between nodes within the cluster. Modify the port number if the mentioned default port is not available."}),"\n",(0,r.jsx)(n.p,{children:"NOTE: Make sure that the specified ports are available and unblocked."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"I will install and manage Elasticsearch myself: If you select this option, the following page is displayed:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Elasticsearch settings page",src:t(627754).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsx)(n.p,{children:"Provide configurations of Elasticsearch you want to use with Directory Manager:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Elasticsearch URL: URL for accessing the Elasticsearch."}),"\n",(0,r.jsx)(n.li,{children:"Elasticsearch Username: service account for Elasticsearch."}),"\n",(0,r.jsx)(n.li,{children:"Elasticsearch Password: password of the Elasticsearch service account."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Step 12 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Services Configuration page",src:t(418143).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsx)(n.p,{children:"Step 13 \u2013 At this point, Directory Manager configures the following:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Directory Manager Data Service: This is a web-based service that Directory Manager uses to communicate with Microsoft SQL Server for storing and fetching data in the database."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Directory Manager Security Service: This is also a web-based service that Directory Manager uses to:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Authenticate and authorize users on different Directory Manager functionalities in accordance with their roles."}),"\n",(0,r.jsx)(n.li,{children:"Encrypt and decrypt data that Directory Manager Data Service stores and fetches from the SQL database."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["To deploy these services, the Configuration Tool creates and configures a new website in IIS with the name ",(0,r.jsx)(n.em,{children:"GroupIDSite11"}),". By default, it binds this site to any of the available ports. However, if you have a different preference, you can change the port."]}),"\n",(0,r.jsxs)(n.p,{children:["Click ",(0,r.jsx)(n.strong,{children:"Advanced Options"})," and enter the port in ",(0,r.jsx)(n.strong,{children:"the Port Number"})," box."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Replication service: This service replicates object attributes from the provider (such as Active Directory) to Elasticsearch."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Admin Center: Admin Center is a web-based application that can be accessed over the Internet and Intranet."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Email service: It maintains a queue of all notification requests generated by identity stores, and sends them one by one. This service is deployed for each cluster."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Scheduler service: This service initiates schedule runs for scheduled jobs defined in Directory Manager. Directory Manager configures this service for each cluster."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Step 14 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Next"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Service Account Setting page",src:t(924595).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsx)(n.p,{children:"NOTE: If you configure a Group Managed Service Account (gMSA) as an App Pool service account then the Directory Manager Configuration tool will add this account in the local administrators and IIS_IUSRS groups."}),"\n",(0,r.jsxs)(n.p,{children:["NOTE: If you configure a normal user account as an App Pool service account and an AD identity store is created with a gMSA service account, then the App Pool service account must have the ",(0,r.jsx)(n.em,{children:"PrincipalsAllowedToRetrieveManagedPassword"})," property. The App Pool service account also must be a member of Backup Operators and IIS_IUSRS groups."]}),"\n",(0,r.jsx)(n.p,{children:"Step 15 \u2013 Directory Manager enables you to specify the service accounts to use for the Directory Manager App Pool and a default Administrative account for Directory Manager Admin Center."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Service"}),(0,r.jsx)(n.th,{children:"Service Account Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Directory Manager App Pool"}),(0,r.jsx)(n.td,{children:"Use a domain account or a Group Managed Service Account (gMSA).  The account must be a member of the Administrators group or both the Backup Operators and IIS_IUSRS groups.  The account you specify will be used to manage the Directory Manager app pool in IIS. Directory Manager Data Service, Security Service, and the portals run under the app pool.  By default, a local account, GroupIDSSuser, is set for the Directory Manager app pool, but you cannot proceed unless you change it to a domain account or gMSA.  You can specify a local account (with local administrator rights) in app pool for a machine that is not joined to any domain (this applies to an Microsoft Entra ID identity store only)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Directory Manager Administrator"}),(0,r.jsx)(n.td,{children:"Use this account as default Administrative account for first time login to Directory Manager Admin Center.  This account is not associated with any identity store, but one that is specific to Directory Manager.  This account works as an Admin of all Admin accounts of defined identity stores in Admin Center."})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"NOTE: For Directory Manager App Pool, a domain account can be used for a machine joined to a domain."}),"\n",(0,r.jsx)(n.p,{children:"NOTE: Before you use a Group Managed Service Account, make sure that:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Key Distribution Service (KDS) is enabled on the Directory Manager machine."}),"\n",(0,r.jsx)(n.li,{children:"Microsoft AD module for PowerShell is installed on the machine."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Step 16 \u2013 You can specify a service accounts for the app pool in any of the following ways:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Use an existing account: Click ",(0,r.jsx)(n.strong,{children:"Browse"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Find Service Account page",src:t(885726).A+"",width:"813",height:"550"})}),"\n",(0,r.jsxs)(n.p,{children:["On the Find Service Account dialog box, search and select the required account and click ",(0,r.jsx)(n.strong,{children:"OK"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Create a new service account: Click the ",(0,r.jsx)(n.strong,{children:"Create New"})," button on the Service Account Setting page."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Create a new service account page",src:t(558031).A+"",width:"563",height:"375"})}),"\n",(0,r.jsxs)(n.p,{children:["On the Create Service Account dialog box, select the kind of account you want to create. Enter a name, container and password for the account. Click ",(0,r.jsx)(n.strong,{children:"Create"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"NOTE: The logged-in user must have appropriate rights to create a new account."}),"\n",(0,r.jsx)(n.p,{children:"NOTE: If Key Distribution Service (KDS) is not configured in the environment, a warning will be displayed that you cannot use a Group Managed Service Account."}),"\n",(0,r.jsx)(n.p,{children:"Step 17 \u2013 Provide password for the App Pool service account (except for a Group Managed Service Account) in the Password box."}),"\n",(0,r.jsxs)(n.p,{children:["Step 18 \u2013 Provide password for the Directory Manager Administrator account in the ",(0,r.jsx)(n.strong,{children:"Password"})," box."]}),"\n",(0,r.jsxs)(n.p,{children:["Step 19 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Configure"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Configuring GroupID page",src:t(889200).A+"",width:"1000",height:"875"})}),"\n",(0,r.jsx)(n.p,{children:"We are configuring Directory Manager page displays the progress while a Directory Manager server is configured on the machine."}),"\n",(0,r.jsxs)(n.p,{children:["While configuring the machine, the Configuration Tool checks the application\u2019s signing key status and update it according to your Directory Manager environment. See the ",(0,r.jsx)(n.a,{href:"/docs/groupid/groupid/install/configure/signingkeyinfo",children:"Update Signing Key"})," topic for information how Configuration Tool will update Directory Manager's Signing Key."]}),"\n",(0,r.jsx)(n.p,{children:"On successful configuration, the Directory Manager is successfully configured page is displayed and Directory Manager is configured on your machine."}),"\n",(0,r.jsxs)(n.p,{children:["Step 20 \u2013 Click ",(0,r.jsx)(n.strong,{children:"Launch GroupID"})," on the Directory Manager is successfully configured page to start using Directory Manager. The Sign In page opens:"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"GroupID Sign In page",src:t(6014).A+"",width:"593",height:"622"})}),"\n",(0,r.jsx)(n.p,{children:"To login in to Directory Manager Admin Center for the first time, provide Directory Manager Administrator user name and password."}),"\n",(0,r.jsx)(n.p,{children:"or"}),"\n",(0,r.jsxs)(n.p,{children:["click ",(0,r.jsx)(n.strong,{children:"Next"})," to launch the Upgrade wizard for upgrading Directory Manager."]})]})}function l(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},885726:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/findserviceaccount-c46c482882b830039553e6baeb0087ad.jpg"},889200:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/configuring-8f82e084a57c8c6012a640529aa81f05.jpg"},892923:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/elasticsearchsettings-765f2bbe11d6c0edd72a7ed7ae95cbdd.jpg"},924595:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/serviceaccount-9b530c9a2e3ed26c65cb2431cb41694e.jpg"}}]);