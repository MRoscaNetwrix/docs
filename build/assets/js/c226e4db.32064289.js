"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[349477],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(296540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},89414:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"enterpriseauditor/solutions/entraidinventory/aad_scan","title":"1-AAD\\\\_Scan Job","description":"The 1-AAD\\\\_Scan job is responsible for collecting data from Microsoft Entra ID. This job requires no additional customizations before being used, but can be scoped to disable collecting sign-in activity with the scan.","source":"@site/docs/accessanalyzer/enterpriseauditor/solutions/entraidinventory/1-aad_scan.md","sourceDirName":"enterpriseauditor/solutions/entraidinventory","slug":"/enterpriseauditor/solutions/entraidinventory/aad_scan","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/entraidinventory/aad_scan","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/accessanalyzer/enterpriseauditor/solutions/entraidinventory/1-aad_scan.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"accessAnalyzerSidebar","previous":{"title":"2.Users Job Group","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/entraid/users/overview"},"next":{"title":"2-AAD\\\\_Exceptions Job","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/entraidinventory/aad_exceptions"}}');var r=t(474848),i=t(28453);const o={},a="1-AAD_Scan Job",c={},l=[{value:"Queries for the 1-AAD_Scan Job",id:"queries-for-the-1-aad_scan-job",level:2},{value:"Configure the AAD_Inventory Query",id:"configure-the-aad_inventory-query",level:3},{value:"Analysis Tasks for the 1-AAD_Scan Job",id:"analysis-tasks-for-the-1-aad_scan-job",level:2}];function d(e){const n={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"1-aad_scan-job",children:"1-AAD_Scan Job"})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"1-AAD_Scan"})," job is responsible for collecting data from Microsoft Entra ID. This job requires no additional customizations before being used, but can be scoped to disable collecting sign-in activity with the scan."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"}),"  This job requires an Microsoft Entra ID\xa0application with the appropriate permissions to perform the scan. See the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/config/entraid/overview",children:"Microsoft Entra ID Tenant Target Requirements"})," topic for information on the prerequisites for this job."]}),"\n",(0,r.jsx)(n.h2,{id:"queries-for-the-1-aad_scan-job",children:"Queries for the 1-AAD_Scan Job"}),"\n",(0,r.jsx)(n.p,{children:"The 1-AAD_Scan job uses the AzureADInventory and Entra Data Collectors for the following queries:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Query Selection page",src:t(716380).A+"",width:"831",height:"246"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"AAD Inventory \u2013 Targets Microsoft Entra tenants to collect inventory data for user group objects"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"(Optional)"})," This query can be modified to specify scan options and to collect custom attributes. See the ",(0,r.jsx)(n.a,{href:"#configure-the-aad_inventory-query",children:"Configure the AAD_Inventory Query"})," topic for additional information."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Entra \u2013 Collects Entra roles details from the target Microsoft Entra tenants"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configure-the-aad_inventory-query",children:"Configure the AAD_Inventory Query"}),"\n",(0,r.jsx)(n.p,{children:"The 1-AAD_Scan job is configured to run with the default settings with the category of Scan Entra ID. Follow the steps to customize configurations."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Navigate to the ",(0,r.jsx)(n.strong,{children:".Entra ID Inventory"})," > ",(0,r.jsx)(n.strong,{children:"1-AAD_Scan"})," > ",(0,r.jsx)(n.strong,{children:"Configure"})," node and select ",(0,r.jsx)(n.strong,{children:"Queries"}),"."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Query Properties button on Query Selection page",src:t(820909).A+"",width:"831",height:"246"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," In the Query Selection view, click on ",(0,r.jsx)(n.strong,{children:"Query Properties"})," to open the Query Properties window."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Query Properties window",src:t(386367).A+"",width:"480",height:"431"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," Select the ",(0,r.jsx)(n.strong,{children:"Data Source"})," tab, and click ",(0,r.jsx)(n.strong,{children:"Configure"})," to open the Entra ID\xa0Inventory DC Wizard."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Entra ID Inventory DC Wizard Options page",src:t(283866).A+"",width:"606",height:"487"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4 \u2013"})," On the Options page, select the different Scan Options as needed:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Collect only updates since the last scan \u2013 Enables differential scanning."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," Enabling the Collect Open Extensions option on the Custom Attributes page overrides this function."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Collect sign-in activity with scan \u2013 Required to collect the LastLogonTimestamp attribute of user objects. A message will alert users that deselecting this option will disable this function."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Collect Directory Audit Events \u2013 Collect Microsoft Entra ID\xa0audit logs"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Entra ID Inventory DC Wizard Custom Attributes page",src:t(289122).A+"",width:"605",height:"487"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 5 \u2013"})," On the Custom Attributes page, click ",(0,r.jsx)(n.strong,{children:"Add"})," or ",(0,r.jsx)(n.strong,{children:"Import"})," to add or import custom attributes."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Select ",(0,r.jsx)(n.strong,{children:"Collect Open Extensions"})," to enable the data collector to collect all extension attributes in Microsoft Entra ID. Enabling this option will increase scan times."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"NOTE:"})," Enabling this option overrides the differential scan setting and will direct the data controller to run a full scan every time the job is run."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/overview",children:"AzureADInventory Data Collector"})," topic for additional information on adding and importing custom attributes."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 6 \u2013"})," Navigate to the Summary page. Click ",(0,r.jsx)(n.strong,{children:"Finish"})," to save changes or click ",(0,r.jsx)(n.strong,{children:"Cancel"})," to exit without saving. Then click ",(0,r.jsx)(n.strong,{children:"OK"})," to close the Query Properties window."]}),"\n",(0,r.jsx)(n.p,{children:"The 1-AAD_Scan Job is now ready to run with the customized settings."}),"\n",(0,r.jsx)(n.h2,{id:"analysis-tasks-for-the-1-aad_scan-job",children:"Analysis Tasks for the 1-AAD_Scan Job"}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:".Entra ID Inventory"})," > ",(0,r.jsx)(n.strong,{children:"1-AAD_Scan"})," > ",(0,r.jsx)(n.strong,{children:"Configure"})," node and select ",(0,r.jsx)(n.strong,{children:"Analysis"})," to view the analysis tasks."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"CAUTION:"})," Do not modify or deselect the selected analysis tasks. The analysis tasks are preconfigured for this job."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Analysis Tasks for 1-AAD_Scan Job",src:t(199050).A+"",width:"639",height:"300"})}),"\n",(0,r.jsx)(n.p,{children:"The default analysis tasks are:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Import functions \u2013 Imports effective group membership function into the database"}),"\n",(0,r.jsx)(n.li,{children:"Create Extended Attributes View \u2013 Enables the SA_AzureADInventory_ExtendedAttributesPivotView to be accessible under the job\u2019s Results node"}),"\n",(0,r.jsx)(n.li,{children:"Bring Users View to Console \u2013 Enables the SA_AzureADInventory_UsersView to be accessible under the job\u2019s Results node"}),"\n",(0,r.jsx)(n.li,{children:"Bring Groups View to Console \u2013 Enables the SA_AzureADInventory_GroupsView to be accessible under the job\u2019s Results node"}),"\n",(0,r.jsx)(n.li,{children:"Bring Group Members View to Console \u2013 Enables the SA_AzureADInventory_GroupMemberssView to be accessible under the job\u2019s Results node"}),"\n",(0,r.jsx)(n.li,{children:"Summarize Domains \u2013 Creates interim processing tables in the database for use by downstream analysis and report generation"}),"\n",(0,r.jsx)(n.li,{children:"Summarize Stats \u2013 Creates interim processing tables in the database for use by downstream analysis and report generation"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["In addition to the tables and views listed in the ",(0,r.jsx)(n.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/azureadinventory/standardtables",children:"Standard Reference Tables & Views for the AzureADInventory Data Collector"})," topic, the 1-AAD_Scan job produces the following preconfigured report."]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Report"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Default Tags"}),(0,r.jsx)(n.th,{children:"Report Elements"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Entra ID Summary"}),(0,r.jsx)(n.td,{children:"This report provides a summary of all audited domains and objects."}),(0,r.jsx)(n.td,{children:"None"}),(0,r.jsx)(n.td,{children:"This report has two elements:   - Table \u2013 Provides details on general statistics on the Users and groups found with each tenant scanned - Table \u2013 Provides details on statistical information for each of these Entra ID objects"})]})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},199050:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/scananalysistasks-86fe8c6bc0c679f83d432979448c0ee2.webp"},283866:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/scandcwizardoptions-a64b0c7f7822a4e820124fc5280c6683.webp"},289122:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/scandcwizardcustomattributes-012d86170c89fe24cc4f31d3154fe810.webp"},386367:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/scanqueryproperties-bdd9b591de28d952b6c17616fc49ee17.webp"},716380:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/scanqueryselection-40de84044a6bc880325b1d0bcba38004.webp"},820909:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/scanqueryselectionproperties-438a6f82f7e4a3d65e7ac93e724cb94b.webp"}}]);