"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[338928],{28453:(e,n,o)=>{o.d(n,{R:()=>t,x:()=>c});var r=o(296540);const s={},i=r.createContext(s);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(i.Provider,{value:n},e.children)}},899939:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>t,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/index","title":"Set Up Incremental Synchronization","description":"How to implement an incremental synchronization [","source":"@site/docs/usercube/usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/index.md","sourceDirName":"usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization","slug":"/usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/","permalink":"/docs/usercube/usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube/usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSidebar","previous":{"title":"Provision Salesforce Users\' Profiles via SCIM","permalink":"/docs/usercube/usercube/integration-guide/connectors/how-tos/scim-salesforce-provisioning-entitlements/"},"next":{"title":"For Microsoft Entra ID","permalink":"/docs/usercube/usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/azuread/"}}');var s=o(474848),i=o(28453);const t={},c="Set Up Incremental Synchronization",a={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Build the Incremental Synchronization Job",id:"build-the-incremental-synchronization-job",level:2},{value:"Components",id:"components",level:3},{value:"Permissions for the agent",id:"permissions-for-the-agent",level:3},{value:"Agent&#39;s authentication to the server",id:"agents-authentication-to-the-server",level:3},{value:"Permissions for users",id:"permissions-for-users",level:3},{value:"Schedule the Job",id:"schedule-the-job",level:2},{value:"Using scheduler",id:"using-scheduler",level:3},{value:"Using an external scheduler",id:"using-an-external-scheduler",level:3},{value:"Validate the Job",id:"validate-the-job",level:2}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"set-up-incremental-synchronization",children:"Set Up Incremental Synchronization"})}),"\n",(0,s.jsxs)(n.p,{children:["How to implement an incremental synchronization ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/job/",children:"\nJob\n"})," for a given ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/connectors/connector/",children:"\nConnector\n"})," via XML, to upload the related system's resources to Identity Manager."]}),"\n",(0,s.jsxs)(n.p,{children:["See an example on ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/connectors/how-tos/setup-incremental-synchronization/azuread/",children:"\nFor Microsoft Entra ID\n"})," (formerly Microsoft Azure AD)."]}),"\n",(0,s.jsxs)(n.p,{children:["Netwrix Identity Manager (formerly Usercube) strongly recommends configuring as much as possible via the UI instead of XML files. See how to ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/user-guide/set-up/synchronization/",children:"\nSynchronize Data\n"}),"via the UI."]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.p,{children:["First read how to ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/connectors/how-tos/create-connector/",children:"Create a Connector"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"build-the-incremental-synchronization-job",children:"Build the Incremental Synchronization Job"}),"\n",(0,s.jsx)(n.p,{children:"Identity Manager\xa0provides a fully-written standardized job to perform incremental synchronization through the UI. See here:"}),"\n",(0,s.jsxs)(n.p,{children:["See how to launch incremental ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/user-guide/set-up/synchronization/",children:"\nSynchronize Data\n"}),"via the UI."]}),"\n",(0,s.jsxs)(n.p,{children:["Any IGA action is configured through ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/job/",children:"\nJob\n"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Synchronization jobs contain tasks that are to be executed on agent side."}),"\n",(0,s.jsx)(n.h3,{id:"components",children:"Components"}),"\n",(0,s.jsx)(n.p,{children:"Any synchronization job should include:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"export;"}),"\n",(0,s.jsx)(n.li,{children:"synchronization preparation;"}),"\n",(0,s.jsx)(n.li,{children:"synchronization."}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The export is configured and performed by the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/tasks/agent/exporttask/",children:"\nExport Task\n"}),", the synchronization preparation by the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/tasks/agent/preparesynchronizationtask/",children:"\nPrepare Synchronization Task\n"})," and the synchronization by the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/tasks/server/synchronizetask/",children:"\nSynchronize Task\n"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["See the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/synchronization/upward-data-sync/",children:"\nUpward Data Synchronization\n"})," topic for additional information."]}),"\n",(0,s.jsxs)(n.p,{children:["Identity Manager\xa0provides a scaffolding that generates the configuration for these steps, named ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/jobs/createconnectorsynchroincremental/",children:"Create Connector Synchro Incremental"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["This guide is about incremental synchronization, but complete synchronization can be configured with the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/jobs/createconnectorsynchrocomplete/",children:"Create Connector Synchro Complete"})," scaffolding."]}),"\n",(0,s.jsx)(n.h3,{id:"permissions-for-the-agent",children:"Permissions for the agent"}),"\n",(0,s.jsxs)(n.p,{children:["In order to launch a job via the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/executables/references/invoke-job/",children:"\nUsercube-Invoke-Job\n"})," tool, the agent must use a profile with the right permissions for each task."]}),"\n",(0,s.jsxs)(n.p,{children:["Permissions within Identity Manager\xa0are configured through ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/access-control/accesscontrolrule/",children:"Access Control Rule"}),"."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\n    Conf/Profile AgentJob.xml\n\n<Profile Identifier="AgentSynchro" DisplayName_L1="Agent Synchro" />\n\n'})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Netwrix Identity Manager (formerly Usercube) recommends the creation of a profile for synchronization jobs, and another for provisioning jobs, in order to comply with the principle of least privilege."}),"\n",(0,s.jsx)(n.p,{children:"In order to run a synchronization job, the agent requires the permissions to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["view the tasks via ",(0,s.jsx)(n.code,{children:"/Jobs/Task/Query"}),";"]}),"\n",(0,s.jsxs)(n.li,{children:["access progress reports via ",(0,s.jsx)(n.code,{children:"/Jobs/JobInstance/Query"}),", ",(0,s.jsx)(n.code,{children:"/Jobs/JobInstance/Update"}),", ",(0,s.jsx)(n.code,{children:"/Jobs/TaskInstance/Query"})," and ",(0,s.jsx)(n.code,{children:"/Jobs/TaskInstance/Update"}),";"]}),"\n",(0,s.jsxs)(n.li,{children:["prepare the synchronization and synchronize via ",(0,s.jsx)(n.code,{children:"/Connectors/Connector/Query"})," and ",(0,s.jsx)(n.code,{children:"/Connectors/SynchronizeSession"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Identity Manager\xa0provides scaffoldings that generate the configuration for granting these permissions: ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/accesscontrolrules/jobs/synchronizationaccesscontrolrules/",children:"\nSynchronization Access Control Rules\n"})," and ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/templates/jobviewaccesscontrolrules/",children:"\nJob View Access Control Rules\n"}),"."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["The following example permits the ",(0,s.jsx)(n.code,{children:"AgentSynchro"})," profile to run any synchronization job:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\n    Conf/Profile AgentSynchro.xml\n\n<SynchronizationAccessControlRules Profile="AgentSynchro"><JobViewAccessControlRules Profile="AgentSynchro">\n\n'})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"agents-authentication-to-the-server",children:"Agent's authentication to the server"}),"\n",(0,s.jsxs)(n.p,{children:["Every request from agent to server within the execution of a job needs to be authenticated with an ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/access-control/openidclient/",children:"\nOpenIdClient\n"})," Connect ClientId/Secret pair."]}),"\n",(0,s.jsxs)(n.p,{children:["So first, the configuration must contain a ",(0,s.jsx)(n.code,{children:"ClientId/Secret"})," pair."]}),"\n",(0,s.jsxs)(n.p,{children:["Usable ",(0,s.jsx)(n.code,{children:"ClientId/Secret"})," pairs are configured through an ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/access-control/openidclient/",children:"\nOpenIdClient\n"}),"."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["The following example uses a secret hashed by",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/executables/references/new-openidsecret/",children:"\nUsercube-New-OpenIDSecret\n"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\n    Conf/OpenIdClients.xml\n\n<OpenIdClient Identifier="Job" HashedSecret="K7gNU3sdo+Op8wNhqoVWhr5v6s1xYv72ol/pe/Unols=" DisplayName_L1="ClientId for Jobs" Profile="Administrator" />\n\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Then, the agent's profile must be linked to one of the ",(0,s.jsx)(n.code,{children:"ClientId/Secret"})," pairs."]}),"\n",(0,s.jsxs)(n.p,{children:["Agents' settings are configured in their ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings-agent/",children:"appsettings.agent"}),".json file."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["The following example sets the ",(0,s.jsx)(n.code,{children:"Job/secret"})," pair to be used by tasks and jobs:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\n    appsettings.agent.json\n{\n...\n"OpenId":{\n"OpenIdClients": {\n"Job": "secret"\n},\n"DefaultOpenIdClient": "Job"\n}\n}\n\n'})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"permissions-for-users",children:"Permissions for users"}),"\n",(0,s.jsx)(n.p,{children:"In order to launch the job, a user must have the right permissions."}),"\n",(0,s.jsxs)(n.p,{children:["Permissions within Identity Manager\xa0are configured through ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/access-control/accesscontrolrule/",children:"Access Control Rule"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["In order to launch a synchronization job, a user requires the appropriate permission: ",(0,s.jsx)(n.code,{children:"/Jobs/RunJob/Launch"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Identity Manager\xa0provides a ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/templates/jobexecutionaccesscontrolrules/",children:"\nJob Execution Access Control Rules\n"}),"that generates the configuration for granting this permission."]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"For example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'\n    Conf/Profile AgentSynchro.xml\n\n<JobExecutionAccessControlRules Profile="AgentSynchro">\n\n'})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"schedule-the-job",children:"Schedule the Job"}),"\n",(0,s.jsx)(n.p,{children:"Scheduling the job execution can rely either on Identity Manager's scheduler or on an external scheduler."}),"\n",(0,s.jsx)(n.h3,{id:"using-scheduler",children:"Using scheduler"}),"\n",(0,s.jsxs)(n.p,{children:["Identity Manager's scheduler is configured through the ",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/job/",children:"\nJob\n"}),"'s ",(0,s.jsx)(n.code,{children:"CronTabExpression"})," property."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://crontab.guru/every-15-minutes",children:"See Crontab documentationfor more details "}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"using-an-external-scheduler",children:"Using an external scheduler"}),"\n",(0,s.jsxs)(n.p,{children:["An external scheduler relies on using an external mechanism to schedule the",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/executables/references/invoke-job/",children:"\nUsercube-Invoke-Job\n"}),".exe."]}),"\n",(0,s.jsx)(n.h2,{id:"validate-the-job",children:"Validate the Job"}),"\n",(0,s.jsx)(n.p,{children:"Validate the job's execution by proceeding as follows:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Deploy the XML configuration to the database, by using the",(0,s.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/jobs/tasks/server/deployconfigurationtask/",children:"\nDeploy Configuration Task\n"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["In the UI, access the ",(0,s.jsx)(n.strong,{children:"Job Execution"})," page from the dashboard's ",(0,s.jsx)(n.strong,{children:"Administration"})," section."]}),"\n",(0,s.jsxs)(n.li,{children:["Find the job named with the string specified in the XML configuration in the job's ",(0,s.jsx)(n.code,{children:"DisplayName"})," property, and launch it."]}),"\n",(0,s.jsxs)(n.li,{children:["Once the job is completed, the system's objects should be synchronized to the database's ",(0,s.jsx)(n.code,{children:"UR_Resources"})," table."]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);