"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[85319],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var r=i(296540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}},850955:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"usercube/integration-guide/api/squery/index","title":"API query grammar","description":"Identity Manager\'s API query language allows to express exactly needed data in an API\'s GET call. Query is optionally specified by the squery parameter.","source":"@site/docs/usercube_saas/usercube/integration-guide/api/squery/index.md","sourceDirName":"usercube/integration-guide/api/squery","slug":"/usercube/integration-guide/api/squery/","permalink":"/docs/usercube_saas/usercube/integration-guide/api/squery/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube_saas/usercube/integration-guide/api/squery/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSaasSidebar","previous":{"title":"Pagination","permalink":"/docs/usercube_saas/usercube/integration-guide/api/pagination/"},"next":{"title":"Architecture","permalink":"/docs/usercube_saas/usercube/integration-guide/architecture/"}}');var t=i(474848),s=i(28453);const a={},o="API query grammar",d={},l=[{value:"Grammar",id:"grammar",level:3},{value:"Operators&#39; semantic",id:"operators-semantic",level:3},{value:"Query without select section",id:"query-without-select-section",level:3},{value:"Examples",id:"examples",level:3},{value:"HasFlag operator",id:"hasflag-operator",level:3},{value:"Example",id:"example",level:4},{value:"Historization filter",id:"historization-filter",level:3},{value:"Example",id:"example-1",level:4}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"api-query-grammar",children:"API query grammar"})}),"\n",(0,t.jsx)(n.p,{children:"Identity Manager's API query language allows to express exactly needed data in an API's GET call. Query is optionally specified by the squery parameter."}),"\n",(0,t.jsx)(n.h3,{id:"grammar",children:"Grammar"}),"\n",(0,t.jsxs)(n.p,{children:["Here's the query language's formal description. See the ",(0,t.jsx)(n.a,{href:"https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form",children:"EBNF syntax "}),"for additional information."]}),"\n",(0,t.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,t.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0[query] = [historizationFilter] , [joins] , [limit] , [select] , [where] , [orderby] ;  \n\xa0\xa0\xa0\xa0historizationFilter = asof | between | contained ;  \n\xa0\xa0\xa0\xa0asof = "as of" , \'"\' , date , \'"\' ;  \n\xa0\xa0\xa0\xa0between = "between" , \'"\' , date , \'"\', "and", \'"\' , date , \'"\' ;  \n\xa0\xa0\xa0\xa0contained = "contained in" , "(" , \'"\' , date , \'"\' , "," , \'"\' , date , \'"\' , ")" ;  \n\xa0\xa0\xa0\xa0joins = join , { join } ;  \n\xa0\xa0\xa0\xa0join = "join" , binding ( "of type" identifier ) , alias ;  \n\xa0\xa0\xa0\xa0binding = [alias , "."] , property ;  \n\xa0\xa0\xa0\xa0property = identifier ;  \n\xa0\xa0\xa0\xa0alias = identifier ;  \n\xa0\xa0\xa0\xa0identifier = letter , { letter | digit | "_" } ;  \n\xa0\xa0\xa0\xa0limit = "pagesize" , integer  \n\xa0\xa0\xa0\xa0select = projections ;  \n\xa0\xa0\xa0\xa0projections = "select" , binding , { "," , binding } ;  \n\xa0\xa0\xa0\xa0where = "where" , filter ;  \n\xa0\xa0\xa0\xa0filter = comparison\xa0\xa0| combinatorFilter ;  \n\xa0\xa0\xa0\xa0combinatorFilter = "(" , filter , (andCombinatorFilter | orCombinatorFilter) , ")" ;  \n\xa0\xa0\xa0\xa0andCombinatorFilter = "and" , filter , { "and , filter } ;  \n\xa0\xa0\xa0\xa0orCombinatorFilter = "or" , filter , { "or , filter } ;  \n\xa0\xa0\xa0\xa0comparison = binding , operator , rightOperand ;  \n\xa0\xa0\xa0\xa0rightOperand = value | binding ;  \n\xa0\xa0\xa0\xa0operator = "=" | "!=" | "<" | ">" | "<=" | ">=" | "%=" | "=%" | "%=%" | "!%=" | "!=%" | "!%=%" | "&=" ;  \n\xa0\xa0\xa0\xa0value = integer | boolean | \'"\' , string , \'"\' | "null" | \'"\' , date , \'";  \n\xa0\xa0\xa0\xa0boolean = "false" | "true"  \n\xa0\xa0\xa0\xa0date = yyyy-mm-ddThh:mm:ssZ  \n\xa0\xa0\xa0\xa0orderby = "order by" , binding , sortdirection , { "," ,\xa0\xa0binding , sortdirection }  \n\xa0\xa0\xa0\xa0sortdirection = "asc" | "desc".  \n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"operators-semantic",children:"Operators' semantic"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"="})," : Equal."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"!="})," : Not Equal."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<"})})," : Less than."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:">"})})," : Greater than."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"<="})})," : Less than or equal."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:">="})})," : Greater than or equal."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"%="})," : Start with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"=%"})," : End with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"%=%"})," : Contain."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"!%="})," : Doesn't start with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"!=%"})," : Doesn't end with."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"!%=%"})," : Doesn't contain."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"&="})," : Has flag"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"query-without-select-section",children:"Query without select section"}),"\n",(0,t.jsx)(n.p,{children:"If select is not specified, API will just return queried elements' Ids."}),"\n",(0,t.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.p,{children:"Last 100 started job's instances' Ids."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Remember,"})," The ",(0,t.jsx)(n.code,{children:"Top"})," in the API queries had been deprecated and ",(0,t.jsx)(n.code,{children:"PageSize"}),"should be used instead."]}),"\n",(0,t.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,t.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"/api/Job/JobInstance?squery=order\xa0\xa0by StartDate desc&PageSize=100\n"})}),"\n",(0,t.jsx)(n.p,{children:"A Complete query would be like:"}),"\n",(0,t.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,t.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  \njoin Properties p join p.Association1 ea1\xa0\xa0PageSize 2 select Id,Identifier,p.Id,p.Identifier,ea1.Id,ea1.Identifier where Id > 45 order by DisplayName_L1 asc  \n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This query when executed on ",(0,t.jsx)(n.code,{children:"/api/Metadata/EntityType"})," route will return the first 2 EntityTypes with their properties ordered by DisplayName:"]}),"\n",(0,t.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,t.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'  \n{  \n\xa0\xa0"Result": [  \n\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0"Id": "2147483653",  \n\xa0\xa0\xa0\xa0\xa0\xa0"Properties": [  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372015379939327",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Association1": {  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372015379939327",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedCompositeRole.Role-CompositeRole.AssignedCompositeRoles"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "Role"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372015379939326",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Association1": {  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372015379939326",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedCompositeRole.Owner-Resource.AssignedCompositeRoles"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "Owner"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372015379939324",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "WorkflowState"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372015379939312",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "WorkflowInstanceId"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}  \n\xa0\xa0\xa0\xa0\xa0\xa0],  \n\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedCompositeRole"  \n\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0"Id": "2147483654",  \n\xa0\xa0\xa0\xa0\xa0\xa0"Properties": [  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372011084972031",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Association1": {  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372011084972031",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedResourceNavigation.AssignedResourceType-AssignedResourceType.AssignedResourceNavigations"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedResourceType"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372011084972030",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Association1": {  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372011084972030",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedResourceNavigation.Property-EntityProperty.AssignedResourceNavigations"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "Property"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372011084972012",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "PerformerId"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Id": "-9223372011084972025",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "StartDate"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}  \n\xa0\xa0\xa0\xa0\xa0\xa0],  \n\xa0\xa0\xa0\xa0\xa0\xa0"Identifier": "AssignedResourceNavigation"  \n\xa0\xa0\xa0\xa0}  \n\xa0\xa0]  \n}  \n\n'})}),"\n",(0,t.jsx)(n.h3,{id:"hasflag-operator",children:"HasFlag operator"}),"\n",(0,t.jsx)(n.p,{children:"Determines whether one or more bit fields are set in the property."}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:"How to determine whether the DisplayFilter property has its first and third bits are set to 1."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Comparison expression in the squery (101 in binary = 5 in decimal):"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,t.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DisplayFilter &= 5  \n\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["SQL equivalent (see ",(0,t.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/sql/t-sql/language-elements/bitwise-operators-transact-sql?view=sql-server-ver15",children:"Microsoft Documentation"})," about the bitwise operators):"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"DisplayFilter & 5 = 5  \n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"historization-filter",children:"Historization filter"}),"\n",(0,t.jsx)(n.p,{children:"Provides information about data stored in Identity Manager\xa0at any point in time, rather than only the data that is correct at the current moment in time."}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"historizationfilter"})," expression can take the following values:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"As of"}),": Returns the rows that are active at the time specified by the date parameter."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Between"}),": Returns the values for all row versions that are active within the specified time range, regardless of whether they activated before the start date parameter value or deactivated after the end date parameter value."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Contained in"}),": Returns the values for all row versions that were opened and closed within the specified time range defined by the two ",(0,t.jsx)(n.strong,{children:"datetime"})," values."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["For now, the ",(0,t.jsx)(n.strong,{children:"between"})," and ",(0,t.jsx)(n.strong,{children:"contained in"})," historization filters can be used only in ReportQuery."]}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,t.jsx)(n.p,{children:'The following squery returns the active users at "01/01/2022".'}),"\n",(0,t.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,t.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"2022-01-01T23:00:00Z" select Id, MainFirstName, MainLastName, Op_MainTitle_DisplayName, Op_MainOrganization_DisplayName, Op_MainLocation_DisplayName, MainPhoneNumber, MainMobileNumber, MainEmployeeCategory.Id, MainLeave, MainVIP\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);