"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[997756],{28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>o});var t=a(296540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},329792:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/archivedbmaintenance-d1ecabd1e86d48d7c07f543eeaed2101.webp"},760801:(e,n,a)=>{a.d(n,{A:()=>t});const t=a.p+"assets/images/archivedb-e26ffa969c788efa0ffed606023c6af6.webp"},827712:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"threatprevention/admin/configuration/databasemaintenance/archive","title":"Archive Data","description":"To use the Move operation on the Database Maintenance Window, you must specify a database where data is archived. You can also define settings to delete data aged beyond a specified threshold from the archive database.","source":"@site/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/archive.md","sourceDirName":"threatprevention/admin/configuration/databasemaintenance","slug":"/threatprevention/admin/configuration/databasemaintenance/archive","permalink":"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/archive","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/archive.md","tags":[],"version":"current","frontMatter":{},"sidebar":"threatPreventionSidebar","previous":{"title":"Collection Manager Window","permalink":"/docs/threatprevention/threatprevention/admin/configuration/collectionmanager/overview"},"next":{"title":"Enable Database Maintenance","permalink":"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/enable"}}');var i=a(474848),r=a(28453);const s={},o="Archive Data",c={},h=[{value:"Configure the Archive Database",id:"configure-the-archive-database",level:2},{value:"Enable Database Maintenance for the Archive Database",id:"enable-database-maintenance-for-the-archive-database",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"archive-data",children:"Archive Data"})}),"\n",(0,i.jsxs)(n.p,{children:["To use the Move operation on the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/overview",children:"Database Maintenance Window"}),", you must specify a database where data is archived. You can also define settings to delete data aged beyond a specified threshold from the archive database."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:(0,i.jsx)(n.strong,{children:"RECOMMENDED:"})})," Consider periodically retiring the current archive database and creating a new one. Depending on the size of the archive database, it could be yearly or every few years."]}),"\n",(0,i.jsx)(n.h2,{id:"configure-the-archive-database",children:"Configure the Archive Database"}),"\n",(0,i.jsx)(n.p,{children:"Follow the steps to configure settings for the archive database."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1 \u2013"})," Click ",(0,i.jsx)(n.strong,{children:"Configuration"})," > ",(0,i.jsx)(n.strong,{children:"Database"})," > ",(0,i.jsx)(n.strong,{children:"Maintenance"})," on the menu. The Database Maintenance window is displayed. Click the ",(0,i.jsx)(n.strong,{children:"Archive DB"})," tab."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Database Maintenance window - Archive DB tab",src:a(760801).A+"",width:"865",height:"492"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2 \u2013"})," Enter the following information for the database where data is to be archived:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Server \u2013 SQL Server where the archive database is located"}),"\n",(0,i.jsx)(n.li,{children:"Port \u2013 Instance port number, by default this is set to 0"}),"\n",(0,i.jsx)(n.li,{children:"Database \u2013 Name of the archive database"}),"\n",(0,i.jsxs)(n.li,{children:["Authentication","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"For Windows Authentication \u2013 Check the Use Windows Authentication box"}),"\n",(0,i.jsx)(n.li,{children:"For SQL Authentication \u2013 Enter theuser name and password of an account to use for SQL authentication"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3 \u2013"})," Click ",(0,i.jsx)(n.strong,{children:"Save"})," to save the configurations."]}),"\n",(0,i.jsxs)(n.p,{children:["To query archived event data, use the Investigate interface. See the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/investigate/overview",children:"Investigate Interface"})," topic for additional information."]}),"\n",(0,i.jsx)(n.h2,{id:"enable-database-maintenance-for-the-archive-database",children:"Enable Database Maintenance for the Archive Database"}),"\n",(0,i.jsx)(n.p,{children:"You can specify settings to automatically delete archived data that has aged beyond a specified threshold. The threshold can be set per Event Type, per Analytics, and/or per Policy. While all three options can be enabled with different retention periods, the Event Type maintenance settings take precedence over Policy maintenance settings where the selected policy employs that event type."}),"\n",(0,i.jsxs)(n.p,{children:["Alerts generated for the archive database maintenance job are displayed on the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/alerts/overview",children:"Alerts Interface"}),' with "Archive DB:" as prefix in the Message column. This helps differnciate between alerts generated for database maintenance and archive database maintenance.']}),"\n",(0,i.jsx)(n.p,{children:"Follow the steps to enable database maintenance for the archive database."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1 \u2013"})," Click ",(0,i.jsx)(n.strong,{children:"Configuration"})," > ",(0,i.jsx)(n.strong,{children:"Database"})," > ",(0,i.jsx)(n.strong,{children:"Maintenance"})," on the menu. The Database Maintenance window is displayed. Click the ",(0,i.jsx)(n.strong,{children:"Archive DB"})," tab."]}),"\n",(0,i.jsx)(n.p,{children:"Make sure archive database settings have been configured and the archiving process has run at least once."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2 \u2013"}),"  Click the ",(0,i.jsx)(n.strong,{children:"Configure Archive DB Maintenance"})," button. The Archive DB Maintenance window is displayed."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"Archive DB Maintenance window",src:a(329792).A+"",width:"864",height:"757"})}),"\n",(0,i.jsx)(n.p,{children:"The following information is displayed at the top of the window:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Archive Database Information:"}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Server \u2013 SQL Server where database maintenance is performed"}),"\n",(0,i.jsx)(n.li,{children:"Database \u2013 Name of the database"}),"\n",(0,i.jsx)(n.li,{children:"Database Size \u2013 Current size of the database"}),"\n",(0,i.jsx)(n.li,{children:"Oldest Data \u2013 Date of the oldest data in the database"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Job Information:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Last run \u2013 Date timestamp when the last database maintenance job was executed"}),"\n",(0,i.jsxs)(n.li,{children:["Status \u2013 Status of the job. Different statuses are:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Idle \u2013 Indicates that no database maintenance task is running"}),"\n",(0,i.jsx)(n.li,{children:"Succeeded \u2013 Indicates that the most recent job finished without error"}),"\n",(0,i.jsx)(n.li,{children:"Running \u2013 Indicates that a job is running"}),"\n",(0,i.jsx)(n.li,{children:"Error \u2013 Indicates that the job started but terminated on an error"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:"Running Step \u2013 During job execution, this field populates with the step being executed"}),"\n",(0,i.jsx)(n.li,{children:"Elapsed Time \u2013 Overall elapsed time of job execution"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The Refresh button in the upper-right corner refreshes this database and job information."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3 \u2013"})," From the Run SQL Agent job on drop-down menu, select an option to determine the SQL Agent that will run the maintenance job."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Main DB"})," if the archive database resides on the same SQL Server machine as the NVMonitorData database."]}),"\n",(0,i.jsxs)(n.li,{children:["Select ",(0,i.jsx)(n.strong,{children:"Archive DB"})," if the archive database resides on a different SQL Server machine than the NVMonitorData database."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 4 \u2013"})," On the Event Type, Analytics, and/or Policy tabs, enable maintenance for all or some of the options. See the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/enable",children:"Enable Database Maintenance"})," topic for additional information."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/overview#event-type-tab",children:"Event Type Tab"}),", ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/overview#analytics-tab",children:"Analytics Tab"}),", and ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/overview#policy-tab",children:"Policy Tab"})," on the Archive DB Maintenance window are the same as on the Database Maintenance window, except that only the 'Delete' operation is available for the archive database."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 5 \u2013"})," On the Schedule tab, set the frequency and time when the database maintenance job runs. See the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/configuration/databasemaintenance/schedule",children:"Schedule Database Maintenance"})," topic for additional information."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 6 \u2013"})," Click ",(0,i.jsx)(n.strong,{children:"OK"})," on the Archive DB Maintenance window."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 7 \u2013"})," Click ",(0,i.jsx)(n.strong,{children:"Save"})," on the Database Maintenance window to save the changes."]}),"\n",(0,i.jsx)(n.p,{children:"Database maintenance is now enabled for the archive database."})]})}function l(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);