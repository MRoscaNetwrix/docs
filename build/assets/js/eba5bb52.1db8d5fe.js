"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[235633],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(296540);const t={},a=i.createContext(t);function o(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(a.Provider,{value:n},e.children)}},135419:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/editbinary-e2a143a550380454a79a10b5630a6423.webp"},221722:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/cseuninstallpw-d40602aa77cbfb9f3ddeb72d53d65885.webp"},272881:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"policypak/troubleshooting/clientsideextension/uninstallpassword","title":"Set and Manage the Uninstallation Password for Endpoint Policy Manager Client-Side Extension","description":"Starting with CSE 25.2, the Endpoint Policy Manager Client-Side Extension (CSE) Installer includes new command-line options that allow administrators to set and update an uninstallation password. This ensures that CSE can only be uninstalled with the correct password, adding an extra layer of protection.","source":"@site/docs/policypak/policypak/troubleshooting/clientsideextension/uninstallpassword.md","sourceDirName":"policypak/troubleshooting/clientsideextension","slug":"/policypak/troubleshooting/clientsideextension/uninstallpassword","permalink":"/docs/policypak/policypak/troubleshooting/clientsideextension/uninstallpassword","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/policypak/policypak/troubleshooting/clientsideextension/uninstallpassword.md","tags":[],"version":"current","frontMatter":{},"sidebar":"policyPakSidebar","previous":{"title":"SYSPREP Error with Endpoint Policy Manager Client-Side Extension","permalink":"/docs/policypak/policypak/troubleshooting/clientsideextension/syspreperror"},"next":{"title":"My cloud client lost it\'s join to Endpoint Policy Manager Cloud , and a re-install of the cloud MSI I previously downloaded isn\'t working / re-syncing. What should I do?","permalink":"/docs/policypak/policypak/troubleshooting/cloud/autoupdates"}}');var t=s(474848),a=s(28453);const o={},l="Set and Manage the Uninstallation Password for Endpoint Policy Manager Client-Side Extension",r={},d=[{value:"Set an Uninstallation Password During Installation",id:"set-an-uninstallation-password-during-installation",level:2},{value:"Uninstall CSE When a Password Is Set",id:"uninstall-cse-when-a-password-is-set",level:2},{value:"Update or Repair an Existing Installation",id:"update-or-repair-an-existing-installation",level:2},{value:"Emergency Uninstallation without Password",id:"emergency-uninstallation-without-password",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"set-and-manage-the-uninstallation-password-for-endpoint-policy-manager-client-side-extension",children:"Set and Manage the Uninstallation Password for Endpoint Policy Manager Client-Side Extension"})}),"\n",(0,t.jsx)(n.p,{children:"Starting with CSE 25.2, the Endpoint Policy Manager Client-Side Extension (CSE) Installer includes new command-line options that allow administrators to set and update an uninstallation password. This ensures that CSE can only be uninstalled with the correct password, adding an extra layer of protection."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CAUTION:"})," This feature is not strictly considered to be a security feature, but rather another layer of uninstallation protection. If someone is a local administrator on the machine or provided admin rights to certain tools via Endpoint Policy Manager Least Privilege Manager (or similar), they may be able to work around the password."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"NOTE:"})," At the end of this topic, there is an explanation of how a true local administrator on the machine is authorized to uninstall the CSE without a password for emergency purposes. However, this may be exploited by any local administrator or those with admin-like rights when a tool like Endpoint Policy Manager Least Privilege Manager is used."]}),"\n",(0,t.jsx)(n.p,{children:"Based on the information in this guide, you can determine if the password uninstall mechanism is enough for your company and should be used or not."}),"\n",(0,t.jsx)(n.p,{children:"This guide explains how to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Set an uninstallation password during installation"}),"\n",(0,t.jsx)(n.li,{children:"Update or repair an existing installation with a new password"}),"\n",(0,t.jsx)(n.li,{children:"Uninstall CSE when a password has been set"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If a password is provided, but it cannot be saved to the registry, the installation will be interrupted with an error"}),"\n",(0,t.jsx)(n.li,{children:"Password protection is optional. No password is required."}),"\n",(0,t.jsx)(n.li,{children:"If no password is provided, CSE upgrade will install normally without requiring an uninstall password"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"set-an-uninstallation-password-during-installation",children:"Set an Uninstallation Password During Installation"}),"\n",(0,t.jsxs)(n.p,{children:["An uninstallation password can be specified at the time of installation using the ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," command-line option."]}),"\n",(0,t.jsx)(n.p,{children:"Example Password"}),"\n",(0,t.jsxs)(n.p,{children:["If you use the password \u201cHelloWorld\u201d and Base64 encrypt it, you will get ",(0,t.jsx)(n.code,{children:"SGVsbG9Xb3JsZA=="})," as the result. You can use an encoder like ",(0,t.jsx)(n.a,{href:"https://www.base64encode.org/",children:"Base64 Encode"}),", shown below."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"base64format",src:s(821770).A+"",width:"936",height:"1021"})}),"\n",(0,t.jsx)(n.p,{children:"Example Use of the Feature"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:'msiexec /i "PolicyPak Client-Side Extension x64.msi" UNPASSWORD=SGVsbG9Xb3JsZA=='})}),"\n",(0,t.jsx)(n.li,{children:"The password must be provided as a Base64-encoded string"}),"\n",(0,t.jsx)(n.li,{children:"If a password is set, CSE cannot be uninstalled without providing the same password"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"See the interactive example shown in the screenshot."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"csewizard",src:s(610492).A+"",width:"1100",height:"773"})}),"\n",(0,t.jsx)(n.p,{children:"If you try to uninstall the CSE by hand without a password, the following error message is displayed."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"cseuninstallpw",src:s(221722).A+"",width:"1504",height:"806"})}),"\n",(0,t.jsx)(n.h2,{id:"uninstall-cse-when-a-password-is-set",children:"Uninstall CSE When a Password Is Set"}),"\n",(0,t.jsx)(n.p,{children:"If an uninstallation password was configured, it must be provided during the uninstall process."}),"\n",(0,t.jsx)(n.p,{children:"Example Command"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:'msiexec /x "PolicyPak Client-Side Extension x64.msi" UNPASSWORD=SGVsbG9Xb3JsZA=='})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"csepassword",src:s(995038).A+"",width:"1411",height:"597"})}),"\n",(0,t.jsx)(n.p,{children:"Uninstallation Rules"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"If the correct password is provided, CSE is uninstalled successfully"}),"\n",(0,t.jsx)(n.li,{children:"If the wrong password is provided, the uninstallation fails with an error, and CSE remains installed"}),"\n",(0,t.jsxs)(n.li,{children:["If no password was set originally, CSE can be uninstalled normally without requiring ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})]}),"\n",(0,t.jsxs)(n.li,{children:["If a password was set but ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," is not provided in the command, the uninstallation fails with an error"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"update-or-repair-an-existing-installation",children:"Update or Repair an Existing Installation"}),"\n",(0,t.jsxs)(n.p,{children:["The uninstallation password can be updated or repaired by using both ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," (current password) and ",(0,t.jsx)(n.code,{children:"NEWUNPASSWORD"})," (new password) in the installer command."]}),"\n",(0,t.jsx)(n.p,{children:"Example Command"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:'msiexec /i "PolicyPak Client-Side Extension x64.msi" UNPASSWORD=SGVsbG9Xb3JsZA== NEWUNPASSWORD=SGVsbG9Xb3JsZEFnYWlu'})}),"\n",(0,t.jsx)(n.p,{children:"Update Rules"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," matches the existing saved password, the password is updated to ",(0,t.jsx)(n.code,{children:"NEWUNPASSWORD"})]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.code,{children:"NEWUNPASSWORD"})," is missing or cannot be saved, the installation fails with an error"]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," and ",(0,t.jsx)(n.code,{children:"NEWUNPASSWORD"})," are the same, the update is considered successful with no changes made"]}),"\n",(0,t.jsxs)(n.li,{children:["If an incorrect ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," is provided, the installation fails with an error"]}),"\n",(0,t.jsxs)(n.li,{children:["If no ",(0,t.jsx)(n.code,{children:"UNPASSWORD"})," is provided, but a password was set during installation, the update fails with an error"]}),"\n",(0,t.jsxs)(n.li,{children:["If no password was previously set, and ",(0,t.jsx)(n.code,{children:"NEWUNPASSWORD"})," is provided, the new password is saved as the uninstallation password"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Storage and Security"}),"\n",(0,t.jsx)(n.p,{children:"The password is encrypted and stored in the Windows Registry at:"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.code,{children:"HKEY_LOCAL_MACHINE\\SOFTWARE\\PolicyPak\\Config\\CSE\\Installer"})}),"\n",(0,t.jsx)(n.p,{children:"Registry value details"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Type \u2014 REG_BINARY"}),"\n",(0,t.jsx)(n.li,{children:"Name \u2014 UninstallPassword"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The password is encrypted with the Windows Data Protection API (DAPI) and not in plain text."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"editbinary",src:s(135419).A+"",width:"1123",height:"752"})}),"\n",(0,t.jsx)(n.p,{children:"This registry key is protected and accessible only by Administrators and the Local System account. The password cannot be copied to another machine. If the registry value is transferred, CSE will not recognize it on a different system."}),"\n",(0,t.jsx)(n.h2,{id:"emergency-uninstallation-without-password",children:"Emergency Uninstallation without Password"}),"\n",(0,t.jsx)(n.p,{children:"As an emergency method of uninstallation, you may use the Endpoint Policy Manager ADMX Troubleshooting files which contains a policy named \u201cForce disable uninstall password\u201d."}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/docs/policypak/policypak/video/troubleshooting/admxfiles",children:"Troubleshooting with ADMX files"})," topic for additional information about the ADMX troubleshooting files."]}),"\n",(0,t.jsx)(n.p,{children:"When this ADMX setting is set locally or targeted to a machine, the CSE will uninstall without a password."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"disableuninstallpw",src:s(616489).A+"",width:"1302",height:"786"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"CAUTION:"})," Again as stated in the introduction of this document, someone with access rights to change the KHLM part of the registry or use the Endpoint Policy Manager ADMX files could circumvent the password previously set earlier."]}),"\n",(0,t.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"The ability to set, update, and enforce an uninstallation password provides additional layer for CSE deployments."}),"\n",(0,t.jsx)(n.li,{children:"Administrators should carefully manage passwords to ensure seamless management and prevent unauthorized removals."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:"Remember,"})," anyone with full admin rights (or ability to use the Endpoint Policy Manager ADMX settings) can circumvent the password set on the machine."]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},610492:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/csewizard-8d7ef3c615d8b42c5d39489f5bbed604.webp"},616489:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/disableuninstallpw-89338a6efe28161f09ea781498a36a0e.webp"},821770:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/base64format-369a93a9ba0d38a97babeb20d09595e3.webp"},995038:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/csepassword-f37515ba322a7f233586f738fbcb4d66.webp"}}]);