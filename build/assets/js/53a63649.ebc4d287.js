"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[241728],{28453:(e,i,n)=>{n.d(i,{R:()=>c,x:()=>o});var t=n(296540);const s={},r=t.createContext(s);function c(e){const i=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(r.Provider,{value:i},e.children)}},324173:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"config/netappcmode/overview","title":"NetApp Data ONTAP Cluster-Mode Target Requirements","description":"Netwrix Access Analyzer (formerly Enterprise Auditor) can execute Access Auditing (FSAA) and/or Sensitive Data Discovery Auditing scans on NetApp Data ONTAP Cluster-Mode devices. The Netwrix Activity Monitor can be configured to monitor activity on NetApp Data ONTAP Cluster-Mode devices and make the event data available for Access Analyzer Activity Auditing (FSAC) scans.","source":"@site/docs/accessanalyzer/config/netappcmode/overview.md","sourceDirName":"config/netappcmode","slug":"/config/netappcmode/overview","permalink":"/docs/accessanalyzer/config/netappcmode/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/accessanalyzer/config/netappcmode/overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"accessAnalyzerSidebar","previous":{"title":"Configure FPolicy","permalink":"/docs/accessanalyzer/config/netappcmode/configurefpolicy"},"next":{"title":"Provision ONTAP Account","permalink":"/docs/accessanalyzer/config/netappcmode/provisionactivity"}}');var s=n(474848),r=n(28453);const c={},o="NetApp Data ONTAP Cluster-Mode Target Requirements",l={},d=[{value:"Access &amp; Sensitive Data Auditing Permissions",id:"access--sensitive-data-auditing-permissions",level:2},{value:"Access &amp; Sensitive Data Auditing Port Requirements",id:"access--sensitive-data-auditing-port-requirements",level:2},{value:"Activity Auditing Permissions",id:"activity-auditing-permissions",level:2},{value:"Activity Auditing Port Requirements",id:"activity-auditing-port-requirements",level:2}];function a(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"netapp-data-ontap-cluster-mode-target-requirements",children:"NetApp Data ONTAP Cluster-Mode Target Requirements"})}),"\n",(0,s.jsx)(i.p,{children:"Netwrix Access Analyzer (formerly Enterprise Auditor) can execute Access Auditing (FSAA) and/or Sensitive Data Discovery Auditing scans on NetApp Data ONTAP Cluster-Mode devices. The Netwrix Activity Monitor can be configured to monitor activity on NetApp Data ONTAP Cluster-Mode devices and make the event data available for Access Analyzer Activity Auditing (FSAC) scans."}),"\n",(0,s.jsx)(i.h2,{id:"access--sensitive-data-auditing-permissions",children:"Access & Sensitive Data Auditing Permissions"}),"\n",(0,s.jsx)(i.p,{children:"The credentials used by the Access Analyzer scans must have the following permissions on the target host:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"For CIFS access:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Method 1 \u2013 Use FPolicy &\xa0ONTAP\xa0API"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Enumerate shares by executing specific NetApp API calls"}),"\n",(0,s.jsx)(i.li,{children:"Bypass NTFS security to read the entire folder structure to be scanned and collect file/folder permissions"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Method 2 \u2013 Use the c$\xa0Share"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Enumerate shares with standard Windows file sharing APIs."}),"\n",(0,s.jsx)(i.li,{children:"Bypass NTFS\xa0security to read the entire folder structure to be scanned and collect file/folder permissions"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"For NFSv3 access:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"IP\xa0Address of scanning server in the export policy for each volume"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["These permissions grant the credential the ability to enumerate shares, access the remote registry, and bypass NTFS security on folders. The credential used within the assigned Connection Profile for these target hosts requires these permissions. See the ",(0,s.jsx)(i.a,{href:"/docs/accessanalyzer/config/netappcmode/access",children:"NetApp Data ONTAP Cluster-Mode Access & Sensitive Data Auditing Configuration"})," topic for instructions."]}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"NOTE:"})," These permissions are in addition to those needed to either deploy applet scans for running scans in proxy mode with applet or installing the File System Proxy Service Permissions for running scans in proxy mode as a service. See the ",(0,s.jsx)(i.a,{href:"/docs/accessanalyzer/enterpriseauditor/requirements/solutions/filesystem/scanoptions",children:"File System Scan Options"})," topic for additional information."]}),"\n",(0,s.jsx)(i.h2,{id:"access--sensitive-data-auditing-port-requirements",children:"Access & Sensitive Data Auditing Port Requirements"}),"\n",(0,s.jsxs)(i.p,{children:["The firewall ports required by Access Analyzer for Access Auditing (FSAA) and/or Sensitive Data Discovery Auditing scans are based on the File System scan mode to be used. See the ",(0,s.jsx)(i.a,{href:"/docs/accessanalyzer/enterpriseauditor/requirements/solutions/filesystem/scanoptions",children:"File System Scan Options"})," topic for additional information."]}),"\n",(0,s.jsx)(i.h2,{id:"activity-auditing-permissions",children:"Activity Auditing Permissions"}),"\n",(0,s.jsx)(i.p,{children:"Windows Proxy Server for Activity Agent Monitoring of NetApp Data ONTAP Cluser-Mode Device"}),"\n",(0,s.jsx)(i.p,{children:"The Netwrix Activity Monitor must have an Activity Agent deployed on a Windows proxy server. While actively monitoring, the Activity Agent generates activity log files stored on the proxy server. The credential used to deploy the Activity Agent must have the following permissions on the proxy server:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Membership in the local Administrators group"}),"\n",(0,s.jsx)(i.li,{children:"READ and WRITE access to the archive location for Archiving feature only"}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"It is also necessary to enable the Remote Registry Service on the Activity Agent server."}),"\n",(0,s.jsx)(i.p,{children:"For integration between the Activity Monitor and Access Analyzer, the credential used by Access Analyzer to read the activity log files must have also have this permission."}),"\n",(0,s.jsx)(i.p,{children:"NetApp Data ONTAP Cluster-Mode Device Requirements"}),"\n",(0,s.jsx)(i.p,{children:"An FPolicy must be configured on the target device for Activity Auditing (FSAC) scans. A tailored FPolicy is recommended as it decreases the impact on the NetApp device. The credential associated with the FPolicy used to monitor activity must be provisioned with access to (at minimum) the following CLI commands, according to the level of collection desired:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Collect Activity Events (Least Privilege)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"version"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"volume"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver"})," \u2013 Readonly access"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Employ the \u201cEnable and connect FPolicy\u201d Option (Less Privilege)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"version"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"volume"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver fpolicy disable"})," \u2013 All access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver fpolicy enable"})," \u2013 All access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver fpolicy engine-connect"})," \u2013 All access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"network interface"})," \u2013 Readonly access"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Employ the \u201cConfigure FPolicy Option (Automatic Configuration of FPolicy)"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"version"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"volume"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver"})," \u2013 Readonly access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"vserver fpolicy"})," \u2013 All access"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"network interface"})," \u2013 Readonly access"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"If FPolicy uses a TLS connection, the following CLI command is also needed:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"security certificate install"})," \u2013 All access"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"StealthAUDIT Integration requires the addition of the following CLI command:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"security login role show-ontapi"})," \u2013 Readonly access"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["See the ",(0,s.jsx)(i.a,{href:"/docs/accessanalyzer/config/netappcmode/activity",children:"NetApp Data ONTAP Cluster-Mode Activity Auditing Configuration"})," topic for instructions."]}),"\n",(0,s.jsx)(i.p,{children:"Activity Monitor Archive Location"}),"\n",(0,s.jsx)(i.p,{children:"If the activity log files are being archived, configurable within the Netwrix Activity Monitor Console, then the credential used by Access Analyzer to read the activity log files must also have READ and WRITE permissions on the archive location."}),"\n",(0,s.jsx)(i.h2,{id:"activity-auditing-port-requirements",children:"Activity Auditing Port Requirements"}),"\n",(0,s.jsx)(i.p,{children:"Firewall settings depend on the type of environment being targeted. The following firewall settings are required for communication between the Agent server and the Netwrix Activity Monitor Console:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Communication Direction"}),(0,s.jsx)(i.th,{children:"Protocol"}),(0,s.jsx)(i.th,{children:"Ports"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsx)(i.tbody,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Activity Monitor to Agent Server"}),(0,s.jsx)(i.td,{children:"TCP"}),(0,s.jsx)(i.td,{children:"4498"}),(0,s.jsx)(i.td,{children:"Agent Communication"})]})})]}),"\n",(0,s.jsxs)(i.p,{children:["The Windows firewall rules need to be configured on the Windows server, which require certain inbound rules be created if the scans are running in applet mode. These scans operate over a default port range, which cannot be specified via an inbound rule. For more information, see the Microsoft ",(0,s.jsx)(i.a,{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/aa389290(v=vs.85).aspx",children:"Connecting to WMI on a Remote Computer"})," article."]}),"\n",(0,s.jsx)(i.p,{children:"Additional Firewall Rules for NetApp Data ONTAP Cluster-Mode Device"}),"\n",(0,s.jsx)(i.p,{children:"The following firewall settings are required for communication between the Activity Monitor Activity Agent server and the target NetApp Data ONTAP Cluster-Mode device:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Communication Direction"}),(0,s.jsx)(i.th,{children:"Protocol"}),(0,s.jsx)(i.th,{children:"Ports"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Activity Agent Server to NetApp*"}),(0,s.jsx)(i.td,{children:"HTTP (optional)"}),(0,s.jsx)(i.td,{children:"80"}),(0,s.jsx)(i.td,{children:"ONTAPI"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Activity Agent Server to NetApp*"}),(0,s.jsx)(i.td,{children:"HTTPS (optional)"}),(0,s.jsx)(i.td,{children:"443"}),(0,s.jsx)(i.td,{children:"ONTAPI"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"NetApp to Activity Agent Server"}),(0,s.jsx)(i.td,{children:"TCP"}),(0,s.jsx)(i.td,{children:"9999"}),(0,s.jsx)(i.td,{children:"FPolicy events"})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"*Only required if using the FPolicy Configuration and FPolicy Enable and Connect options in Activity Monitor."}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"NOTE:"})," If either HTTP or HTTPS are not enabled, the FPolicy on the NetApp Data ONTAP 7-Mode device must be configured manually. Also, the External Engine will not reconnect automatically in the case of a server reboot or service restart."]}),"\n",(0,s.jsx)(i.p,{children:"Additional Firewall Rules for Integration between Access Analyzer and Activity Monitor"}),"\n",(0,s.jsx)(i.p,{children:"Firewall settings are dependent upon the type of environment being targeted. The following firewall settings are required for communication between the agent server and the Access Analyzer Console:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Communication Direction"}),(0,s.jsx)(i.th,{children:"Protocol"}),(0,s.jsx)(i.th,{children:"Ports"}),(0,s.jsx)(i.th,{children:"Description"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Access Analyzer to Agent Server"}),(0,s.jsx)(i.td,{children:"TCP"}),(0,s.jsx)(i.td,{children:"445"}),(0,s.jsx)(i.td,{children:"SMB, used for Agent Deployment"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Access Analyzer to Agent Server"}),(0,s.jsx)(i.td,{children:"TCP"}),(0,s.jsx)(i.td,{children:"Predefined"}),(0,s.jsx)(i.td,{children:"WMI, used for Agent Deployment"})]})]})]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);