"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[968956],{28453:(e,t,r)=>{r.d(t,{R:()=>c,x:()=>o});var n=r(296540);const i={},s=n.createContext(i);function c(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(s.Provider,{value:t},e.children)}},605967:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>c,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"threatmanager/install/secure","title":"Secure the Threat Manager Console","description":"To support HTTPS, do the following:","source":"@site/docs/threatmanager/threatmanager/install/secure.md","sourceDirName":"threatmanager/install","slug":"/threatmanager/install/secure","permalink":"/docs/threatmanager/threatmanager/install/secure","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/threatmanager/threatmanager/install/secure.md","tags":[],"version":"current","frontMatter":{},"sidebar":"threatManagerSidebar","previous":{"title":"Installation","permalink":"/docs/threatmanager/threatmanager/install/overview"},"next":{"title":"Upgrade Procedure","permalink":"/docs/threatmanager/threatmanager/install/upgrade"}}');var i=r(474848),s=r(28453);const c={},o="Secure the Threat Manager Console",a={},h=[{value:"Locate and Import the SSL Server Certificate",id:"locate-and-import-the-ssl-server-certificate",level:2},{value:"Web Service Configuration File",id:"web-service-configuration-file",level:2},{value:"Active Directory Service Configuration File",id:"active-directory-service-configuration-file",level:2},{value:"Re-register the Action Service",id:"re-register-the-action-service",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"secure-the-threat-manager-console",children:"Secure the Threat Manager Console"})}),"\n",(0,i.jsx)(t.p,{children:"To support HTTPS, do the following:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Import an SSL certificate to the server"}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Configure the Netwrix Threat Manager Web Service and the Netwrix Threat Manager Active Directory Service with a certificate thumbprint and a new port value"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"locate-and-import-the-ssl-server-certificate",children:"Locate and Import the SSL Server Certificate"}),"\n",(0,i.jsx)(t.p,{children:"Complete the steps to create or obtain a certificate and import it."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 1 \u2013"})," \xa0Create or obtain an SSL Server certificate for the Netwrix Threat Manager server and import it into the Windows Certificate LocalMachine Personal store on the Netwrix Threat Manager server machine."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"CAUTION:"}),"  Be very careful with the encoding of the thumbprint especially when copy/pasting the thumbprint from certmgr.msc. This can often cause encoding issues so ensure ANSI encoding when editing the configuration files discussed in this topic."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 2 \u2013"})," \xa0\nCopy the thumbprint of the certificate as you will need to utilize it while editing the configuration files."]}),"\n",(0,i.jsx)(t.h2,{id:"web-service-configuration-file",children:"Web Service Configuration File"}),"\n",(0,i.jsx)(t.p,{children:"Follow the steps to configure the Web Service Configuration file."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 1 \u2013"})," \xa0\nOpen the Web Service configuration file on the Netwrix Threat Manager server."]}),"\n",(0,i.jsx)(t.p,{children:"C:\\Program Files\\STEALTHbits\\StealthDEFEND\\WebService\\appsettings.json"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 2 \u2013"})," \xa0\nAppend the ",(0,i.jsx)(t.strong,{children:"WebService"})," and ",(0,i.jsx)(t.strong,{children:"ADService"})," sections to the end of the file. Remember to add a trailing comma after the ",(0,i.jsx)(t.code,{children:"\u201cEncryptRecording\u201d:false"})," line."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'{  \n\xa0\xa0\xa0\xa0"Jwt":\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"CertificateFile":\xa0\xa0"C:\\\\ProgramData\\\\Stealthbits\\\\StealthDEFEND\\\\WebService\\\\jwtsign.pfx",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"CertificatePassword":\xa0\xa0"CertificatePassword",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"CertificateThumbprint":\xa0\xa0"",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Version":\xa0\xa02  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0"DataDirectory":\xa0\xa0null,  \n\xa0\xa0\xa0\xa0"EncryptRecording":\xa0\xa0false,  \n\xa0\xa0\xa0\xa0"WebService":\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Port":\xa0\xa08080,  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Certificate":\xa0\xa0"CertificateThumbprint",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"RestApiUri":\xa0\xa0"https://ThreatManagerServer.Domain.com:8080"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0"ADService":\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Host": "localhost",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Scheme": "https",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Port": "55556"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}\xa0  \n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"CAUTION:"})," Do not modify the Jwt section of the appsettings.json file."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 3 \u2013"})," \xa0\nIn the WebService and ADService sections, ports are set to 8080 and 55556 respectively. Make sure these ports are available on your machine."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 4 \u2013"})," \xa0\nSet the ",(0,i.jsx)(t.strong,{children:"Certificate"})," value to the value of the certification thumbprint you imported previously."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 5 \u2013"})," \xa0\nSet the ",(0,i.jsx)(t.strong,{children:"RestApiUri"})," value to the URL used to access the application (e.g., ",(0,i.jsx)(t.a,{href:"https://ThreatManagerServer.Domain.com:8080",children:"https://ThreatManagerServer.Domain.com:8080"}),")."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 6 \u2013"})," \xa0\nSave the configuration file."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 7 \u2013"})," \xa0\nRestart the Web Service."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 8 \u2013"})," \xa0\nCheck the Web Service Log File to ensure the Cert was found and loaded properly. You should see a log file with the output:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"Found cert with subject % and thumbprint 12345ABCDEF54AED1DB59C349CA4D514628DB4D3\n"})}),"\n",(0,i.jsx)(t.h2,{id:"active-directory-service-configuration-file",children:"Active Directory Service Configuration File"}),"\n",(0,i.jsx)(t.p,{children:"Follow the steps to configure the Active Directory Service Configuration file."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 1 \u2013"})," \xa0\nOpen the Active Directory Service configuration file on the Netwrix Threat Manager server:"]}),"\n",(0,i.jsx)(t.p,{children:"C:\\Program Files\\STEALTHbits\\StealthDEFEND\\ActiveDirectoryService\\appsettings.json"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 2 \u2013"})," \xa0\nAppend the ",(0,i.jsx)(t.strong,{children:"WebService"})," section to the end of the file. Remember to add a trailing comma after the ",(0,i.jsx)(t.code,{children:"\u201cEncryptRecording\u201d:false"})," line in the file."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'{  \n\xa0\xa0\xa0\xa0"Jwt":\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"CertificateFile":\xa0\xa0"C:\\\\ProgramData\\\\Stealthbits\\\\StealthDEFEND\\\\WebService\\\\jwtsign.pfx",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"CertificatePassword":\xa0\xa0"CertificatePassword",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"CertificateThumbprint":\xa0\xa0"",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Version":\xa0\xa02  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0"DataDirectory":\xa0\xa0null,  \n\xa0\xa0\xa0\xa0"EncryptRecording":\xa0\xa0false,  \n\xa0\xa0\xa0\xa0"WebService":\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Port":\xa0\xa055556,  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Certificate":\xa0\xa0"CertificateThumbprint"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}  \n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"CAUTION:"})," Do not modify the Jwt section of the appsettings.json file."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 3 \u2013"})," \xa0\nIn the WebService section, the port is set to 55556. Make sure it is available on your machine."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 4 \u2013"})," \xa0\nSet the certificate value to that of the certification thumbprint you imported previously."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 5 \u2013"})," \xa0\nSave the configuration file."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 6 \u2013"})," \xa0\nRestart the Active Directory Service."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 7 \u2013"})," \xa0\nCheck the Active Directory Service Log File to ensure the Cert was found and loaded properly. You should see a log file with the output:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"Found cert with subject % and thumbprint 12345ABCDEF54AED1DB59C349CA4D514628DB4D3\n"})}),"\n",(0,i.jsx)(t.h2,{id:"re-register-the-action-service",children:"Re-register the Action Service"}),"\n",(0,i.jsx)(t.p,{children:"While not always necessary it is a good practice to also re-register the Action Service whenever changing the certificate in use."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 1 \u2013"})," Open an administrative command prompt."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 2 \u2013"})," Run the following command to launch a wizard that prompts for parameters required to configure the Action Service:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"<StealthDEFENDDirectory>\\ActionService\\ActionService.exe --config\n"})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 3 \u2013"})," Enter the following information in the wizard:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["URL or Server \u2013 The web address for the Threat Manager\xa0console (e.g., ",(0,i.jsx)(t.a,{href:"https://ThreatManagerServer.Domain.com:8080",children:"https://ThreatManagerServer.Domain.com:8080"}),")."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"NOTE:"})," Include http:// or https:// if configured and web port if not using 80 or 443"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"User Name \u2013 Specify the user name to connect to the Threat Manager console. It is recommended to use the Admin account for the user name."}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Threat Manager Password \u2013 The password to the user name specified"}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"Ignore certificate errors \u2013 It is recommended to set to True if using a self-signed certificate for SSL or if other issues with the web certificate are experienced."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 4 \u2013"}),' The utility will output "Success!" if the Action Service registered correctly. Verify that the Action Service successfully registered by navigating to the System Health page of the Threat Manager console.']}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Step 5 \u2013"})," Exit the command prompt."]}),"\n",(0,i.jsx)(t.p,{children:"The Action Service is now re-registered with Threat Manager."})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);