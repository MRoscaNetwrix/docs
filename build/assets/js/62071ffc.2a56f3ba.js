"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[806796],{28453:(e,r,s)=>{s.d(r,{R:()=>i,x:()=>c});var n=s(296540);const t={},d=n.createContext(t);function i(e){const r=n.useContext(d);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(d.Provider,{value:r},e.children)}},187813:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"auditor/configuration/fileservers/netappcmode/webaccess","title":"Configure ONTAPI\\\\RESTAPI Web Access","description":"Netwrix Auditor uses ONTAPI to obtain the current CIFS audit configuration and force the audit data flush from the internal filer format to an MS Event Viewer compatible format. Netwrix Auditor supports both the SSL and non-SSL HTTP access, trying HTTPS first, and falling back to HTTP if it is unavailable.","source":"@site/docs/auditor/auditor/configuration/fileservers/netappcmode/webaccess.md","sourceDirName":"auditor/configuration/fileservers/netappcmode","slug":"/auditor/configuration/fileservers/netappcmode/webaccess","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/webaccess","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/configuration/fileservers/netappcmode/webaccess.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Configure Service Policy","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/servicepolicy"},"next":{"title":"Create a Notification Policy","permalink":"/docs/auditor/auditor/configuration/fileservers/nutanix/notificationpolicy"}}');var t=s(474848),d=s(28453);const i={},c="Configure ONTAPIRESTAPI Web Access",o={},l=[];function a(e){const r={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"configure-ontapirestapi-web-access",children:"Configure ONTAPI\\RESTAPI Web Access"})}),"\n",(0,t.jsx)(r.p,{children:"Netwrix Auditor uses ONTAPI to obtain the current CIFS audit configuration and force the audit data flush from the internal filer format to an MS Event Viewer compatible format. Netwrix Auditor supports both the SSL and non-SSL HTTP access, trying HTTPS first, and falling back to HTTP if it is unavailable."}),"\n",(0,t.jsx)(r.p,{children:"Follow the steps to configure ONTAPI\\RESTAPI Web Access."}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 1 \u2013"})," Navigate to your cluster management command prompt through the SSH/Telnet connection."]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 2 \u2013"})," Log in as a cluster administrator and review your current web access settings. Make sure that External Web Services are allowed. For example:"]}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{}),(0,t.jsx)(r.th,{})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsxs)(r.td,{children:[(0,t.jsx)(r.code,{children:"cluster1::>\xa0\xa0system\xa0\xa0services\xa0\xa0web show"}),"  where ",(0,t.jsx)(r.code,{children:"'cluster1"}),"' is the name of your NetApp ONTAP cluster."]}),(0,t.jsx)(r.td,{})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"External Web Services:"}),(0,t.jsx)(r.td,{children:"true"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"Status:"}),(0,t.jsx)(r.td,{children:"online"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"HTTP Protocol Port:"}),(0,t.jsx)(r.td,{children:"80"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"HTTPs Protocol Port:"}),(0,t.jsx)(r.td,{children:"443"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"TLSv1 Enabled:"}),(0,t.jsx)(r.td,{children:"true"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"SSLv3 Enabled:"}),(0,t.jsx)(r.td,{children:"true"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"SSLv2 Enabled:"}),(0,t.jsx)(r.td,{children:"false"})]})]})]}),"\n",(0,t.jsxs)(r.p,{children:["If the result of the",(0,t.jsx)(r.code,{children:" External Web Services"})," command is '",(0,t.jsx)(r.code,{children:"false"}),"', execute the following:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> system services web modify -external true\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 3 \u2013"})," Enable ONTAPI access on the 'Storage VM' (SVM) where CIFS server is installed. Run the following command where svm1 is the name of your SVM:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web modify -vserver svm1 -name ontapi -enabled true  \ncluster1::> vserver services web show -vserver svm1.\n"})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Vserver"}),(0,t.jsx)(r.th,{children:"Type"}),(0,t.jsx)(r.th,{children:"Service Name"}),(0,t.jsx)(r.th,{children:"Description"}),(0,t.jsx)(r.th,{children:"Enabled"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"svm1"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"data "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ontapi "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Remote Administrative API"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"true"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{children:"Support"}),(0,t.jsx)(r.td,{})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"svm1"}),(0,t.jsx)(r.td,{children:"data"}),(0,t.jsx)(r.td,{children:"rest"}),(0,t.jsx)(r.td,{children:"Remote Administrative API"}),(0,t.jsx)(r.td,{children:"true"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Support"})}),(0,t.jsx)(r.td,{})]})]})]}),"\n",(0,t.jsx)(r.p,{children:"To display the current settings of web services for SVM svm1, use the following command:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web show -vserver svm1\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 4 \u2013"})," Review the ",(0,t.jsx)(r.a,{href:"/docs/auditor/auditor/configuration/fileservers/netappcmode/permissions",children:"Permissions for NetApp Auditing"})," topic for additional information on how to create the role and enable AD user access."]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 5 \u2013"})," Enable HTTP/HTTPS access. For example:"]}),"\n",(0,t.jsx)(r.p,{children:"ONTAPI"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web modify -vserver svm1 -name ontapi -enabled true\n"})}),"\n",(0,t.jsx)(r.p,{children:"RESTAPI"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web modify -vserver svm1 -name rest -enabled true\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 6 \u2013"})," Enable only SSL access (HTTPS in Netwrix Auditor). For example:"]}),"\n",(0,t.jsx)(r.p,{children:"ONTAPI"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web modify -vserver svm1 -name ontapi -enabled true -ssl-only true\n"})}),"\n",(0,t.jsx)(r.p,{children:"RESTAPI"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web modify -vserver svm1 -name rest -enabled true -ssl-only true\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 7 \u2013"})," Make sure that the custom role (e.g., netwrix_role for ONTAPI or netwrix_rest_role for RESTAPI) assigned to your account specified for data collection can access ONTAPI or RESTAPI. See ",(0,t.jsx)(r.a,{href:"/docs/auditor/auditor/configuration/fileservers/netappcmode/permissions",children:"Permissions for NetApp Auditing"})," topic for\xa0additional information."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"cluster1::> vserver services web access show -name ontapi -vserver svm1  \ncluster1::> vserver services web access show -name rest -vserver svm1\n"})}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{}),(0,t.jsx)(r.th,{}),(0,t.jsx)(r.th,{}),(0,t.jsx)(r.th,{})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Vserver"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Type"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Service Name"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"Role"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"--------------"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"-------"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"------------"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"---------------"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"svm1"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"data "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ontapi "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"netwrix_role"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"svm1"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"data "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ontapi "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"vsadmin"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"svm1"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"data "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ontapi "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"vsadmin-protocol"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"svm1"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"data "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ontapi "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"vsadmin-readonly"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"svm1"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"data "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"ontapi "})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"vsadmin-volume"})})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"5 entries were displayed."})}),(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{}),(0,t.jsx)(r.td,{})]})]})]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);