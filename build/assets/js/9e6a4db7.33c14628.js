"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[746951],{28453:(e,t,s)=>{s.d(t,{R:()=>c,x:()=>o});var i=s(296540);const a={},n=i.createContext(a);function c(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(n.Provider,{value:t},e.children)}},41940:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"enterpriseauditor/solutions/databases/sql/collection/sql_activityscan","title":"3-SQL\\\\_ActivityScan Job","description":"The 3-SQL\\\\_ActivityScan Job captures user activity from targeted SQL server instances and databases.","source":"@site/docs/accessanalyzer/enterpriseauditor/solutions/databases/sql/collection/3-sql_activityscan.md","sourceDirName":"enterpriseauditor/solutions/databases/sql/collection","slug":"/enterpriseauditor/solutions/databases/sql/collection/sql_activityscan","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/databases/sql/collection/sql_activityscan","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/accessanalyzer/enterpriseauditor/solutions/databases/sql/collection/3-sql_activityscan.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"accessAnalyzerSidebar","previous":{"title":"2-SQL\\\\_SensitiveDataScan Job","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/databases/sql/collection/sql_sensitivedatascan"},"next":{"title":"4-SQL\\\\_ServerLogons Job","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/databases/sql/collection/sql_serverlogons"}}');var a=s(474848),n=s(28453);const c={},o="3-SQL_ActivityScan Job",r={},l=[{value:"Queries for the 3-SQL_ActivityScan Job",id:"queries-for-the-3-sql_activityscan-job",level:2},{value:"Configure the ActivityScan Query",id:"configure-the-activityscan-query",level:3},{value:"Analysis Tasks for the 3-SQL_ActivityScan Job",id:"analysis-tasks-for-the-3-sql_activityscan-job",level:2}];function d(e){const t={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"3-sql_activityscan-job",children:"3-SQL_ActivityScan Job"})}),"\n",(0,a.jsx)(t.p,{children:"The 3-SQL_ActivityScan Job captures user activity from targeted SQL server instances and databases."}),"\n",(0,a.jsx)(t.p,{children:"Special Dependency"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["SQL Server Audit Specifications to be configured on the target databases","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Audit destination must be a binary file"}),"\n",(0,a.jsxs)(t.li,{children:["See the Microsoft ",(0,a.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/sql/relational-databases/security/auditing/create-a-server-audit-and-database-audit-specification",children:"Create a Server Audit and Database Audit Specification"})," article for additional information."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"queries-for-the-3-sql_activityscan-job",children:"Queries for the 3-SQL_ActivityScan Job"}),"\n",(0,a.jsx)(t.p,{children:"The ActivityScan Job uses the SQL Data Collector for the following query:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Query Selection",src:s(643343).A+"",width:"787",height:"239"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["ActivityScan \u2013 Collects activity from targeted instances","\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsxs)(t.li,{children:["(Optional) This query can be modified to target specific databases/instances. See the ",(0,a.jsx)(t.a,{href:"#configure-the-activityscan-query",children:"Configure the ActivityScan Query"})," topic for additional information."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"configure-the-activityscan-query",children:"Configure the ActivityScan Query"}),"\n",(0,a.jsx)(t.p,{children:"The 3-SQL_ActivityScan Job is preconfigured to run using the default settings within the Server Audits Events Collection category. Follow the steps to customize configurations."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Step 1 \u2013"})," Navigate to the ",(0,a.jsx)(t.strong,{children:"Databases"})," > 0.Collection >\xa0SQL > 3-SQL_ActivityScan > Configure node and select Queries."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Step 2 \u2013"})," In the Query Selection view, click on Query Properties. The Query Properties window appears."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Step 3 \u2013"})," Select the Data Source tab, and click Configure. The SQL Data Collector Wizard opens."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"CAUTION:"})," Do not make changes to other wizard pages as they have been pre-configured for the purpose of this job."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Options Page",src:s(880508).A+"",width:"777",height:"687"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Step 4 \u2013"})," To modify scan options, navigate to the ",(0,a.jsx)(t.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/sql/overview",children:"SQL Data Collector"})," page. Select the desired scan options. The query is preconfigured with the following default settings:"]}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Collect only events since last scan \u2013 Collects activity recorded since the previous scan"}),"\n",(0,a.jsx)(t.li,{children:"Number of days you want to keep events in the database \u2013 The default setting is 15 days"}),"\n",(0,a.jsx)(t.li,{children:"Collect audits by name \u2013 Finds available audits in the database"}),"\n",(0,a.jsx)(t.li,{children:"Collect audits by path \u2013 Collects audits by a specified path"}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Filter Page",src:s(122698).A+"",width:"776",height:"684"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Step 5 \u2013"})," To scope the query for specific database/instance, navigate to the ",(0,a.jsx)(t.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/sql/overview",children:"SQL Data Collector"})," page. The query is configured by default to target Only select database objects. Click Retrieve. The Available database objects will be populated. Databases and instances can be added in the following ways:"]}),"\n",(0,a.jsx)(t.p,{children:"Select the desired database objects and click Add."}),"\n",(0,a.jsx)(t.p,{children:"Use the Import CSV button to import a list from a CSV file."}),"\n",(0,a.jsx)(t.p,{children:"Optionally use the Add Custom Filter button to create and apply a custom filter."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Step 6 \u2013"})," Navigate to the Summary page, click Finish to save any setting modifications or click Cancel if no changes were made. Then click OK to close the Query Properties window."]}),"\n",(0,a.jsx)(t.p,{children:"The 3-SQL_ActivityScan Job is now ready to run with the customized settings."}),"\n",(0,a.jsx)(t.h2,{id:"analysis-tasks-for-the-3-sql_activityscan-job",children:"Analysis Tasks for the 3-SQL_ActivityScan Job"}),"\n",(0,a.jsxs)(t.p,{children:["Navigate to the ",(0,a.jsx)(t.strong,{children:"Databases"})," > 0.Collection > SQL > 3-SQL_ActivityScan > Configure node and select Analysis to view the analysis tasks."]}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"CAUTION:"})," Do not modify or deselect the selected analysis task(s). The analysis task(s) are preconfigured for this job."]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{alt:"Analysis Selection",src:s(750350).A+"",width:"611",height:"223"})}),"\n",(0,a.jsx)(t.p,{children:"The default analysis tasks are:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"AIC Import \u2013 Activity\u2013 Creates the SA_AIC_ActivityEventsImport table accessible under the job\u2019s Results node."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},122698:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/3sqlactivityscanfilterpage-c71d5763505f9c29e80dec897d05b2d7.webp"},643343:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/sqljobgroup14-f7c15295dd5a957cb860c695bc0d6a87.webp"},750350:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/sqljobgroup17-335557e02b4e44553a6be1e0690f59e7.webp"},880508:(e,t,s)=>{s.d(t,{A:()=>i});const i=s.p+"assets/images/3sqlactivityscanoptionspage-9e04cba62c8ba164a1f468192abf8d6c.webp"}}]);