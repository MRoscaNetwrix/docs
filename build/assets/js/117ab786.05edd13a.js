"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[542490],{10478:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"configuration/sqlserver/permissions","title":"Permissions for SQL Server Auditing","description":"Before you create a monitoring plan to audit your SQL Server, make sure the account to be used for data collection meets the requirements listed below. You have to provide this account in the Monitoring Plan wizard.","source":"@site/docs/1secure/configuration/sqlserver/permissions.md","sourceDirName":"configuration/sqlserver","slug":"/configuration/sqlserver/permissions","permalink":"/docs/1secure/configuration/sqlserver/permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/1secure/configuration/sqlserver/permissions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"oneSecureSidebar","previous":{"title":"SQL Server","permalink":"/docs/1secure/configuration/sqlserver/overview"},"next":{"title":"SQL Server Ports","permalink":"/docs/1secure/configuration/sqlserver/ports"}}');var t=r(474848),i=r(28453);const o={},a="Permissions for SQL Server Auditing",c={},d=[{value:"Assign &#39;System Administrator&#39; Role",id:"assign-system-administrator-role",level:2}];function l(e){const n={a:"a",br:"br",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"permissions-for-sql-server-auditing",children:"Permissions for SQL Server Auditing"})}),"\n",(0,t.jsx)(n.p,{children:"Before you create a monitoring plan to audit your SQL Server, make sure the account to be used for data collection meets the requirements listed below. You have to provide this account in the Monitoring Plan wizard."}),"\n",(0,t.jsx)(n.p,{children:"You can also use a Group Managed Service Account (gMSA) for collecting data."}),"\n",(0,t.jsx)(n.p,{children:"To grant permissions to the account for SQL Server audit, do the following on the target SQL Server."}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["To access SQL Server, Windows authentication will be used, so the data collection account should be a Windows account specified in the ",(0,t.jsx)(n.em,{children:"domain\\user"})," format (",(0,t.jsx)(n.em,{children:"domain\\user$"})," for Managed Service Account).",(0,t.jsx)(n.br,{}),"\n","SQL Server logins and authentication method are not supported."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["The account must be assigned the ",(0,t.jsx)(n.em,{children:"System Administrator"})," server role for this SQL Server. See the ",(0,t.jsx)(n.a,{href:"#assign-system-administrator-role",children:"Assign 'System Administrator' Role"})," topic for additional information."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["For auditing SQL Server availability on groups, the account must have the ",(0,t.jsx)(n.em,{children:"sysadmin"})," server role granted on each server added to an availability group."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"To collect state-in-time data from SQL Server, the account must also meet the following additional requirements:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Local Administrator rights on the target SQL Server."}),"\n",(0,t.jsx)(n.li,{children:"If SQL Server is included in the Active Directory domain, the account should also be included in that domain."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"assign-system-administrator-role",children:"Assign 'System Administrator' Role"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 1 \u2013"})," On the computer where the audited SQL Server instance is installed, navigate to Start > All Programs > Microsoft SQL Server > SQL Server Management Studio."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 2 \u2013"})," Connect to the SQL Server instance."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 3 \u2013"})," In the left pane, expand the Security node. Right-click the Logins node and select ",(0,t.jsx)(n.strong,{children:"New Login"})," from the pop-up menu. The Login - New window is displayed."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Login - New window",src:r(52213).A+"",width:"687",height:"622"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 4 \u2013"})," Click ",(0,t.jsx)(n.strong,{children:"Search"})," next to the Login Name box and specify the user you want to assign the sysadmin role."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Step 5 \u2013"})," Click the ",(0,t.jsx)(n.strong,{children:"Server Roles"})," tab and assign the sysadmin role to the new login."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var s=r(296540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},52213:(e,n,r)=>{r.d(n,{A:()=>s});const s=r.p+"assets/images/manualconfig_ssms_newlogin2016-c8c7c046259f96a2c6211531c37222d3.webp"}}]);