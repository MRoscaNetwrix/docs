"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[393151],{8730:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/adcredentials-d1b9feb6c8ba4035e7db52d0b6ac3ee1.webp"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var r=n(296540);const s={},i=r.createContext(s);function o(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:t},e.children)}},105261:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/microsoftgraphapi-2ca3f91aaeed9486e86517ee4c791819.webp"},573509:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/azurefileeula-68054c8e5e914742a2e1d260ab6989aa.webp"},600464:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/azurefileinstfolder-d61aa8d96e38f9ddc80ee5686b8418de.webp"},637257:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/azurefileconnectionstring-2b65edc0788971482da510a7200c01d0.webp"},736044:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/generalsettings-6c0c1b68322e49f86de408979998e0f0.webp"},862987:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"auditor/addon/azurefiles/deployment","title":"Deployment Procedure","description":"Follow the steps to install Azure Files add-on.","source":"@site/docs/auditor/auditor/addon/azurefiles/deployment.md","sourceDirName":"auditor/addon/azurefiles","slug":"/auditor/addon/azurefiles/deployment","permalink":"/docs/auditor/auditor/addon/azurefiles/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/addon/azurefiles/deployment.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Work with Collected Data","permalink":"/docs/auditor/auditor/addon/azurefiles/collecteddata"},"next":{"title":"Azure Files","permalink":"/docs/auditor/auditor/addon/azurefiles/overview"}}');var s=n(474848),i=n(28453);const o={},d="Deployment Procedure",a={},l=[{value:"Configure Azure Files for Monitoring",id:"configure-azure-files-for-monitoring",level:2},{value:"Configure the add-on",id:"configure-the-add-on",level:2}];function c(e){const t={a:"a",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"deployment-procedure",children:"Deployment Procedure"})}),"\n",(0,s.jsx)(t.p,{children:"Follow the steps to install Azure Files add-on."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 1 \u2013"})," Accept EULA."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"azurefileeula",src:n(573509).A+"",width:"487",height:"328"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 2 \u2013"})," Select the installation folder and click ",(0,s.jsx)(t.strong,{children:"Next"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"azurefileinstfolder",src:n(600464).A+"",width:"490",height:"329"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 3 \u2013"})," Click ",(0,s.jsx)(t.strong,{children:"Install"}),". The wizard will start and ask the additional parameters."]}),"\n",(0,s.jsx)(t.h2,{id:"configure-azure-files-for-monitoring",children:"Configure Azure Files for Monitoring"}),"\n",(0,s.jsx)(t.p,{children:"Follow the steps to configure Azure files for monitoring."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 1 \u2013"})," Make sure you have a storage account to store logs. To reduce the volume of the stored logs and the corresponding cost, it is recommended to create a rule in Life Cycle Management for this storage. Netwrix Auditor doesn't need historic logs, after the add-on has written them into the database. Refer to the ",(0,s.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-overview?tabs=azure-portal",children:"corresponding Microsoft article"})," for additional information."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 2 \u2013"})," Enable audit in the Azure Files settings. Go to the Diagnostic settings, and make sure that the following options are selected:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:['"Audit" under the ',(0,s.jsx)(t.strong,{children:"Logs"})]}),"\n",(0,s.jsxs)(t.li,{children:['"Archive to a storage account" under the ',(0,s.jsx)(t.strong,{children:"Destination details"})]}),"\n",(0,s.jsx)(t.li,{children:"Correct Storage account in the drop-down menu"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 3 \u2013"})," Go to the storage account that has been created before and copy Connection String. This parameter will be used in the add-on configuration."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 4 \u2013"})," If Microsoft Entra Kerberos or Active Directory Domain Services is used as an Identity source, Graph API will be used to resolve the user names. It is necessary to register an Azure App and grant it the following permissions:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Type - Application"}),"\n",(0,s.jsx)(t.li,{children:"Microsoft.Graph - User.Read.All"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"After that, save the Tenant ID, Application ID, and secret."}),"\n",(0,s.jsx)(t.h2,{id:"configure-the-add-on",children:"Configure the add-on"}),"\n",(0,s.jsx)(t.p,{children:"Follow the steps to configure the add-on."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 1 \u2013"})," After the installation, the add-on configuration wizard will start. If it didn't start automatically - open it from the installation folder."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 2 \u2013"})," Select ",(0,s.jsx)(t.strong,{children:"Proceed"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 3 \u2013"})," Provide Auditor Server IP address and port number followed by endpoint for posting Activity Records. See the ",(0,s.jsx)(t.a,{href:"/docs/auditor/auditor/api/endpoints",children:"API Endpoints"})," topic for more information."]}),"\n",(0,s.jsx)(t.p,{children:"This assumes that the add-on runs on the computer hosting Auditor Server and uses default port 9699."}),"\n",(0,s.jsxs)(t.p,{children:["If you want to run the add-on on another machine, you need to provide a name of the computer where Auditor Server resides (e.g., ",(0,s.jsx)(t.em,{children:"172.28.6.15"}),", EnterpriseNAServer, WKS.enterprise.local). To specify a non-default port, provide a server name followed by the port number (e.g., WKS.ent erprise.local:9999)."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"CAUTION:"})," Do not modify the endpoint part (",(0,s.jsx)(t.em,{children:"/netwrix/api"}),")."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"generalsettings",src:n(736044).A+"",width:"979",height:"871"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 4 \u2013"})," Specify Active Directory credentials:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Username \u2013 Provide the name of the account under which the service runs. Unless specified, the service runs under the account currently logged on."}),"\n",(0,s.jsx)(t.li,{children:"Password \u2013 Provide the password for the selected account."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"adcredentials",src:n(8730).A+"",width:"1156",height:"730"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 5 \u2013"})," Paste Azure Connection String in the corresponded field and click ",(0,s.jsx)(t.strong,{children:"Next"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"azurefileconnectionstring",src:n(637257).A+"",width:"860",height:"822"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 6 \u2013"})," Enter Tenant ID, App ID and App Secret of the Azure App you registered for the add-on. Click ",(0,s.jsx)(t.strong,{children:"Next"}),"."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"microsoftgraphapi",src:n(105261).A+"",width:"880",height:"803"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 7 \u2013"})," Click ",(0,s.jsx)(t.strong,{children:"Run"})," and close the window. The service should start the data collection now."]})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);