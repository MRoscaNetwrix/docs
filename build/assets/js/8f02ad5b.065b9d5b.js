"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[942049],{28453:(e,i,r)=>{r.d(i,{R:()=>t,x:()=>o});var n=r(296540);const s={},c=n.createContext(s);function t(e){const i=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),n.createElement(c.Provider,{value:i},e.children)}},266296:(e,i,r)=>{r.r(i),r.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>t,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"auditor/configuration/fileservers/netappcmode/servicepolicy","title":"Configure Service Policy","description":"NOTE: This paragraph only applies to NetApp ONTAP version 9.10.1 and higher.","source":"@site/docs/auditor/auditor/configuration/fileservers/netappcmode/servicepolicy.md","sourceDirName":"auditor/configuration/fileservers/netappcmode","slug":"/auditor/configuration/fileservers/netappcmode/servicepolicy","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/servicepolicy","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/configuration/fileservers/netappcmode/servicepolicy.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Configure System Service Firewall Policies","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/ports"},"next":{"title":"Configure ONTAPI\\\\RESTAPI Web Access","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/webaccess"}}');var s=r(474848),c=r(28453);const t={},o="Configure Service Policy",l={},a=[];function d(e){const i={code:"code",em:"em",h1:"h1",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",...(0,c.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"configure-service-policy",children:"Configure Service Policy"})}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"NOTE:"})," This paragraph only applies to NetApp ONTAP version 9.10.1 and higher."]}),"\n",(0,s.jsx)(i.p,{children:"By default, the 'default-data-files' policy is applied to the SVM CIFS/SMB interface and HTTP/HTTPS options are not available. To make the ONTAPI available through HTTP/HTTPS ports on your SVM interface for Netwrix Auditor Server, configure the 'interface service'-policy. Below is an example of the configuration:"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Navigate to your cluster command prompt through the SSH/Telnet connection."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Log in as a cluster administrator and review your current service-policy configuration. Run the following command:"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::> network interface show -vserver svm1 -fields service-policy"}),"\n",(0,s.jsx)(i.p,{children:"Example output:"}),"\n",(0,s.jsx)(i.p,{children:"vserver lif service-policy"}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.p,{children:"svm1 lif_svm1_126 default-data-files"}),"\n",(0,s.jsx)(i.p,{children:"svm1 lif_svm1_349 default-data-files"}),"\n",(0,s.jsxs)(i.p,{children:["Where ",(0,s.jsx)(i.code,{children:"svm1 "}),"\u2013 is the name of your SVM,"]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"lif_svm1_126 and lif_svm1_349"})," parameter is the ",(0,s.jsx)(i.code,{children:"svm1"})," logical interface."]}),"\n",(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.code,{children:"default-data-files"})," parameter is the service-policy applied to lif-s."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["To display the services available through the '",(0,s.jsx)(i.code,{children:"default-data-files"}),"' policy, run the following command:"]}),"\n",(0,s.jsx)(i.p,{children:"cluster1::> network interface service-policy show -vserver svm1 -policy default-data-files"}),"\n",(0,s.jsx)(i.p,{children:"Example output:"}),"\n",(0,s.jsx)(i.p,{children:"Vserver: svm1"}),"\n",(0,s.jsx)(i.p,{children:"Policy Name: default-data-files"}),"\n",(0,s.jsx)(i.p,{children:"Included Services: data-core, data-cifs, data-fpolicy-client, data-dns-server"}),"\n",(0,s.jsx)(i.p,{children:"Service: Allowed Addresses: data-core: 0.0.0.0/0"}),"\n",(0,s.jsx)(i.p,{children:"data-cifs: 0.0.0.0/0"}),"\n",(0,s.jsx)(i.p,{children:"data-fpolicy-client: 0.0.0.0/0"}),"\n",(0,s.jsx)(i.p,{children:"data-dns-server: 0.0.0.0/0"}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Set the advanced privilege level to be able to create and modify the service-policy. Run the following command:"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::> set -privilege advanced"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.em,{children:"Remember,"})," The command prompt should be changed to \u201c",(0,s.jsx)(i.code,{children:"cluster1::*>"}),"\u201d"]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Clone the existing '",(0,s.jsx)(i.code,{children:"default-data-files"}),"' LIF policy to be able using shares with a new service-policy. Run the following command:"]}),"\n",(0,s.jsx)(i.p,{children:"cluster1::*> network interface service-policy clone -vserver svm1 -policy default-data-files -target-policy netwrix-policy -target-vserver svm1"}),"\n",(0,s.jsxs)(i.p,{children:["Where the '",(0,s.jsx)(i.code,{children:"netwrix-policy"}),"' parameter is the name of new service-policy."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Modify the new service-policy by adding services to access over http\\https protocols. Run the following command:"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::*> network interface service-policy add-service -vserver svm1 -policy netwrix-policy -service management-http"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::*> network interface service-policy add-service -vserver svm1 -policy netwrix-policy -service management-https"}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Return to the administrator privilege level. Run the following command:"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::*> set -privilege admin"}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Apply a new service-policy to the SVM LIFs. Run the following command:"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::> network interface modify -vserver svm1 -lif lif_svm1_126 -service-policy netwrix-policy"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::> network interface modify -vserver svm1 -lif lif_svm1_349 -service-policy netwrix-policy"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.strong,{children:"NOTE:"})," For better security, specify the allowed ip-addresses when adding the service. Double-check that your subnet is configured on the machine where Netwrix Auditor Server resides. Allowed-addresses are: 192.168.1.0/24."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Check the current interface service-policy using command from the step 2:"}),"\n",(0,s.jsx)(i.p,{children:"cluster1::> network interface show -vserver svm1 -fields service-policy"}),"\n",(0,s.jsx)(i.p,{children:"Example output:"}),"\n",(0,s.jsx)(i.p,{children:"vserver lif service-policy"}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.p,{children:"svm1 lif_svm1_126 netwrix-policy"}),"\n",(0,s.jsx)(i.p,{children:"svm1 lif_svm1_349 netwrix-policy"}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,c.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);