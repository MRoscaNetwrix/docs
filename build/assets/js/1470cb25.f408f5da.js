"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[98245],{28453:(e,i,t)=>{t.d(i,{R:()=>s,x:()=>a});var n=t(296540);const r={},o=n.createContext(r);function s(e){const i=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(o.Provider,{value:i},e.children)}},837450:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"auditor/configuration/activedirectory/overview","title":"Active Directory","description":"Netwrix Auditor relies on native logs for collecting audit data. Therefore, successful change and access auditing requires a certain configuration of native audit settings in the audited environment and on the Auditor console computer. Configuring your IT infrastructure may also include enabling certain built-in Windows services, etc. Proper audit configuration is required to ensure audit data integrity, otherwise your change reports may contain warnings, errors or incomplete audit data.","source":"@site/docs/auditor/auditor/configuration/activedirectory/overview.md","sourceDirName":"auditor/configuration/activedirectory","slug":"/auditor/configuration/activedirectory/overview","permalink":"/docs/auditor/auditor/configuration/activedirectory/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/configuration/activedirectory/overview.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Configure Object-Level Auditing","permalink":"/docs/auditor/auditor/configuration/activedirectory/objectlevel"},"next":{"title":"Permissions for Active Directory Auditing","permalink":"/docs/auditor/auditor/configuration/activedirectory/permissions"}}');var r=t(474848),o=t(28453);const s={},a="Active Directory",c={},d=[{value:"Monitored Objects",id:"monitored-objects",level:2},{value:"Domain Audit Policy Settings",id:"domain-audit-policy-settings",level:2},{value:"Audit Settings for AD Partitions",id:"audit-settings-for-ad-partitions",level:2},{value:"Domain Partition",id:"domain-partition",level:3},{value:"Configuration and Schema Partitions",id:"configuration-and-schema-partitions",level:3},{value:"Security Event Log Settings",id:"security-event-log-settings",level:2},{value:"Exchange Settings",id:"exchange-settings",level:2},{value:"Next Steps",id:"next-steps",level:3}];function l(e){const i={a:"a",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"active-directory",children:"Active Directory"})}),"\n",(0,r.jsx)(i.p,{children:"Netwrix Auditor relies on native logs for collecting audit data. Therefore, successful change and access auditing requires a certain configuration of native audit settings in the audited environment and on the Auditor console computer. Configuring your IT infrastructure may also include enabling certain built-in Windows services, etc. Proper audit configuration is required to ensure audit data integrity, otherwise your change reports may contain warnings, errors or incomplete audit data."}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"CAUTION:"})," Folder associated with Netwrix Auditor must be excluded from antivirus scanning. See the ",(0,r.jsx)(i.a,{href:"https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA04u0000000HirCAE.html",children:"Antivirus Exclusions for Netwrix Auditor"})," knowledge base article for additional information."]}),"\n",(0,r.jsx)(i.p,{children:"You can configure your\xa0IT Infrastructure for monitoring in one of the following ways:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Automatically through a monitoring plan \u2013 This is a recommended method. If you select to automatically configure audit in the target environment, your current audit settings will be checked on each data collection and adjusted if necessary."}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Manually \u2013 Native audit settings must be adjusted manually to ensure collecting comprehensive and reliable audit data. You can enable Auditor to continually enforce the relevant audit policies or configure them manually:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Configure the domain for auditing. See the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/tools/auditconfigurationassistant",children:"Audit Configuration Assistant"})," topic for information on configuring the domain."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"On the Auditor console computer:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["If you have enabled automatic log backup for the Security log of your domain controller, you can instruct Auditor to clear the old backups automatically. For that, use the ",(0,r.jsx)(i.strong,{children:"CleanAutoBackupLogs"})," registry key, as described in the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/registrykey",children:"Active Directory Registry Key Configuration"})," topic."]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.em,{children:(0,r.jsx)(i.strong,{children:"RECOMMENDED:"})})," Adjust retention period for the backup files accordingly (default is ",(0,r.jsx)(i.strong,{children:"50"})," hours). See the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/securitylog",children:"Adjust Security Event Log Size and Retention"})," topic."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["To provide for event data collection, the Secondary Logon service must be up and running . Open ",(0,r.jsx)(i.strong,{children:"Administrative Tools"})," > ",(0,r.jsx)(i.strong,{children:"Services"}),", right-click the ",(0,r.jsx)(i.strong,{children:"Secondary Logon"})," service and on the ",(0,r.jsx)(i.strong,{children:"General"})," tab make sure that Startup type for this service is other than ",(0,r.jsx)(i.em,{children:"Disabled"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"monitored-objects",children:"Monitored Objects"}),"\n",(0,r.jsx)(i.p,{children:"Netwrix Auditor tracks changes made to all object classes and attributes in the Active Directory Domain, Configuration and Schema partitions. It also tracks changes to new object classes and attributes added due to the Active Directory Schema extension. For detailed information, refer to Microsoft articles:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"http://msdn.microsoft.com/en-us/library/ms680938(v=vs.85).aspx",children:"A full list of Active Directory object classes"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"http://msdn.microsoft.com/en-us/library/ms675090(v=vs.85).aspx",children:"A full list of Active Directory object attributes"})}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Review the following limitations:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Netwrix Auditor does not track changes to non-replicated attributes, such as badPwdCount, Last-Logon, Last-Logoff, etc. The non-replicated attributes pertain to a particular domain controller and are not replicated to other domain controllers."}),"\n",(0,r.jsx)(i.li,{children:"Changes made through the Exchange Management Console in the Organization Configuration node (Federation Trust, Organization Relationships and Hybrid Configuration tabs) are displayed in an internal Active Directory format that can be difficult to interpret."}),"\n",(0,r.jsx)(i.li,{children:"Netwrix Auditor tracks changes to membership in all groups inside the monitored domain (Domain local groups) and Universal and Global groups of domains in the same forest. Changes to Domain local groups of a different domain in the same forest are not reported."}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"State-in-time data collection is supported for Active Directory."}),"\n",(0,r.jsx)(i.p,{children:"For AD domain monitoring with Netwrix Auditor, the domain should be configured as explained below."}),"\n",(0,r.jsx)(i.h2,{id:"domain-audit-policy-settings",children:"Domain Audit Policy Settings"}),"\n",(0,r.jsx)(i.p,{children:"Effective domain controllers policy settings must be configured as listed in the table below."}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Policy"}),(0,r.jsx)(i.th,{children:"Audit type"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Audit account management"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.em,{children:'"Success"'})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Audit directory service access"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.em,{children:'"Success"'})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Audit logon events"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.em,{children:'"Success"'})})]})]})]}),"\n",(0,r.jsxs)(i.p,{children:["You can configure either ",(0,r.jsx)(i.strong,{children:"Basic domain audit policies"}),", or ",(0,r.jsx)(i.strong,{children:"Advanced domain audit policies"}),"."]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["To configure these settings automatically using Netwrix Auditor, refer to the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/automatic",children:"Active Directory: Automatic Configuration"})," topic."]}),"\n",(0,r.jsxs)(i.li,{children:["To configure them manually, refer to the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/basicpolicy",children:"Configure Basic Domain Audit Policies"})," or ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/advancedpolicy",children:"Configure Advanced Audit Policies"})," topics."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"audit-settings-for-ad-partitions",children:"Audit Settings for AD Partitions"}),"\n",(0,r.jsx)(i.p,{children:"Required object-level audit settings for the Active Directory partition must be configured as described in the next sections."}),"\n",(0,r.jsx)(i.h3,{id:"domain-partition",children:"Domain Partition"}),"\n",(0,r.jsxs)(i.p,{children:["Object-level audit settings for the Domain partition must be configured to audit for ",(0,r.jsx)(i.em,{children:"Success"})," of all access operations except the following: ",(0,r.jsx)(i.em,{children:"Full Control"}),", ",(0,r.jsx)(i.em,{children:"List Contents"}),", ",(0,r.jsx)(i.em,{children:"Read All Properties"})," and ",(0,r.jsx)(i.em,{children:"Read Permissions"}),"."]}),"\n",(0,r.jsxs)(i.p,{children:["These settings must be configured for ",(0,r.jsx)(i.strong,{children:"Everyone"})," security principal and applied to ",(0,r.jsx)(i.strong,{children:"This object and all descendant objects"}),"."]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["You can configure these settings automatically using Netwrix Auditor, as described in the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/automatic",children:"Active Directory: Automatic Configuration"})," topic."]}),"\n",(0,r.jsxs)(i.li,{children:["To configure them manually, refer o the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/objectlevel",children:"Configure Object-Level Auditing"})," topic."]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"configuration-and-schema-partitions",children:"Configuration and Schema Partitions"}),"\n",(0,r.jsxs)(i.p,{children:["Object-level audit settings for the Configuration and ",(0,r.jsx)(i.strong,{children:"Schema"})," partitions must be configured to audit for ",(0,r.jsx)(i.em,{children:"Success"})," of all access operations except the following: ",(0,r.jsx)(i.em,{children:"Full Control"}),", ",(0,r.jsx)(i.em,{children:"List Contents"}),", ",(0,r.jsx)(i.em,{children:"Read All Properties"})," and ",(0,r.jsx)(i.em,{children:"Read Permissions"})]}),"\n",(0,r.jsxs)(i.p,{children:["These settings must be configured for ",(0,r.jsx)(i.strong,{children:"Everyone"})," security principal and applied to ",(0,r.jsx)(i.strong,{children:"This object and its descendant objects"}),"."]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["You can configure these settings automatically using Netwrix Auditor, as described in the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/automatic",children:"Active Directory: Automatic Configuration"})," topic."]}),"\n",(0,r.jsxs)(i.li,{children:["To configure them manually, refer to the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/objectlevel",children:"Configure Object-Level Auditing"})," topic."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"security-event-log-settings",children:"Security Event Log Settings"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Security event log"})," settings for the domain controllers should be configured as follows:"]}),"\n",(0,r.jsxs)(i.table,{children:[(0,r.jsx)(i.thead,{children:(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.th,{children:"Setting"}),(0,r.jsx)(i.th,{children:"Value"})]})}),(0,r.jsxs)(i.tbody,{children:[(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Max event log size"}),(0,r.jsx)(i.td,{children:"4 GB"})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Retention method"}),(0,r.jsx)(i.td,{children:(0,r.jsx)(i.em,{children:"Overwrite events as needed"})})]}),(0,r.jsxs)(i.tr,{children:[(0,r.jsx)(i.td,{children:"Auto-archiving"}),(0,r.jsx)(i.td,{children:"Enabled"})]})]})]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["You can configure these settings automatically using Netwrix Auditor, as described in the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/automatic",children:"Active Directory: Automatic Configuration"})," topic."]}),"\n",(0,r.jsxs)(i.li,{children:["To configure them manually, refer to the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/securitylog",children:"Adjust Security Event Log Size and Retention"})," topic."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"exchange-settings",children:"Exchange Settings"}),"\n",(0,r.jsx)(i.p,{children:"If you have an on-premises Exchange server in your Active Directory domain, consider that some changes can be made via that Exchange server. To be able to audit and report who made those changes, you should:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsxs)(i.p,{children:["Configure the Exchange Administrator Audit Logging (AAL) settings, as described the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/exchange/auditlog",children:"Exchange Administrator Audit Logging Settings"})," topic."]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\n",(0,r.jsx)(i.p,{children:"Make sure that the account used for data collection has the following:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Membership in the Organization Management or Records Management group"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"-OR-"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"The Audit Logs management role."}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Configure Data Collecting Account, as described in the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/additional",children:"Additional Configuration to Review Changes Made via Exchange Server"})," topic."]}),"\n",(0,r.jsxs)(i.li,{children:["Configure required protocols and ports, as described in the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/ports",children:"Active Directory Ports"})," topic."]}),"\n",(0,r.jsxs)(i.li,{children:["If you plan to restore deleted Active Directory objects and their attributes using the Netwrix Auditor Object Restore for Active Directory tool (shipped with Netwrix Auditor,) it is recommended to set the ",(0,r.jsx)(i.strong,{children:"Active Directory tombstone lifetime"})," property to 730 days (default is 180 days). See the ",(0,r.jsx)(i.a,{href:"/docs/auditor/auditor/configuration/activedirectory/tombstone",children:"Adjust Active Directory Tombstone Lifetime (optional)"})," topic for additional information."]}),"\n"]})]})}function u(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);