"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[745792],{1546:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"threatprevention/install/migrateemserver","title":"Migrate the Enterprise Manager Server","description":"Follow the steps to move the Threat Prevention7.5 Enterprise Manager to a different server when using default certificates.","source":"@site/docs/threatprevention/threatprevention/install/migrateemserver.md","sourceDirName":"threatprevention/install","slug":"/threatprevention/install/migrateemserver","permalink":"/docs/threatprevention/threatprevention/install/migrateemserver","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/threatprevention/threatprevention/install/migrateemserver.md","tags":[],"version":"current","frontMatter":{},"sidebar":"threatPreventionSidebar","previous":{"title":"Import the License","permalink":"/docs/threatprevention/threatprevention/install/licenseimport"},"next":{"title":"Installation","permalink":"/docs/threatprevention/threatprevention/install/overview"}}');var i=t(474848),s=t(28453);const a={},o="Migrate the Enterprise Manager Server",l={},h=[];function c(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"migrate-the-enterprise-manager-server",children:"Migrate the Enterprise Manager Server"})}),"\n",(0,i.jsx)(n.p,{children:"Follow the steps to move the Threat Prevention7.5 Enterprise Manager to a different server when using default certificates."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"CAUTION:"})," Do not remove the Enterprise Manager from the current machine until the migration process is complete."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 1 \u2013"})," Install the Enterprise Manager to the new machine. See the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/install/application",children:"Application Server Install"})," topic for additional information."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"Remember,"})," point to the existing SQL Server for the NVMonitorData and NVConfig databases on the Database Login Information page of the wizard during installation."]}),"\n",(0,i.jsx)(n.p,{children:"After the installation completes, go to the Services console (services.msc) on the new machine and stop the Threat Prevention Enterprise Manager service."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 2 \u2013"})," Copy the following files from the original \u201cCertsinfo\u201d folder to the new \u201cCertsinfo\u201d folder."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.code,{children:"...\\Netwrix\\Netwrix Threat Prevention\\SIEnterpriseManager\\CertsInfo"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Ca-crt.pem"}),"\n",(0,i.jsx)(n.li,{children:"Ca-key.pem"}),"\n",(0,i.jsx)(n.li,{children:"Em-crt.pem"}),"\n",(0,i.jsx)(n.li,{children:"Em-key.pem"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Then, follow these steps to migrate the \u201csecret.dpapi\u201d file (do not copy)."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"On the original Enterprise Manager machine: \u201cSecretMgr.exe \u2013e myOutFile\u201d"}),"\n",(0,i.jsx)(n.p,{children:'SecretMgr.exe is located in the installation folder of the Enterprise Manager and you can run it from Command Prompt. "myOutFile" is an example of a user supplied name for the file created by SecretMgr.exe.'}),"\n",(0,i.jsxs)(n.p,{children:['By default, "myOutFile" is created at ',(0,i.jsx)(n.code,{children:"C:\\Windows\\SysWOW64"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE:"})," SecretMgr.exe knows to look for the ",(0,i.jsx)(n.code,{children:"\\certsinfo\\Secret.dpapi"})," folder and file."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Manually copy \u201cmyOutFile\u201d on the new Enterprise Manager machine in a secure way."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"On the new Enterprise Manager machine: \u201cSecretMgr.exe \u2013i myOutFile\u201d"}),"\n",(0,i.jsx)(n.p,{children:'SecretMgr.exe is located in the installation folder of the Enterprise Manager and you can run it from Command Prompt. Use it to import "myOutFile".'}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 3 \u2013"})," Start the Threat Prevention Enterprise Manager service on the new machine."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 4 \u2013"})," On the original Enterprise Manager machine, launch the Administration Console and follow these steps to update the Enterprise Manager info for each Agent."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Click ",(0,i.jsx)(n.strong,{children:"Agents"})," in the left pane to open the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/admin/agents/overview",children:"Agents Interface"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Right-click an Agent in the grid and select ",(0,i.jsx)(n.strong,{children:"Update Agent Settings"}),". You can also select multiple Agents and right-click to select the Update Agent Settings option for them."]}),"\n",(0,i.jsxs)(n.p,{children:["The Select Computers window opens. Click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["On the Set Options window, enter the IP address/name of the new Enterprise Manager in the IP Address/Name field and click ",(0,i.jsx)(n.strong,{children:"Next"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify that the update task completes for each Agent successfully."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"At this point, the Agents should get displayed in the Administration Console on the new Enterprise Manager machine."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE:"})," If you cannot use the Administration Console on the original Enterprise Manager machine, then on each machine where the Agent is deployed, you can manually edit the \u201cSIWindowsAgent.exe.config\u201d file to update the following entry with the IP address or name of the new Enterprise Manager.",(0,i.jsx)(n.br,{}),"\n","Example: ",(0,i.jsx)("add",{value:"192.168.189.135:3741"},"managerAddress"),(0,i.jsx)(n.br,{}),"\n","You will find the SIWindowsAgent.exe.config file at: ",(0,i.jsx)(n.code,{children:"\u2026\\Netwrix\\Netwrix Threat Prevention\\SIWindowsAgent"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Step 5 \u2013"})," Once all Agents are displayed in the Administration Console on the new Enterprise Manager machine, you can decommission the original Enterprise Manager machine and/or uninstall the Netwrix Threat Prevention server."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE:"})," If Netwrix Threat Prevention is configured to use customer supplied certificates. It is recommended that you uninstall, then re-enroll and re-install all Agents with new certificates. This is because customer supplied certificates usually have the FQDN info of the Enterprise Manager and the new Enterprise Manager machine would typically have a different DNS name. See the ",(0,i.jsx)(n.a,{href:"/docs/threatprevention/threatprevention/install/agent/customcert",children:"Create Custom Managed Certificates for Each Agent"})," topic for additional information."]})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(296540);const i={},s=r.createContext(i);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);