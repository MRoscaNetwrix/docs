"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[554198],{28453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var t=i(296540);const r={},s=t.createContext(r);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(s.Provider,{value:n},e.children)}},340700:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"policypak/device/registry","title":"What are the registry settings for Device Manager (and how do I reset Device Manager Admin Approval)?","description":"On any endpoint, details about what USB and other devices have temporary or permanent access are stored here:","source":"@site/docs/policypak/policypak/device/registry.md","sourceDirName":"policypak/device","slug":"/policypak/device/registry","permalink":"/docs/policypak/policypak/device/registry","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/policypak/policypak/device/registry.md","tags":[],"version":"current","frontMatter":{},"sidebar":"policyPakSidebar","previous":{"title":"Video Learning Center","permalink":"/docs/policypak/policypak/device/overview/videolearningcenter"},"next":{"title":"How to add Devices when serial numbers contain extra characters in the device instance path","permalink":"/docs/policypak/policypak/device/serialnumber"}}');var r=i(474848),s=i(28453);const a={},o="What are the registry settings for Device Manager (and how do I reset Device Manager Admin Approval)?",c={},d=[{value:"To determine the Admin Approval End Time for any device:",id:"to-determine-the-admin-approval-end-time-for-any-device",level:2},{value:"To Determine the Permissions within the Registry:",id:"to-determine-the-permissions-within-the-registry",level:2},{value:"Resetting the Device Manager Admin Approval Values",id:"resetting-the-device-manager-admin-approval-values",level:2}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"what-are-the-registry-settings-for-device-manager-and-how-do-i-reset-device-manager-admin-approval",children:"What are the registry settings for Device Manager (and how do I reset Device Manager Admin Approval)?"})}),"\n",(0,r.jsx)(n.p,{children:"On any endpoint, details about what USB and other devices have temporary or permanent access are stored here:"}),"\n",(0,r.jsx)(n.p,{children:"HKEY_LOCAL_MACHINE\\SOFTWARE\\PolicyPak\\Client-Side Extensions{7FA1BDCB-818A-4EF6-A1B7-EF5F85C2D702}\\Admin Approval\\ApprovedDevicesStorage"}),"\n",(0,r.jsx)(n.p,{children:"Here is an example of a device which was approved via the Admin Approval tool."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"aa1",src:i(916011).A+"",width:"1738",height:"882"})}),"\n",(0,r.jsx)(n.h2,{id:"to-determine-the-admin-approval-end-time-for-any-device",children:"To determine the Admin Approval End Time for any device:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Grab the ",(0,r.jsx)(n.strong,{children:"EndTime"})," and change to ",(0,r.jsx)(n.strong,{children:"Decimal"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," Input the ",(0,r.jsx)(n.strong,{children:"EndTime"})," into this Powershell script."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'$my_time = 1725537001291  \n(([System.DateTimeOffset]::FromUnixTimeMilliseconds($my_time)).DateTime.ToLocalTime()).ToString("s")\n'})}),"\n",(0,r.jsx)(n.p,{children:"An example can be seen here:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"aa2",src:i(597770).A+"",width:"1918",height:"876"})}),"\n",(0,r.jsx)(n.h2,{id:"to-determine-the-permissions-within-the-registry",children:"To Determine the Permissions within the Registry:"}),"\n",(0,r.jsx)(n.p,{children:"Permission bit flags:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"READ 0x80000000"}),"\n",(0,r.jsx)(n.li,{children:"WRITE 0x40000000"}),"\n",(0,r.jsx)(n.li,{children:"EXECUTE 0x20000000"}),"\n",(0,r.jsx)(n.li,{children:"ALL 0x10000000"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"For example, for READ+WRITE permissions, the value is 0xC0000000."}),"\n",(0,r.jsx)(n.h2,{id:"resetting-the-device-manager-admin-approval-values",children:"Resetting the Device Manager Admin Approval Values"}),"\n",(0,r.jsx)(n.p,{children:"From time to time you may want to reset the values on a machine such that all devices are reset, and new Admin Approval values may be set in the future. To do this:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 1 \u2013"})," Download PSExec from ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/sysinternals/downloads/psexec",children:"https://learn.microsoft.com/en-us/sysinternals/downloads/psexec"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 2 \u2013"})," Run CMD as administator"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 3 \u2013"})," Execute psexec.exe -i -s regedit"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 4 \u2013"})," As SYSTEM open Regedit. Find HKEY_LOCAL_MACHINE\\SOFTWARE\\PolicyPak\\Client-Side Extensions{7FA1BDCB-818A-4EF6-A1B7-EF5F85C2D702}\\Admin Approval\\ApprovedDevicesStorage"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 5 \u2013"})," Delete the whole key ",(0,r.jsx)(n.strong,{children:"ApprovedDevicesStorage"})," to reset AA approvals for all devices, or chose a specific one and delete it."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Step 6 \u2013"})," Restart PPExtensionService.exe (aka Netwrix Endpoint Policy Manager (formerly PolicyPak) Helper Service.)"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},597770:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/aa2-334757bd6654a33b0a803fee7c5dab18.webp"},916011:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/aa1-b6c09c8549a1fc30a5ee8c5833425f60.webp"}}]);