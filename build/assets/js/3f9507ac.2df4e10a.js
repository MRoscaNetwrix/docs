"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[215993],{28453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>l});var s=n(296540);const t={},o=s.createContext(t);function i(e){const r=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(o.Provider,{value:r},e.children)}},183374:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"auditor/configuration/fileservers/netappcmode/permissions","title":"Permissions for NetApp Auditing","description":"Before you start creating a monitoring plan to audit your NetApp file storage system, plan for the account that will be used for data collection \u2013 it should meet the requirements listed below.","source":"@site/docs/auditor/auditor/configuration/fileservers/netappcmode/permissions.md","sourceDirName":"auditor/configuration/fileservers/netappcmode","slug":"/auditor/configuration/fileservers/netappcmode/permissions","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/configuration/fileservers/netappcmode/permissions.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"NetApp Data ONTAP","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/overview"},"next":{"title":"Configure System Service Firewall Policies","permalink":"/docs/auditor/auditor/configuration/fileservers/netappcmode/ports"}}');var t=n(474848),o=n(28453);const i={},l="Permissions for NetApp Auditing",a={},c=[{value:"Create Role on NetApp Clustered Data ONTAP 8 or ONTAP 9 and Enabling AD User Access",id:"create-role-on-netapp-clustered-data-ontap-8-or-ontap-9-and-enabling-ad-user-access",level:2}];function d(e){const r={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"permissions-for-netapp-auditing",children:"Permissions for NetApp Auditing"})}),"\n",(0,t.jsx)(r.p,{children:"Before you start creating a monitoring plan to audit your NetApp file storage system, plan for the account that will be used for data collection \u2013 it should meet the requirements listed below."}),"\n",(0,t.jsxs)(r.p,{children:["If you want to authenticate with AD user account, you must enable it to access SVM through ONTAPI. See the ",(0,t.jsx)(r.a,{href:"#Create-Role-on-NetApp-Clustered-Data-ONTAP-8-or-ONTAP-9-and-Enabling-AD-User-Access",children:"Create Role on NetApp Clustered Data ONTAP 8 or ONTAP 9 and Enabling AD User Access"})," section for additional information."]}),"\n",(0,t.jsx)(r.p,{children:"The following permissions are required for the account on the target server:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"The account must be a member of the Local Administrators group."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"The account must be a member of the BUILTIN\\Administrators group."}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsxs)(r.p,{children:["The account requires the following ",(0,t.jsx)(r.strong,{children:"NTFS"})," permissions:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"List folder / read data"}),"\n",(0,t.jsx)(r.li,{children:"Read attributes"}),"\n",(0,t.jsx)(r.li,{children:"Read extended attributes"}),"\n",(0,t.jsx)(r.li,{children:"Read permissions"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"The account requires the following share permissions:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Read"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"The account requires the following NTFS and share permissions:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"Read permission on the audit logs folder and its content."}),"\n",(0,t.jsx)(r.li,{children:"Delete permission on the audit log folder content."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(r.li,{children:["\n",(0,t.jsx)(r.p,{children:"To connect to NetApp Clustered Data ONTAP 8 or ONTAP 9, an account must be assigned a custom role (e.g., fsa_role) on SVM that has the following capabilities with access query levels:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{}),(0,t.jsx)(r.th,{})]})}),(0,t.jsx)(r.tbody,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:"- version - volume - vserver audit - vserver audit rotate-log - vserver cifs"}),(0,t.jsx)(r.td,{children:"readonly  readonly  all  all  readonly"})]})})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"The following permissions are required for the account on the Netwrix Auditor server:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"The account must be a member of the Local Administrators group."}),"\n"]}),"\n",(0,t.jsxs)(r.p,{children:["See ",(0,t.jsx)(r.a,{href:"#Create-Role-on-NetApp-Clustered-Data-ONTAP-8-or-ONTAP-9-and-Enabling-AD-User-Access",children:"Create Role on NetApp Clustered Data ONTAP 8 or ONTAP 9 and Enabling AD User Access"})," section for additional information."]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.em,{children:"Remember,"})," that you can also assign the built-in vsadmin role instead of the permissions above."]}),"\n",(0,t.jsx)(r.h2,{id:"create-role-on-netapp-clustered-data-ontap-8-or-ontap-9-and-enabling-ad-user-access",children:"Create Role on NetApp Clustered Data ONTAP 8 or ONTAP 9 and Enabling AD User Access"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"NOTE:"})," This article applies to NetApp 8.3.2 and later. You must be a ",(0,t.jsx)(r.strong,{children:"cluster administrator"})," to run the commands below."]}),"\n",(0,t.jsx)(r.p,{children:"Follow the steps to create a role for enabling AD user access:"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 1 \u2013"})," Create a new role (e.g., netwrix_role for ONTAPI and netwrix_rest_role for RESTAPI) on your SVM (e.g., svm1). For example:"]}),"\n",(0,t.jsx)(r.p,{children:"Create ONTAPI role:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'security login role create -role netwrix_role -cmddirname version -access readonly -vserver svm1  \nsecurity login role create -role netwrix_role -cmddirname volume -access readonly -vserver svm1  \nsecurity login role create -role netwrix_role -cmddirname "vserver audit" -access all -vserver svm1  \nsecurity login role create -role netwrix_role -cmddirname "vserver audit rotate-log" -access all -vserver svm1\n'})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"NOTE:"})," This option is required for auto audit configuration."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:'security login role create -role netwrix_role -cmddirname "vserver cifs" -access readonly -vserver svm1\n'})}),"\n",(0,t.jsx)(r.p,{children:"Create RESTAPI role:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"security login rest-role create -role netwrix_rest_role -api /api/svm/svms -access read_create_modify -vserver svm1\xa0  \nsecurity login rest-role create -role netwrix_rest_role -api /api/protocols/audit -access read_create_modify -vserver svm1\xa0  \nsecurity login rest-role create -role netwrix_rest_role -api /api/storage/volumes -access readonly -vserver svm1\xa0  \nsecurity login rest-role create -role netwrix_rest_role -api /api/protocols/cifs/shares -access readonly -vserver svm1\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"NOTE:"})," The commands in the first two lines above can be used on NetApp versions 9.11+. In earlier versions, use the following commands:"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"security login rest-role create -role netwrix_rest_role -api /api/svm/svms -access all -vserver svm1  \nsecurity login rest-role create -role netwrix_rest_role -api /api/protocols/audit -access all -vserver svm1\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 2 \u2013"})," The capabilities must be assigned one by one. To review currently applied capabilities, you can use the following command:"]}),"\n",(0,t.jsx)(r.p,{children:"ONTAPI role:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"security login role show -vserver svm1 -role netwrix_role\n"})}),"\n",(0,t.jsx)(r.p,{children:"RESTAPI role:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"security login rest-role show -vserver svm1 -role netwrix_rest_role\n"})}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"Step 3 \u2013"})," Create a login for the account that is going to authenticate and collect data from NetApp. If you want to use an AD account for collecting data, enable it to access SVM through ONTAPI. For example:"]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.strong,{children:"NOTE:"})," In ONTAP 9.10 and higher, it is not possible to assign ONTAPI role (e.g. netwrix_role) and RESTAPI role (e.g. netwrix_rest_role) to one AD user. To allow a user access to both the ONTAPI and RESTAPI, you can use different AD groups by assigning roles to them and including the user in these groups."]}),"\n",(0,t.jsx)(r.p,{children:"Create login for ONTAPI role:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"security login create -vserver svm1 -user-or-group-name domain\\user -application ontapi -authmethod domain -role netwrix_role\n"})}),"\n",(0,t.jsx)(r.p,{children:"Create login for RESTAPI role:"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{children:"security login create -vserver svm1 -user-or-group-name domain\\user -application http -authmethod domain -role netwrix_rest_role\n"})}),"\n",(0,t.jsxs)(r.p,{children:["where ",(0,t.jsx)(r.code,{children:"domain\\user"})," is your data collecting account."]}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.em,{children:"Remember,"})," that to be able to add event policy for NetApp, the role you set up for working with ONTAPI must have the following attributes:"]}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"version readonly"}),"\n",(0,t.jsx)(r.li,{children:"volume readonly"}),"\n",(0,t.jsx)(r.li,{children:"vserver audit all (required for the product to adjust audit settings automatically)"}),"\n",(0,t.jsx)(r.li,{children:"vserver audit rotate-log all"}),"\n",(0,t.jsx)(r.li,{children:"vserver cifs readonly"}),"\n"]}),"\n",(0,t.jsx)(r.p,{children:"The role you set up for working with RESTAPI must have the following attributes:"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsx)(r.li,{children:"/api/svm/svms read_create_modify"}),"\n",(0,t.jsx)(r.li,{children:"/api/protocols/audit read_create_modify"}),"\n",(0,t.jsx)(r.li,{children:"/api/storage/volumes readonly"}),"\n",(0,t.jsx)(r.li,{children:"/api/protocols/cifs/shares readonly"}),"\n"]})]})}function u(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);