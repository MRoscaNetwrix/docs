"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[684854],{28453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>c});var s=i(296540);const r={},n=s.createContext(r);function o(e){const t=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(n.Provider,{value:t},e.children)}},122122:(e,t,i)=>{i.d(t,{A:()=>s});const s=i.p+"assets/images/pointcut-9d730f4070f82f7c21e17a6f48f014bb.webp"},791205:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/notificationaspect/index","title":"Notification Aspect","description":"Sends a notification email to one or several users.","source":"@site/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/notificationaspect/index.md","sourceDirName":"usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/notificationaspect","slug":"/usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/notificationaspect/","permalink":"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/notificationaspect/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/notificationaspect/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSidebar","previous":{"title":"Invoke Workflow Aspect","permalink":"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/invokeworkflowaspect/"},"next":{"title":"Forms","permalink":"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/workflows/forms/"}}');var r=i(474848),n=i(28453);const o={},c="Notification Aspect",d={},l=[{value:"Examples",id:"examples",level:2},{value:"Properties",id:"properties",level:2},{value:"Child Element: PointCut",id:"child-element-pointcut",level:2},{value:"Child Element: Recipient",id:"child-element-recipient",level:2},{value:"Examples",id:"examples-1",level:3}];function a(e){const t={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"notification-aspect",children:"Notification Aspect"})}),"\n",(0,r.jsx)(t.p,{children:"Sends a notification email to one or several users."}),"\n",(0,r.jsx)(t.h2,{id:"examples",children:"Examples"}),"\n",(0,r.jsxs)(t.p,{children:["The following example sends a notification email based on the template ",(0,r.jsx)(t.code,{children:"Notification_Directory_Guest.cshtml"})," and the subject computed by ",(0,r.jsx)(t.code,{children:"SubjectExpression_L1"}),", which both use data from ",(0,r.jsx)(t.code,{children:"Workflow_Directory_Guest:Directory_Guest"}),", and on the styles from ",(0,r.jsx)(t.code,{children:"Notification_Directory_Guest.css"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'\n<NotificationAspect Identifier="Notification_Directory_Guest" ExpressionBinding="Workflow_Directory_Guest:Directory_Guest" RazorFile_L1="./Templates/Notification_Directory_Guest.cshtml" CssFile="./Templates/Notification_Directory_Guest.css" SubjectExpression_L1="C#:guest:return &quot;Validating data for guest: &quot; + guest.FirstName + guest.LastName;">\n    <PointCut Activity="Directory_Guest_AdvancedStart:Request" ActivityState="ActionWithRefine-Executed" Mode="After" />    <Recipient Type="Binding" Binding="Directory_Guest:Mail" /></NotificationAspect>\n\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The notification will be sent after the ",(0,r.jsx)(t.code,{children:"Request"})," activity of the ",(0,r.jsx)(t.code,{children:"Directory_Guest_AdvancedStart"})," workflow is executed.",(0,r.jsx)(t.br,{}),"\n","The notification will be sent to all email addresses defined by ",(0,r.jsx)(t.code,{children:"Directory_Guest:Mail"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Details"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Identifier   required"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Unique identifier of the aspect."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Binding   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Binding whose difference with ",(0,r.jsx)(t.code,{children:"ExpressionBinding"})," defines the property that corresponds to identities' email addresses, when ",(0,r.jsx)(t.code,{children:"Type"})," is set to ",(0,r.jsx)(t.code,{children:"Binding"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"CssFile   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Path to the css file that defines the styles for the email.   ",(0,r.jsx)(t.strong,{children:"Note:"})," the path must be relative to the configuration folder, and the file must be inside it."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ExpressionBinding   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Binding:   - that defines the variable type used in the potential expressions specified in the aspect;   - whose difference with ",(0,r.jsx)(t.code,{children:"Binding"})," defines the property involved in the aspect.   ",(0,r.jsx)(t.strong,{children:"Note:"})," required when handling the property of multi-valued objects, for example records, to make sure to modify the property in all records and not only in one."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Priority   default value: 0"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Int32   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Execution priority among all aspects. At a given activity state, the aspect with the highest priority will be triggered first.   ",(0,r.jsx)(t.strong,{children:"Note:"})," the priority can be a negative value."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"RazorFile_L1   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Path to the Razor cshtml file that defines the email's body template in language 1 (up to 16).   ",(0,r.jsx)(t.strong,{children:"Note:"})," the path must be relative to the configuration folder, and the file must be inside it."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"SubjectExpression_L1   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   C# expression that defines the email's subject in language 1 (up to 16). The expression's variable type is defined in ",(0,r.jsx)(t.code,{children:"ExpressionBinding"}),"."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"child-element-pointcut",children:"Child Element: PointCut"}),"\n",(0,r.jsxs)(t.p,{children:["A pointcut is a mechanism telling Identity Manager when to execute the linked ",(0,r.jsx)(t.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/workflows/aspects/",children:"Aspects"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"The position of the pointcut is specified by an activity state and a mode (before or after)."}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"pointcut Schema",src:i(122122).A+"",width:"4282",height:"562"})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Details"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Activity   required"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Int64   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Identifier of the activity whose specified state triggers the aspect."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ActivityState   required"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Enumeration   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Identifier of the activity state that triggers the aspect."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Mode   default value: 0"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    PointCutMode   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Mode defining when exactly the aspect is triggered around the specified workflow's activity state.   ",(0,r.jsx)(t.code,{children:"0"})," - ",(0,r.jsx)(t.strong,{children:"Before"}),": the aspect will be executed on entry to the specified activity state, regardless of the transition used.   ",(0,r.jsx)(t.code,{children:"1"})," - ",(0,r.jsx)(t.strong,{children:"After"}),": the aspect will be executed on exit from the specified activity state, regardless of the transition used."]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"child-element-recipient",children:"Child Element: Recipient"}),"\n",(0,r.jsxs)(t.p,{children:["A recipient defines one or several identities who will receive a notification from ",(0,r.jsx)(t.code,{children:"NotificationAspect"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"examples-1",children:"Examples"}),"\n",(0,r.jsx)(t.p,{children:"The following example sends a notification email to the actors of the next step of the workflow."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'\n<NotificationAspect Identifier="Notification_Directory_User" ExpressionBinding="Workflow_Directory_User:Directory_User" RazorFile_L1="Template/Notification_Directory_User.cshtml" CssFile="Template/Notification_Directory_User.css">  <PointCut Activity="Directory_User_StartInternal:Request" ActivityState="ActionWithRefine-Executed" Mode="After" />\n  <Recipient Type="Actor" />\n</NotificationAspect>\n\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The following example sends a notification email to the performers of the ",(0,r.jsx)(t.code,{children:"Request"})," activity of the ",(0,r.jsx)(t.code,{children:"Directory_User_StartInternal"})," workflow when the state is ",(0,r.jsx)(t.code,{children:"Executed"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'\n<NotificationAspect Identifier="Notification_Directory_User" ExpressionBinding="Workflow_Directory_User:Directory_User" RazorFile_L1="Template/Notification_Directory_User.cshtml" CssFile="Template/Notification_Directory_User.css">  <PointCut Activity="Directory_User_StartInternal:Request" ActivityState="ActionWithRefine-Executed" Mode="After" />\n  <Recipient Type="Performer" Activity="Directory_User_StartInternal:Request" ActivityState="ActionWithRefine-Executed" />\n</NotificationAspect>\n\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The following example sends a notification email to the email address, stored in ",(0,r.jsx)(t.code,{children:"Mail"}),", of the user(s) from ",(0,r.jsx)(t.code,{children:"Directory_User"})," targeted by the workflow, so here the new user created by the ",(0,r.jsx)(t.code,{children:"Directory_User_StartInternal"})," workflow."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'\n<NotificationAspect Identifier="Notification_Directory_User" ExpressionBinding="Workflow_Directory_User:Directory_User" RazorFile_L1="Template/Notification_Directory_User.cshtml" CssFile="Template/Notification_Directory_User.css">  <PointCut Activity="Directory_User_StartInternal:Request" ActivityState="ActionWithRefine-Executed" Mode="After" />\n  <Recipient Type="Binding" Binding="Directory_User:Mail" />\n</NotificationAspect>\n\n'})}),"\n",(0,r.jsxs)(t.p,{children:["The following example sends a notification email to all identities whose email addresses are defined as ",(0,r.jsx)(t.code,{children:"{lastName}@company.com"}),"."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'\n<NotificationAspect Identifier="Notification_Directory_User" ExpressionBinding="Workflow_Directory_User:Directory_User" RazorFile_L1="Template/Notification_Directory_User.cshtml" CssFile="Template/Notification_Directory_User.css">  <PointCut Activity="Directory_User_StartInternal:Request" ActivityState="ActionWithRefine-Executed" Mode="After" />\n  <Recipient Type="Expression" Expression="C#:user:return user.LastName+"@company.com";" />\n</NotificationAspect>\n\n'})}),"\n",(0,r.jsx)(t.p,{children:"The following example sends a notification to all identities with a profile that includes the right permission."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{children:'\n<NotificationAspect Identifier="Directory_User_New" ExpressionBinding="Workflow_Directory_User:Directory_User" RazorFile_L1="Directory/User/Directory-User-Notification-New.cshtml" CssFile="Notifications.css">  <PointCut Activity="Directory_User_NewInternal:Persist" ActivityState="Persist-Invoked" Mode="After" />  <PointCut Activity="Directory_User_NewExternal:Persist" ActivityState="Persist-Invoked" Mode="After" />\n  <Recipient Type="Profile" />\n</NotificationAspect>\n\nKnowing that we also have:\n<Profile Identifier="Workforce/Notifications/Directory_User_New" DisplayName_L1="Workforce/Notifications/New User" IsComponent="true" /><AccessControlRule Profile="Workforce/Notifications/Directory_User_New" EntityType="Directory_User" Identifier="Composite_Notifications_Directory_User_New*" DisplayName_L1="Composite_Notifications_Directory_User_New*">\n  <Entry Permission="/Custom/WorkflowsNotifications/Directory_User_NewInternal/Persist/Invoked" />  <Entry Permission="/Custom/WorkflowsNotifications/Directory_User_NewExternal/Persist/Invoked" />\n</AccessControlRule>\n\n'})}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Property"}),(0,r.jsx)(t.th,{children:"Details"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Activity   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Int64   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Identifier of the activity whose last performers are to be notified, when ",(0,r.jsx)(t.code,{children:"Type"})," is set to ",(0,r.jsx)(t.code,{children:"Performer"}),".   ",(0,r.jsx)(t.strong,{children:"Note:"})," must be set together with ",(0,r.jsx)(t.code,{children:"ActivityState"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"ActivityState   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Enumeration   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Identifier of the activity state whose last performers are to be notified, when ",(0,r.jsx)(t.code,{children:"Type"})," is set to ",(0,r.jsx)(t.code,{children:"Performer"}),".   ",(0,r.jsx)(t.strong,{children:"Note:"})," must be set together with ",(0,r.jsx)(t.code,{children:"Activity"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Binding   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Int64   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Binding of the property that represents the notification's recipients, when ",(0,r.jsx)(t.code,{children:"Type"})," is set to ",(0,r.jsx)(t.code,{children:"Binding"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"EmailAddresses   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Email addresses of the notification's recipients, when ",(0,r.jsx)(t.code,{children:"Type"})," is set to ",(0,r.jsx)(t.code,{children:"Hardcoded"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Expression   optional"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    String   ",(0,r.jsx)(t.strong,{children:"Description"}),"   C# expression that returns the email addresses of the notification's recipients, as strings or ",(0,r.jsx)(t.code,{children:"IEnumerable<string>"}),", when ",(0,r.jsx)(t.code,{children:"Type"})," is set to ",(0,r.jsx)(t.code,{children:"Expression"}),". The expression's variable type is defined in ",(0,r.jsx)(t.code,{children:"ExpressionBinding"})," in the associated ",(0,r.jsx)(t.code,{children:"NotificationAspect"}),". See the ",(0,r.jsx)(t.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/expressions/",children:"Expressions"})," topic for additional information."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"IsCC   default value: false"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    Boolean   ",(0,r.jsx)(t.strong,{children:"Description"}),"   ",(0,r.jsx)(t.code,{children:"true"})," to send the notification email to the recipient(s) as a carbon copy (CC)."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Type   required"}),(0,r.jsxs)(t.td,{children:[(0,r.jsx)(t.strong,{children:"Type"}),"    RecipientType   ",(0,r.jsx)(t.strong,{children:"Description"}),"   Type of recipients for the email notification.   ",(0,r.jsx)(t.strong,{children:"Actor"}),": the identities with the permissions to act on the next step of the workflow specified in the pointcut.   ",(0,r.jsx)(t.strong,{children:"Performer"}),": the actors of a past workflow step specified in ",(0,r.jsx)(t.code,{children:"Activity"})," and ",(0,r.jsx)(t.code,{children:"ActivityState"}),".   ",(0,r.jsx)(t.strong,{children:"Binding"}),": the identities whose email addresses are designated by the property specified in ",(0,r.jsx)(t.code,{children:"Binding"}),".   ",(0,r.jsx)(t.strong,{children:"Hardcoded"}),": the identities whose email addresses are specified explicitly in ",(0,r.jsx)(t.code,{children:"EmailAddresses"}),".   ",(0,r.jsx)(t.strong,{children:"Expression"}),": the identities whose email addresses match the C# expression specified in ",(0,r.jsx)(t.code,{children:"Expression"}),".   ",(0,r.jsx)(t.strong,{children:"Profile"}),": the identities with the permission ",(0,r.jsx)(t.code,{children:"/Custom/WorkflowsNotifications/{workflow_identifier}/"}),"   ",(0,r.jsx)(t.code,{children:"{activity_identifier}/{activityTemplateState_shortIdentifier}"}),"."]})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);