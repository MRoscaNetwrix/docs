"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[32649],{28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>d});var i=r(296540);const s={},n=i.createContext(s);function o(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(n.Provider,{value:t},e.children)}},520416:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"auditor/requirements/longtermarchive","title":"File-Based Repository for Long-Term Archive","description":"Long-Term Archive is a file-based repository for keeping activity records collected by Auditor.","source":"@site/docs/auditor/auditor/requirements/longtermarchive.md","sourceDirName":"auditor/requirements","slug":"/auditor/requirements/longtermarchive","permalink":"/docs/auditor/auditor/requirements/longtermarchive","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/requirements/longtermarchive.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Use Group Managed Service Account (gMSA)","permalink":"/docs/auditor/auditor/requirements/gmsa"},"next":{"title":"Monitored Object Types, Actions, and Attributes","permalink":"/docs/auditor/auditor/requirements/monitoredobjecttypes"}}');var s=r(474848),n=r(28453);const o={},d="File-Based Repository for Long-Term Archive",a={},l=[{value:"Location",id:"location",level:2},{value:"Retention",id:"retention",level:2},{value:"Capacity",id:"capacity",level:2},{value:"Configure Long-Term Archive Account",id:"configure-long-term-archive-account",level:2},{value:"Assign Permissions on the Long-Term Archive Folder",id:"assign-permissions-on-the-long-term-archive-folder",level:3},{value:"Assign Change and Create Files/Write Data Permissions to Upload Subscriptions to File Shares",id:"assign-change-and-create-fileswrite-data-permissions-to-upload-subscriptions-to-file-shares",level:3},{value:"System Health",id:"system-health",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"file-based-repository-for-long-term-archive",children:"File-Based Repository for Long-Term Archive"})}),"\n",(0,s.jsx)(t.p,{children:"Long-Term Archive is a file-based repository for keeping activity records collected by Auditor."}),"\n",(0,s.jsx)(t.h2,{id:"location",children:"Location"}),"\n",(0,s.jsxs)(t.p,{children:["Long-Term Archive can be located on the same computer with Auditor Server, or separately - in this case ensure that the Auditor Server can access the remote machine. By default, the Long-Term Archive (repository) and Auditor working folder are stored on the system drive. Default path to the Long-Term Archive is ",(0,s.jsx)(t.code,{children:"%ProgramData%\\NetwrixAuditor\\Data"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"To reduce the impact on the system drive in large and extra-large environments, it is recommended to move Long-Term Archive to another disk. For that, you should estimate the required capacity using recommendations in the next section."}),"\n",(0,s.jsx)(t.p,{children:"Then you should prepare the new folder for repository, target Netwrix Auditor at that folder, and, if necessary, move repository data from the old to the new location."}),"\n",(0,s.jsx)(t.p,{children:"Follow the steps to modify Long-Term Archive location and other settings."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 1 \u2013"})," In Auditor client, click Settings > Long-Term Archive; alternatively, if you are viewing the Long-Term Archive widget of the Health Status dashboard, click Open settings."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 2 \u2013"})," Click Modify."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"archive_modify_settings_thumb_0_0",src:r(839576).A+"",width:"737",height:"679"})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 3 \u2013"})," Enter new path or browse for the required folder."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 4 \u2013"})," Provide retention settings and access credentials."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 5 \u2013"})," To move data from the old repository to the new location, take the steps described in the following Netwrix knowledge base article: ",(0,s.jsx)(t.a,{href:"https://helpcenter.netwrix.com/bundle/z-kb-articles-salesforce/page/kA00g000000H9SSCA0.html",children:"How to Move Long-Term Archive to a New Location"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Auditor client will start writing data to the new location right after you complete data moving procedure."}),"\n",(0,s.jsx)(t.h2,{id:"retention",children:"Retention"}),"\n",(0,s.jsxs)(t.p,{children:["Default retention period for repository data is ",(0,s.jsx)(t.strong,{children:"120 months"}),". You can specify the value you need in the Long-Term Archive settings. When retention period is over, data will be deleted automatically."]}),"\n",(0,s.jsxs)(t.p,{children:["If the retention period is set to ",(0,s.jsx)(t.strong,{children:"0"}),", the following logic will be applied:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Audit data for SQL Server, file servers, Windows Server:"})," only data stored by the last ",(0,s.jsx)(t.strong,{children:"2"})," data collection sessions will be preserved."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"User activity data:"})," only data stored by the last ",(0,s.jsx)(t.strong,{children:"7"})," data collection sessions will be preserved."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Other data sources:"})," only data stored by the last ",(0,s.jsx)(t.strong,{children:"4"})," data collection sessions will be preserved."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"capacity",children:"Capacity"}),"\n",(0,s.jsx)(t.p,{children:"To examine the repository capacity and daily growth, use the Long-Term Archive Capacity of the Health Status dashboard."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"healthstatusdashboard_thumb_0_0",src:r(994304).A+"",width:"1136",height:"731"})}),"\n",(0,s.jsxs)(t.p,{children:["To estimate the amount of activity records collected and stored to the repository day by day, use the ",(0,s.jsx)(t.a,{href:"/docs/auditor/auditor/admin/healthstatus/dashboard/activityrecordstatistics",children:"Activity Records Statistics"})," widget. Click View details to see how many activity records were produced by each data source, collected and saved to the Long-Term Archive and to the database."]}),"\n",(0,s.jsx)(t.p,{children:"Netwrix Auditor will inform you if you are running out of space on a system disk where the repository is stored by default \u2014 you will see this information in the Health Status dashboard, in the health summary email, and also in the events in the Netwrix Auditor health log."}),"\n",(0,s.jsxs)(t.p,{children:["When free disk space is less than ",(0,s.jsx)(t.strong,{children:"3 GB"}),", the Netwrix services responsible for audit data collection will be stopped."]}),"\n",(0,s.jsx)(t.h2,{id:"configure-long-term-archive-account",children:"Configure Long-Term Archive Account"}),"\n",(0,s.jsx)(t.p,{children:"An account used to write data to the Long-term Archive and upload report subscriptions to shared folders. By default, the LocalSystem account is used for the archive stored locally and the computer account is used for archive stored on a file share."}),"\n",(0,s.jsxs)(t.p,{children:["If you want to store the Long-term Archive on a file share, you can specify custom account in Settings>",(0,s.jsx)(t.strong,{children:"Long-Term Archive"})," in Auditor."]}),"\n",(0,s.jsx)(t.p,{children:"Starting with version 9.96, you can use Group Managed Service Account (gMSA) as the account for accessing Long-term Archive."}),"\n",(0,s.jsx)(t.p,{children:"The custom account must be granted the following rights and permissions:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"Advanced permissions on the folder where the Long-term Archive is stored:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"List folder / read data"}),"\n",(0,s.jsx)(t.li,{children:"Read attributes"}),"\n",(0,s.jsx)(t.li,{children:"Read extended attributes"}),"\n",(0,s.jsx)(t.li,{children:"Create files / write data"}),"\n",(0,s.jsx)(t.li,{children:"Create folders / append data"}),"\n",(0,s.jsx)(t.li,{children:"Write attributes"}),"\n",(0,s.jsx)(t.li,{children:"Write extended attributes"}),"\n",(0,s.jsx)(t.li,{children:"Delete subfolders and files"}),"\n",(0,s.jsx)(t.li,{children:"Read permissions"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(t.li,{children:["\n",(0,s.jsx)(t.p,{children:"On the file shares where report subscriptions are saved:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Change share permission"}),"\n",(0,s.jsx)(t.li,{children:"Create files / write data folder permission"}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Subscriptions created in the Auditor client\xa0 are uploaded to file servers under the Long-Term Archive service account as well. See the ",(0,s.jsx)(t.a,{href:"/docs/auditor/auditor/admin/subscriptions/overview",children:"Subscriptions"})," topic for additional information."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"assign-permissions-on-the-long-term-archive-folder",children:"Assign Permissions on the Long-Term Archive Folder"}),"\n",(0,s.jsx)(t.p,{children:"The procedure below applies to Windows Server 2012 R2 and above and may vary slightly depending on your OS."}),"\n",(0,s.jsx)(t.p,{children:"Follow the steps to assign permissions on the Long-Term Archive folder:"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 1 \u2013"})," Navigate to a folder where the Long-Term Archive will be stored, right-click it and select Properties."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 2 \u2013"})," In the ",(0,s.jsxs)(t.strong,{children:[(0,s.jsx)(t.code,{children:"<Folder_name>"})," Properties"]})," dialog, select the ",(0,s.jsx)(t.strong,{children:"Security"})," tab and click ",(0,s.jsx)(t.strong,{children:"Advanced"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 3 \u2013"})," In the Advanced Security dialog, select the Permissions tab and click Add."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 4 \u2013"})," In the Permission Entry for ",(0,s.jsx)(t.code,{children:"<Folder_Name>"})," dialog, apply the following settings:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Specify an account as principal."}),"\n",(0,s.jsxs)(t.li,{children:["Set Type to ",(0,s.jsx)(t.em,{children:'"Allow"'}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Set Applies to to ",(0,s.jsx)(t.em,{children:'"This folder, subfolders and files"'}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Switch to the Advanced permissions section."}),"\n",(0,s.jsxs)(t.li,{children:["Check the following permissions:","\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"List folder / read data"}),"\n",(0,s.jsx)(t.li,{children:"Read attributes"}),"\n",(0,s.jsx)(t.li,{children:"Read extended attributes"}),"\n",(0,s.jsx)(t.li,{children:"Create files / write data"}),"\n",(0,s.jsx)(t.li,{children:"Create folders / append data"}),"\n",(0,s.jsx)(t.li,{children:"Write attributes"}),"\n",(0,s.jsx)(t.li,{children:"Write extended attributes"}),"\n",(0,s.jsx)(t.li,{children:"Delete subfolders and files"}),"\n",(0,s.jsx)(t.li,{children:"Read permissions"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(t.h3,{id:"assign-change-and-create-fileswrite-data-permissions-to-upload-subscriptions-to-file-shares",children:"Assign Change and Create Files/Write Data Permissions to Upload Subscriptions to File Shares"}),"\n",(0,s.jsx)(t.p,{children:"The procedure below applies to Windows Server 2012 R2 and above and may vary slightly depending on your OS."}),"\n",(0,s.jsxs)(t.p,{children:["Follow the steps to assign the ",(0,s.jsx)(t.strong,{children:"Change"})," and ",(0,s.jsx)(t.strong,{children:"Create Files/Write Data"})," permissions to upload subscriptions to file shares:"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 1 \u2013"})," Navigate to a folder where report subscriptions will be stored, right-click it and select Properties."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 2 \u2013"})," In the ",(0,s.jsxs)(t.strong,{children:[(0,s.jsx)(t.code,{children:"<Share_Name>"})," Properties"]})," dialog, select the ",(0,s.jsx)(t.strong,{children:"Sharing"})," tab and click ",(0,s.jsx)(t.strong,{children:"Advanced Sharing"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 3 \u2013"})," In the Advanced Sharing dialog, click Permissions."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 4 \u2013"})," In the Permissions for ",(0,s.jsx)(t.code,{children:"<Share_Name>"})," dialog, select a principal or add a new, then check the Allow flag next to Change."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 5 \u2013"})," Apply settings and return to the ",(0,s.jsxs)(t.strong,{children:[(0,s.jsx)(t.code,{children:"<Share_Name>"})," Properties"]})," dialog."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 6 \u2013"})," In the ",(0,s.jsxs)(t.strong,{children:[(0,s.jsx)(t.code,{children:"<Share_Name>"})," Properties"]})," dialog, select the ",(0,s.jsx)(t.strong,{children:"Security"})," tab and click ",(0,s.jsx)(t.strong,{children:"Advanced"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 7 \u2013"})," In the ",(0,s.jsxs)(t.strong,{children:["Advanced Security Settings for ",(0,s.jsx)(t.code,{children:"<Share_Name>"})]})," dialog, navigate to the ",(0,s.jsx)(t.strong,{children:"Permissions"})," tab, select a principal and click Edit, or click Add to add a new one."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Step 8 \u2013"})," Apply the following settings to your Permission Entry."]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Specify a Netwrix Auditor user as principal."}),"\n",(0,s.jsxs)(t.li,{children:["Set Type to ",(0,s.jsx)(t.em,{children:'"Allow"'}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["Set Applies to to ",(0,s.jsx)(t.em,{children:'"This folder, subfolders and files"'}),"."]}),"\n",(0,s.jsx)(t.li,{children:"Check Create files / write data in the Advanced permissions section."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"The users who are going to access report subscriptions must be granted read access to these shares. Netwrix recommends you to create a dedicated folder and grant access to the entire Netwrix Auditor Client Users group or any other group assigned the Global reviewer role in Auditor."}),"\n",(0,s.jsx)(t.h2,{id:"system-health",children:"System Health"}),"\n",(0,s.jsxs)(t.p,{children:["Long-Term Archive is a file-based storage where Auditor saves the collected activity records. By default, it is located on the system drive at ",(0,s.jsx)(t.code,{children:"%PROGRAMDATA%\\Netwrix Auditor\\Data"})," and keeps data for 120 months. You may want to modify these settings, for example, move the storage from the system drive to another location. The Long-Term Archive widget will help you to monitor the Long-Term Archive capacity. The widget displays the current size and daily increase of the Long-Term Archive, and the remaining free space on the target drive."]}),"\n",(0,s.jsxs)(t.p,{children:["To open the Long-Term Archive settings, click the corresponding link. Then you will be able to adjust the settings as necessary. See the ",(0,s.jsx)(t.a,{href:"/docs/auditor/auditor/admin/settings/longtermarchive",children:"Long-Term Archive"})," topic for additional information."]})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},839576:(e,t,r)=>{r.d(t,{A:()=>i});const i=r.p+"assets/images/archive_modify_settings_thumb_0_0-ddb15e6d52bd18ffd03f1e30b98081fe.webp"},994304:(e,t,r)=>{r.d(t,{A:()=>i});const i=r.p+"assets/images/healthstatusdashboard_thumb_0_0-15d79b906d8bd55657b8136cf299b298.webp"}}]);