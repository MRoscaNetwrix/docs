"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[911881],{28453:(e,o,r)=>{r.d(o,{R:()=>i,x:()=>a});var s=r(296540);const t={},n=s.createContext(t);function i(e){const o=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(n.Provider,{value:o},e.children)}},190663:(e,o,r)=>{r.d(o,{A:()=>s});const s=r.p+"assets/images/1326_3_3e0331eadab3e6c272573b5c3b67e23c-12ed4bf4db8ccbb82657144dca6693ff.webp"},215339:(e,o,r)=>{r.d(o,{A:()=>s});const s=r.p+"assets/images/1326_1_2c5259c2472101dd55c56da8d1dbdb33-0afb90f3c1a6f82fd6a4e67ddf00395b.webp"},606151:(e,o,r)=>{r.r(o),r.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"policypak/troubleshooting/browserrouter/default","title":"Why is Browser Router not showing up as the OS Default Browser since Feb24/March24 Monthly windows patches KB5035845?","description":"Updated 9/12/2024: Starting from CSE version 24.9 and later this problem has been overcome. If you\'re using CSE version 24.9 and later, there is no need to follow these steps. Only use these steps if you\'re using a CSE before version 24.9.","source":"@site/docs/policypak/policypak/troubleshooting/browserrouter/default.md","sourceDirName":"policypak/troubleshooting/browserrouter","slug":"/policypak/troubleshooting/browserrouter/default","permalink":"/docs/policypak/policypak/troubleshooting/browserrouter/default","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/policypak/policypak/troubleshooting/browserrouter/default.md","tags":[],"version":"current","frontMatter":{},"sidebar":"policyPakSidebar","previous":{"title":"I\'m having a \\"Browser Router Emergency\\" or some kind of critical website incompatibility. What can I do?","permalink":"/docs/policypak/policypak/troubleshooting/browserrouter/criticalwebsiteincompatibility"},"next":{"title":"Why does Endpoint Policy Manager PPExtensionService.exe make a call out to DNS?","permalink":"/docs/policypak/policypak/troubleshooting/browserrouter/dnscall"}}');var t=r(474848),n=r(28453);const i={},a="Why is Browser Router not showing up as the OS Default Browser since Feb24/March24 Monthly windows patches KB5035845?",c={},l=[];function d(e){const o={a:"a",code:"code",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"why-is-browser-router-not-showing-up-as-the-os-default-browser-since-feb24march24-monthly-windows-patches-kb5035845",children:"Why is Browser Router not showing up as the OS Default Browser since Feb24/March24 Monthly windows patches KB5035845?"})}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Updated 9/12/2024"}),": Starting from CSE version 24.9 and later this problem has been overcome. If you're using CSE version 24.9 and later, there is no need to follow these steps. Only use these steps if you're using a CSE before version 24.9."]}),"\n",(0,t.jsx)(o.p,{children:"Netwrix Endpoint Policy Manager (formerly PolicyPak) Browser Router and Endpoint Policy Manager File Associations Manager will generally still work as expected.\nHowever, since the Feb24/March24 Monthly windows patches KB5035845, Edge appears to \u201ctake over and won\u2019t let go\u201d of:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"File Association PDF"}),"\n",(0,t.jsx)(o.li,{children:"Protocol: HTTP"}),"\n",(0,t.jsx)(o.li,{children:"Protocol: HTTPS"}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"What will work:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"Browser to Browser Routing"}),"\n",(0,t.jsx)(o.li,{children:"File Associations for everything except PDF"}),"\n"]}),"\n",(0,t.jsx)(o.p,{children:"What won\u2019t work:"}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"Browser Router won\u2019t be registered as \u201cEndpoint Policy Manager Browser Router Agent\u201d within the OS. You\u2019ll see Edge."}),"\n",(0,t.jsxs)(o.li,{children:["Browser Router \u201cDefault Policy\u201d type is not honored as expected and anything set to \u201cDefault Browser\u201d will be passed onward to Edge (instead of what you might have set it to, say, Firefox, Chrome, etc). Use this article to understand \u201cEndpoint Policy Manager Browser Router Default Policy\u201d type ",(0,t.jsx)(o.a,{href:"/docs/policypak/policypak/browserrouter/defaultbrowser/defined",children:'What is meant by "Default Browser" within Endpoint Policy Manager Browser router?'})]}),"\n",(0,t.jsx)(o.li,{children:"Delivering File Associations specifically for PDF for Endpoint Policy Manager File Associations Manager"}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:["You will also get the same experience if you attempt to use PolicyPak File Associations Manager to change HTTP or HTTPS, even if you\u2019re not using PolicyPak Browser Router. See the ",(0,t.jsx)(o.a,{href:"/docs/policypak/policypak/fileassociations/defaultbrowser",children:"Can I use Endpoint Policy ManagerBrowser Router and/or Endpoint Policy Manager File Associations Manager to set the default browser?"})," topic for additional information."]}),"\n",(0,t.jsx)(o.p,{children:"Troubleshooting:"}),"\n",(0,t.jsx)(o.p,{children:"Here\u2019s an example log output:"}),"\n",(0,t.jsxs)(o.p,{children:["The ",(0,t.jsx)(o.code,{children:"ppSwitched_onLogon"})," log file shows \u201cDefault Browser: MicrosoftEdge.EXE"]}),"\n",(0,t.jsx)(o.p,{children:"Agent Display Name: 'Managed by your organization (Browser Name)"}),"\n",(0,t.jsx)(o.p,{children:"Use actual default browser icon: true"}),"\n",(0,t.jsx)(o.p,{children:"Later in that file it shows an error:"}),"\n",(0,t.jsx)(o.p,{children:"Updating system settings and registry entries"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"{  \n\xa0\xa0\xa0\xa0Loaded browser router policies state for user 'sxr'. Active: true  \n\xa0\xa0\xa0\xa0Loaded browser router policies state for any user. Active: true  \n\xa0\xa0\xa0\xa0Updating 'Browser Router' browser settings  \n\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0Going to apply user side settings.  \n\xa0\xa0\xa0\xa0\xa0\xa0Going to save default browser selected by user.  \n\xa0\xa0\xa0\xa0\xa0\xa0Default browser selected by user: 'MSEdgeHTM'  \n\xa0\xa0\xa0\xa0\xa0\xa0Default browser selected by user: 'MSEdgeHTM'  \n\xa0\xa0\xa0\xa0\xa0\xa0Changing program associations  \n\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Error: Couldn't write association for 'http'. ProgId: 'PPBRNURL', Error code: 5  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Error: Couldn't write association for 'https'. ProgId: 'PPBRNURL', Error code: 5  \n\xa0\xa0\xa0\xa0\xa0\xa0} // End of Changing program associations, elapsed time: 00:00:00.078\xa0  \n\n"})}),"\n",(0,t.jsx)(o.p,{children:"However, there is a workaround for both scenarios if your computers are DOMAIN JOINED."}),"\n",(0,t.jsx)(o.p,{children:"You can Revert to Legacy methods which have some detractors. Read the Explain/Help text for each of these two policy settings to decide if you want to revert back one or both products to Legacy method."}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"CAUTION:"})," The Legacy methods will not work if your endpoints are only using PolicyPak Cloud or only using an MDM service like Intune. Legacy mode only works when the machine is domain joined."]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"NOTE:"})," After setting these settings and the policy refresh occurs to get these policies, endpoints may still need two logoffs and/or reboots for this to kick in."]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"1326_1_2c5259c2472101dd55c56da8d1dbdb33",src:r(215339).A+"",width:"1431",height:"790"})}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"1326_2_8f4ae9cf7f0bba8ddccb128640467c25",src:r(660900).A+"",width:"1429",height:"727"})}),"\n",(0,t.jsx)(o.p,{children:"Update 4/8/2024:"}),"\n",(0,t.jsx)(o.p,{children:"It was identified that UCPD.sys driver is causing the issue with default file association for .PDF and protocol association for HTTP/HTTPS."}),"\n",(0,t.jsx)(o.p,{children:"UCPD.sys affects the following registry paths responsible for the associations to file extensions and protocols:"}),"\n",(0,t.jsx)(o.p,{children:"Workaround 1 using Endpoint Policy Manager Scripts & Triggers"}),"\n",(0,t.jsx)(o.p,{children:"To fix the issue, you need to perform two steps:"}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Step 1 \u2013"})," Create a Powershell script which will disable the UCPD.sys driver via registry."]}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.code,{children:"New-ItemProperty -Path \u201cHKLM:\\SYSTEM\\CurrentControlSet\\Services\\UCPD\u201d -Name \u201cStart\u201d -Value 4 -PropertyType DWORD -Force"})}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"This script is setting value 4 to UCPD service to be disabled"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.code,{children:'Unregister-ScheduledTask -TaskName "UCPD velocity"'})}),"\n",(0,t.jsxs)(o.ul,{children:["\n",(0,t.jsx)(o.li,{children:"This part will unregister the scheduled task to check and re-deploy UCPD service at startup"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(o.li,{children:["\n",(0,t.jsx)(o.p,{children:"Disable UCPD.sys driver"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:'New-ItemProperty -Path \u201cHKLM:\\SYSTEM\\CurrentControlSet\\Services\\UCPD\u201d -Name \u201cStart\u201d -Value 4 -PropertyType DWORD -Force  \nUnregister-ScheduledTask -TaskName "UCPD velocity"  \nUnregister-ScheduledTask -TaskName "Pre-staged app cleanup"\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Step 2 \u2013"})," Deploy the script via Endpoint Policy Manager Scripts Manager using the hints from the screen shot below."]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"1326_3_3e0331eadab3e6c272573b5c3b67e23c",src:r(190663).A+"",width:"2772",height:"1524"})}),"\n",(0,t.jsx)(o.p,{children:"Workaround 2 using fsLogix (Microsoft Tools)"}),"\n",(0,t.jsx)(o.p,{children:"You may also use Microsoft fsLogix if already installed on servers or workstations. You may use the following redirect rules which should overcome the concern."}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"NOTE:"})," Do not use both Workaround 1 and 2 at the same time."]}),"\n",(0,t.jsx)(o.p,{children:(0,t.jsx)(o.img,{alt:"1326_4_3a4d59894f3cd6623b958202447b1136",src:r(959472).A+"",width:"977",height:"549"})})]})}function h(e={}){const{wrapper:o}={...(0,n.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},660900:(e,o,r)=>{r.d(o,{A:()=>s});const s=r.p+"assets/images/1326_2_8f4ae9cf7f0bba8ddccb128640467c25-4793d33a7ac516b502b4ab918c22ccf7.webp"},959472:(e,o,r)=>{r.d(o,{A:()=>s});const s=r.p+"assets/images/1326_4_3a4d59894f3cd6623b958202447b1136-49b8af34abc2438e17a347cf070c9cb1.webp"}}]);