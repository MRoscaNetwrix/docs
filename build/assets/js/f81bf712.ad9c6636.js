"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[742540],{28453:(e,t,r)=>{r.d(t,{R:()=>a,x:()=>o});var i=r(296540);const n={},s=i.createContext(n);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(s.Provider,{value:t},e.children)}},596059:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>l,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"auditor/api/searchactivityrecords","title":"Search Activity Records","description":"The search functionality in the Netwrix Auditor Integration API reproduces interactive search available in the Netwrix Auditor client. See the Netwrix Auditor Intelligence Guide and View and Search Collected Data topic for detailed instruction on how to search and filter audit data.","source":"@site/docs/auditor/auditor/api/searchactivityrecords.md","sourceDirName":"auditor/api","slug":"/auditor/api/searchactivityrecords","permalink":"/docs/auditor/auditor/api/searchactivityrecords","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/api/searchactivityrecords.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Retrieve Activity Records","permalink":"/docs/auditor/auditor/api/retrieveactivityrecords"},"next":{"title":"Security","permalink":"/docs/auditor/auditor/api/security"}}');var n=r(474848),s=r(28453);const a={},o="Search Activity Records",c={},d=[{value:"Endpoint",id:"endpoint",level:2},{value:"Request Parameters",id:"request-parameters",level:2},{value:"Response",id:"response",level:2},{value:"Usage Example\u2014Retrieve All Activity Records Matching Search Criteria",id:"usage-exampleretrieve-all-activity-records-matching-search-criteria",level:2}];function h(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"search-activity-records",children:"Search Activity Records"})}),"\n",(0,n.jsxs)(t.p,{children:["The search functionality in the Netwrix Auditor Integration API reproduces interactive search available in the Netwrix Auditor client. See the ",(0,n.jsx)(t.a,{href:"https://www.netwrix.com/download/documents/Netwrix_Auditor_User_Guide.pdf",children:"Netwrix Auditor Intelligence Guide"})," and ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/admin/search/overview",children:"View and Search Collected Data"})," topic for detailed instruction on how to search and filter audit data."]}),"\n",(0,n.jsxs)(t.p,{children:["As the interactive search in the Netwrix Auditor client, this REST API\xa0endpoint allows you to retrieve Activity Records matching a certain criteria. You can create your own set of filters in the Search parameters file. See the ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/searchparameters",children:"Search Parameters"})," topic for more information. Activity Records are retrieved according to the account's delegated scope."]}),"\n",(0,n.jsx)(t.h2,{id:"endpoint",children:"Endpoint"}),"\n",(0,n.jsxs)(t.p,{children:["To retrieve Activity Records matching a certain criteria, send a POST request containing search parameters (also may include a Continuation mark). See the ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/searchparameters",children:"Search Parameters"})," topic for more information."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Method"}),(0,n.jsx)(t.th,{children:"Endpoint"}),(0,n.jsx)(t.th,{children:"POST Data"})]})}),(0,n.jsx)(t.tbody,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"POST"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"https://{host:port}/netwrix/api/v1/activity_records/search{?format=json}{&count=Number}"})}),(0,n.jsx)(t.td,{children:(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/searchparameters",children:"Search Parameters"})})]})})]}),"\n",(0,n.jsx)(t.h2,{id:"request-parameters",children:"Request Parameters"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Parameter"}),(0,n.jsx)(t.th,{children:"Mandatory"}),(0,n.jsx)(t.th,{children:"Description"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"host:port"})}),(0,n.jsx)(t.td,{children:"Yes"}),(0,n.jsxs)(t.td,{children:["Replace with the IP address or a name of your Netwrix Auditor Server host and port (e.g., ",(0,n.jsx)(t.em,{children:"172.28.6.15:9699"}),", ",(0,n.jsx)(t.em,{children:"stationwin12:9699"}),", ",(0,n.jsx)(t.em,{children:"WKSWin2012.enterprise.local:9699"}),").  With enabled HTTPS, provide the computer name as it appears in certificate properties."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"format=json"})}),(0,n.jsx)(t.td,{children:"No"}),(0,n.jsx)(t.td,{children:"Add this parameter to retrieve data in JSON format. Otherwise, XML-formatted Activity Records will be returned."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"count=Number"})}),(0,n.jsx)(t.td,{children:"No"}),(0,n.jsxs)(t.td,{children:["Add this parameter to define the number of Activity Records to be exported. Replace ",(0,n.jsx)(t.code,{children:"Number"})," with a number (e.g.,",(0,n.jsx)(t.code,{children:" ?count=1500"}),")."]})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:["Optional parameters (format and count) can be provided in any order. The first parameter must start with ?, others are joined with &, no spaces required (e.g., ",(0,n.jsx)(t.code,{children:"?format=json&count=1500"}),")."]}),"\n",(0,n.jsx)(t.h2,{id:"response",children:"Response"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Request Status"}),(0,n.jsx)(t.th,{children:"Response"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Success"}),(0,n.jsx)(t.td,{children:"The HTTP status code in the response header is 200 OK. The response body contains Activity Records and Continuation Mark."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Error"}),(0,n.jsx)(t.td,{children:"The header status code is an error code. Depending on the error code, the response body may contain an error object."})]})]})]}),"\n",(0,n.jsx)(t.h2,{id:"usage-exampleretrieve-all-activity-records-matching-search-criteria",children:"Usage Example\u2014Retrieve All Activity Records Matching Search Criteria"}),"\n",(0,n.jsx)(t.p,{children:"Follow the steps- to retrieve all Activity Records matching search criteria."}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1 \u2013"})," Send a POST request containing search parameters. See the ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/searchparameters",children:"Search Parameters"})," topic for more information."]}),"\n",(0,n.jsx)(t.p,{children:"As an example, this request retrieves Activity Records where administrator added new objects to the Active Directory domain. Groups and group policies are not taken into account. Changes could only occur between September 16, 2016 and March 16, 2017."}),"\n",(0,n.jsxs)(t.p,{children:["Ensure to pass information about transferred data, including ",(0,n.jsx)(t.code,{children:"Content-Type:application/xml"})," or ",(0,n.jsx)(t.code,{children:"application/json "}),"and encoding. The syntax greatly depends on the tool you use."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2 \u2013"})," Receive the response. Activity Records are retrieved according to the account's delegated scope. Below is an example of a successful search request. The status is 200 OK. For XML, a response body contains the ",(0,n.jsx)(t.code,{children:"ActivityRecordList"})," root element with Activity Records matching filter criteria and a Continuation mark inside. For JSON, a response body contains the ",(0,n.jsx)(t.code,{children:"ActivityRecordList"})," array with Activity Records matching filter criteria and collected in braces ",", and a Continuation mark."]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.th,{})})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:"XML"})}),(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:'<?xml version="1.0" standalone="yes"?> `````` <ActivityRecordList xmlns="http://schemas.netwrix.com/api/v1/activity_records/"> `````` <ContinuationMark>PG5yPjxuIG49IntFNzA...PjwvYT48L24+PC9ucj4A</ContinuationMark> `````` <ActivityRecord> `````` <MonitoringPlan> `````` <Name>AD Monitoring</Name> `````` <ID>{42F64379-163E-4A43-A9C5-4514C5A23798}</ID> `````` </MonitoringPlan> `````` <DataSource>Active Directory</DataSource> `````` <Item> `````` <Name>enterprise.local (Domain)</Name> `````` </Item> `````` <ObjectType>user</ObjectType> `````` <RID>20160215110503420B9451771F5964A9EAC0A5F35307EA155</RID> `````` <What>\\local\\enterprise\\Users\\Jason Smith</What> `````` <Action>Added</Action> `````` <When>2017-02-14T15:42:34Z</When> `````` <Where>EnterpriseDC1.enterprise.local</Where> `````` <Who>ENTERPRISE\\Administrator</Who> `````` <Workstation>EnterpriseDC1.enterprise.local</Workstation> `````` </ActivityRecord> `````` <ActivityRecord>...</ActivityRecord> `````` <ActivityRecord>...</ActivityRecord> `````` </ActivityRecordList>'})})}),(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:"JSON"})}),(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:'{ `````` "ActivityRecordList": [ `````` { `````` "Action": "Added", `````` "MonitoringPlan" : { `````` "ID": "{42F64379-163E-4A43-A9C5-4514C5A23798}", `````` "Name": "AD Monitoring" `````` }, `````` "DataSource": "Active Directory", `````` "Item": {"Name": "enterprise.local (Domain)"}, `````` "ObjectType": "user", `````` "RID": "20160215110503420B9451771F5964A9EAC0A5F35307EA155", `````` "What": "\\\\local\\\\enterprise\\\\Users\\\\Jason Smith", `````` "When": "2017-02-14T15:42:34Z", `````` "Where": "EnterpriseDC1.enterprise.local", `````` "Who": "ENTERPRISE\\\\Administrator", `````` "Workstation": "EnterpriseDC1.enterprise.local" `````` }, `````` {...}, `````` {...} `````` ], `````` "ContinuationMark": "PG5yPjxuIG49IntFNzA...PjwvYT48L24+PC9ucj4A" `````` }'})})})]})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 3 \u2013"})," Continue retrieving Activity Records. Send a POST request containing your search parameters and this Continuation mark to the same endpoint. ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/api/postdata/continuationmark",children:"Continuation Mark"})]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.th,{})})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:"XML"})}),(0,n.jsx)(t.tr,{children:(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:'curl -H "Content-Type:application/xml; Charset=UTF-8" https://WKSWin2012:9699/netwrix/api/v1/activity_records/search -u Enterprise\\NetwrixUser:NetwrixIsCool --data-binary @C:\\APIdocs\\Search.xml'})," ",(0,n.jsx)(t.code,{children:'<?xml version="1.0" standalone="yes"?> `````` <ActivityRecordSearch xmlns="http://schemas.netwrix.com/api/v1/activity_records/"> `````` <ContinuationMark>PG5yPjxuIG49IntFNzA...PjwvYT48L24+PC9ucj4A+PC9ucj4A</ContinuationMark> `````` <FilterList> `````` <Who>Administrator</Who> `````` <DataSource>Active Directory</DataSource> `````` <Action>Added</Action> `````` <ObjectType Operator="DoesNotContain">Group</ObjectType> `````` <When> `````` <From>2016-09-16T16:30:00+11:00</From> `````` <To>2017-03-16T00:00:00Z</To> `````` </When> `````` </FilterList> `````` </ActivityRecordSearch>'})]})}),(0,n.jsx)(t.tr,{children:(0,n.jsx)(t.td,{children:"JSON"})}),(0,n.jsx)(t.tr,{children:(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:'curl -H "Content-Type:application/json; Charset=UTF-8" https://WKSWin2012:9699/netwrix/api/v1/activity_records/search?format=json -u Enterprise\\NetwrixUser:NetwrixIsCool --data-binary @C:\\APIdocs\\Search.json'})," ",(0,n.jsx)(t.code,{children:'{ `````` "ContinuationMark": "PG5yPjxuIG49IntFNzA...PjwvYT48L24+PC9ucj4A+PC9ucj4A", `````` "FilterList": { `````` "Who": "Administrator", `````` "DataSource": "Active Directory", `````` "Action": "Added", `````` "ObjectType": { "DoesNotContain": "Group"}, `````` "When": { `````` "From": "2016-09-16T16:30:00+11:00", `````` "To": "2017-03-16T00:00:00Z" `````` } `````` } `````` }'})]})})]})]}),"\n",(0,n.jsxs)(t.p,{children:["Ensure to pass information about transferred data, including ",(0,n.jsx)(t.code,{children:"Content-Type:application/xml"})," or ",(0,n.jsx)(t.code,{children:"application/json "}),"and encoding. The syntax greatly depends on the tool you use."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 4 \u2013"})," Receive the next response. On success, the status is 200 OK. For XML, a response body contains the ",(0,n.jsx)(t.code,{children:"ActivityRecordList"})," root element with next Activity Records and a new Continuation mark inside. For JSON, a response body contains the ",(0,n.jsx)(t.code,{children:"ActivityRecordSearch"})," array with next Activity Records collected in braces "," and a new Continuation mark."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 5 \u2013"})," Continue retrieving Activity Records. Send POST requests containing your search parameters with new Continuation marks until you receive a 200 OK response with no Activity Records inside the ",(0,n.jsx)(t.code,{children:"ActivityRecordList"}),". It means you retrieved all Activity Records matching your search criteria."]})]})}function l(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);