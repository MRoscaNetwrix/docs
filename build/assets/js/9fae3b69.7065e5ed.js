"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[887548],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var o=n(296540);const i={},r=o.createContext(i);function a(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:t},e.children)}},292992:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"policypak/troubleshooting/log/leastprivilege/restorecontextmenu","title":"Restore Windows 11 Specific Right-Click Context Menu","description":"The Endpoint Policy Manager team is working to fix a known bug that occurs when upgrading one version to the latest version of the Endpoint Policy Manager. The CSE will prevent the Windows 11-specific Least Privilege Manager context menu from displaying.","source":"@site/docs/policypak/policypak/troubleshooting/log/leastprivilege/restorecontextmenu.md","sourceDirName":"policypak/troubleshooting/log/leastprivilege","slug":"/policypak/troubleshooting/log/leastprivilege/restorecontextmenu","permalink":"/docs/policypak/policypak/troubleshooting/log/leastprivilege/restorecontextmenu","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/policypak/policypak/troubleshooting/log/leastprivilege/restorecontextmenu.md","tags":[],"version":"current","frontMatter":{},"sidebar":"policyPakSidebar","previous":{"title":"What log can help me determine why an application (MSI, etc.) was ALLOWED, ELEVATED or BLOCKED?","permalink":"/docs/policypak/policypak/troubleshooting/log/leastprivilege/determinewhy"},"next":{"title":"How do I manually collect logs if PPLOGS as User or Admin does not launch?","permalink":"/docs/policypak/policypak/troubleshooting/log/manual"}}');var i=n(474848),r=n(28453);const a={},s="Restore Windows 11 Specific Right-Click Context Menu",l={},c=[];function p(e){const t={code:"code",h1:"h1",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"restore-windows-11-specific-right-click-context-menu",children:"Restore Windows 11 Specific Right-Click Context Menu"})}),"\n",(0,i.jsx)(t.p,{children:"The Endpoint Policy Manager team is working to fix a known bug that occurs when upgrading one version to the latest version of the Endpoint Policy Manager. The CSE will prevent the Windows 11-specific Least Privilege Manager context menu from displaying."}),"\n",(0,i.jsx)(t.p,{children:"The workaround is to run as Admin or System (or using Endpoint Policy Manager Scripts Manager). Only perform this workaround once. It will restore the Windows 11 Start Menu for the Least Privilege Manager."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Restoring the Right-Click Context Menu",src:n(931054).A+"",width:"3631",height:"2930"})}),"\n",(0,i.jsx)(t.p,{children:"Use Endpoint Policy Manager Scripts Manager to perform this action, one time, on the computer side."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"NOTE:"})," There are two PowerShell scripts. Select the script to use according to the Endpoint Policy Manager configuration that is implemented. It is recommended to perform a small-scale test before rolling this update out to the entire organization."]}),"\n",(0,i.jsx)(t.p,{children:"Non-domain-Joined Machines"}),"\n",(0,i.jsx)(t.p,{children:"Use the following PowerShell script for non-domain-joined machines (typically Endpoint Policy Manager Cloud or Endpoint Policy Manager configured with an MDM service like Intune):"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"$RegistryPath = 'HKLM:\\Software\\Policies\\PolicyPak\\Client-Side Extensions\\{58DE0268-6384-49E0-A333-20EC46654B82}\\UI Settings'  \n$Name = 'DisableWindows11ModernContextMenu'  \n$Value = '1'  \nIf (-NOT (Test-Path $RegistryPath)) {  \nNew-Item -Path $RegistryPath -Force | Out-Null  \n}  \nNew-ItemProperty -Path $RegistryPath -Name $Name -Value $Value -PropertyType DWORD -Force  \nppupdate  \nStart-Sleep -Seconds 10  \n$Value = '0'  \nNew-ItemProperty -Path $RegistryPath -Name $Name -Value $Value -PropertyType DWORD -Force  \nppupdate\n"})}),"\n",(0,i.jsx)(t.p,{children:"Domain-Joined Machines"}),"\n",(0,i.jsx)(t.p,{children:"Use the following Powershell script for domain-joined machines:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"$RegistryPath = 'HKLM:\\Software\\Policies\\PolicyPak\\Client-Side Extensions\\{58DE0268-6384-49E0-A333-20EC46654B82}\\UI Settings'  \n$Name = 'DisableWindows11ModernContextMenu'  \n$Value = '1'  \nIf (-NOT (Test-Path $RegistryPath)) {  \nNew-Item -Path $RegistryPath -Force | Out-Null  \n}  \nNew-ItemProperty -Path $RegistryPath -Name $Name -Value $Value -PropertyType DWORD -Force  \ngpupdate  \n$Value\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0= '0'  \nNew-ItemProperty -Path $RegistryPath -Name $Name -Value $Value -PropertyType DWORD -Force  \ngpupdate\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},931054:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/restorecontextmenu-ad2a8417b5954f4e35668c6b5cd18c6f.webp"}}]);