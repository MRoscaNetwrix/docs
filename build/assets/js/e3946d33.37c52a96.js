"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[949908],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var r=n(296540);const s={},i=r.createContext(s);function a(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(i.Provider,{value:t},e.children)}},731365:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"usercube/integration-guide/network-configuration/agent-configuration/azure-key-vault/index","title":"Azure Key Vault","description":"Prerequisites","source":"@site/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/azure-key-vault/index.md","sourceDirName":"usercube/integration-guide/network-configuration/agent-configuration/azure-key-vault","slug":"/usercube/integration-guide/network-configuration/agent-configuration/azure-key-vault/","permalink":"/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/azure-key-vault/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/azure-key-vault/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSidebar","previous":{"title":"appsettings.agent","permalink":"/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings-agent/"},"next":{"title":"CyberArk\'s AAM Credential Providers","permalink":"/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/cyberark-application-access-manager-credential-providers/"}}');var s=n(474848),i=n(28453);const a={},o="Azure Key Vault",c={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Compatible Settings",id:"compatible-settings",level:2},{value:"Write Settings to the Vault",id:"write-settings-to-the-vault",level:2},{value:"Configure Usercube",id:"configure-usercube",level:2}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"azure-key-vault",children:"Azure Key Vault"})}),"\n",(0,s.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(t.p,{children:"First, Identity Manager recommends reading:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/key-vault/general/overview",children:"Azure Key Vault's overview documentation"})," and ",(0,s.jsx)(t.a,{href:"https://docs.microsoft.com/azure/key-vault/general/basic-concepts",children:"Basic concepts"}),";"]}),"\n",(0,s.jsxs)(t.li,{children:["How to ",(0,s.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/key-vault/general/quick-create-portal#sign-in-to-azure-and-create-a-vault",children:"sign in to Azure and create a vault"}),";"]}),"\n",(0,s.jsxs)(t.li,{children:["About ",(0,s.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/key-vault/secrets/about-secrets",children:"Azure Key Vault's secrets"})," because secrets are the data that Identity Manager needs to collect."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"compatible-settings",children:"Compatible Settings"}),"\n",(0,s.jsxs)(t.p,{children:["Every key from appsettings.agent.json that has a string value can be saved as a secret into Microsoft Entra ID (formerly Azure AD) Key Vault. See the ",(0,s.jsx)(t.a,{href:"/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings-agent/",children:"appsettings.agent"})," topic for additional information."]}),"\n",(0,s.jsxs)(t.p,{children:["Check the examples in connectors' credential protection sections. See the ",(0,s.jsx)(t.a,{href:"/docs/usercube/usercube/integration-guide/connectors/references-connectors/servicenowentitymanagement/",children:"\nServiceNow\n"})," topic for additional information."]}),"\n",(0,s.jsx)(t.h2,{id:"write-settings-to-the-vault",children:"Write Settings to the Vault"}),"\n",(0,s.jsxs)(t.p,{children:["After creating the Azure Key Vault, open its page on Azure's portal and ",(0,s.jsx)(t.a,{href:"https://docs.microsoft.com/en-us/azure/key-vault/secrets/quick-create-portal#add-a-secret",children:"add a secret"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"The important part of adding a secret in Azure Key Vault is defining its name and value:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["As secrets' names can only contain alphanumeric characters and double dashes (",(0,s.jsx)(t.code,{children:"--"}),") as separator, the keys from the appsettings.agent.json file must contain only alphanumeric characters too;"]}),"\n",(0,s.jsx)(t.li,{children:"Secrets' values are simply the value associated with the key in the JSON file."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"For example, for the Active Directory:"}),"\n",(0,s.jsxs)(t.p,{children:["Code attributes enclosed with ",(0,s.jsx)(t.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0appsettings.agent.json  \n{  \n\xa0\xa0...  \n\xa0\xa0"Connections": {  \n\xa0\xa0\xa0\xa0...  \n\xa0\xa0\xa0\xa0"ADExport": {  \n\xa0\xa0\xa0\xa0\xa0\xa0"Servers": [  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Server": "<paris.contoso.com>",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"BaseDN": "<DC=paris,DC=com>"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0},  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0{  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"Server": "<marseille.contoso.com>",  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"BaseDN": "<DC=defense,DC=marseille,DC=com>"  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0}  \n\xa0\xa0\xa0\xa0\xa0\xa0],  \n\xa0\xa0\xa0\xa0\xa0\xa0"AuthType": "<Basic>",  \n\xa0\xa0\xa0\xa0\xa0\xa0"Login": "<login123>",  \n\xa0\xa0\xa0\xa0\xa0\xa0"Password": "<password123>",  \n\xa0\xa0\xa0\xa0\xa0\xa0"Filter": "(objectclass=*)",  \n\xa0\xa0\xa0\xa0\xa0\xa0"EnableSSL": "false",  \n\xa0\xa0\xa0\xa0}  \n\xa0\xa0}  \n}  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,s.jsxs)(t.p,{children:["To save the login to Azure Key Vault, create a secret whose name and value are respectively ",(0,s.jsx)(t.code,{children:"<Connections--ADExport--Login>"})," and ",(0,s.jsx)(t.code,{children:"<login123>"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["To save the second server, create a secret whose name and value are respectively ",(0,s.jsx)(t.code,{children:"<Connections--ADExport--Servers--1--Server>"})," and ",(0,s.jsx)(t.code,{children:"<marseille.contoso.com>"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.em,{children:"Remember,"}),"  the index of the first element is ",(0,s.jsx)(t.code,{children:"<0>"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"This way, values from the Azure Key Vault take priority over the values from the appsettings files."}),"\n",(0,s.jsx)(t.p,{children:"For example, if Login exists in both Azure Key Vault and appsettings.agent.json, then the value from Azure Key Vault is used."}),"\n",(0,s.jsx)(t.h2,{id:"configure-usercube",children:"Configure Usercube"}),"\n",(0,s.jsxs)(t.p,{children:["Netwrix Identity Manager (formerly Usercube)uses the default Azure credentials to connect to the vault. Since the implementation of default Azure credential is controlled by Microsoft see the ",(0,s.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/dotnet/api/azure.identity.defaultazurecredential?view=azure-dotnet",children:"Default Azure Credential"})," page additional information."]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Name"}),(0,s.jsx)(t.th,{children:"Type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsx)(t.tbody,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Vault   required"}),(0,s.jsx)(t.td,{children:"String"}),(0,s.jsxs)(t.td,{children:["DNS Name found on the page of the vault in Azure's portal.  ",(0,s.jsx)(t.em,{children:"Remember,"})," usually in the format is ",(0,s.jsx)(t.code,{children:"<https://yourVault.vault.azure.net/.>"})]})]})})]})]})}function d(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);