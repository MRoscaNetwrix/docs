"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[337467],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(296540);const i={},r=o.createContext(i);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},301363:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"usercube/integration-guide/tasks-jobs/how-tos/build-efficient-jobs/index","title":"Build Efficient Jobs","description":"This topic shows how to build efficient jobs by minimizing their costs.","source":"@site/docs/usercube/usercube/integration-guide/tasks-jobs/how-tos/build-efficient-jobs/index.md","sourceDirName":"usercube/integration-guide/tasks-jobs/how-tos/build-efficient-jobs","slug":"/usercube/integration-guide/tasks-jobs/how-tos/build-efficient-jobs/","permalink":"/docs/usercube/usercube/integration-guide/tasks-jobs/how-tos/build-efficient-jobs/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube/usercube/integration-guide/tasks-jobs/how-tos/build-efficient-jobs/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSidebar","previous":{"title":"Tasks & Jobs","permalink":"/docs/usercube/usercube/integration-guide/tasks-jobs/"},"next":{"title":"Configure an Incremental Job","permalink":"/docs/usercube/usercube/integration-guide/tasks-jobs/how-tos/configure-incremental-job/"}}');var i=t(474848),r=t(28453);const s={},a="Build Efficient Jobs",l={},c=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Rule 1: Use Scaffoldings",id:"rule-1-use-scaffoldings",level:2},{value:"Rule 2: Compute Only What&#39;s Necessary",id:"rule-2-compute-only-whats-necessary",level:2},{value:"Rule 3: Wait for Recurring Tasks",id:"rule-3-wait-for-recurring-tasks",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"build-efficient-jobs",children:"Build Efficient Jobs"})}),"\n",(0,i.jsx)(n.p,{children:"This topic shows how to build efficient jobs by minimizing their costs."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"NOTE:"})," The rules below must be followed when creating a new job, otherwise the frequent launch of this scheduled job will trigger errors in a SaaS environment."]}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsx)(n.p,{children:"In order to successfully launch a frequent job (defined as a job called more than once an hour) the following requirements need to be met:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Synchronize / Export Task in incremental mode"}),"\n",(0,i.jsx)(n.li,{children:"The UpdateEntityPropertyExpressions /ComputeCorrelationKeys/ComputeRoleModel tasks do have the SetRecentlyModifiedFlag set to true"}),"\n",(0,i.jsx)(n.li,{children:"The ComputeCorrelationKeys/UpdateEntityPropertyExpressions tasks are computed on a subset of Entity Types (not all Entity Types at once)"}),"\n",(0,i.jsx)(n.li,{children:"UpdateEntityPropertyExpressions/ComputeCorrelationKeys/ComputeRole tasks are not duplicated"}),"\n",(0,i.jsx)(n.li,{children:"SetInternalUserProfiles/ActivityInstanceActor tasks are not configured to launch"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"rule-1-use-scaffoldings",children:"Rule 1: Use Scaffoldings"}),"\n",(0,i.jsxs)(n.p,{children:["Identity Manager\xa0provides scaffoldings to simplify XML configuration by generating complex XML fragments. See the ",(0,i.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/",children:"Scaffoldings"})," topic for additional information."]}),"\n",(0,i.jsxs)(n.p,{children:["Most jobs are included in job scaffoldings, thus configured in the most optimal way. So start by using scaffoldings to build jobs. See the ",(0,i.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/jobs/",children:"\nJobs\n"})," topic for additional information."]}),"\n",(0,i.jsx)(n.p,{children:"For example, the creation from scratch of a job to perform a complete synchronization for a connector will be tedious. Instead, use Identity Manager's scaffolding, like in the following example concerning the Microsoft Entra ID (formerly Microsoft Azure AD) connector. Instead of a few dozens of lines, write only the following:"}),"\n",(0,i.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,i.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<CreateConnectorSynchroComplete DisplayName_L1="10: Microsoft Entra ID - Synchronization Complete (scaffolding)" Connector="AzureAD" JobIdentifier="AzureAD_Synchronize_Complete_Scaffolding"/>  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,i.jsxs)(n.p,{children:["See the",(0,i.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/configuration/scaffoldings/jobs/createconnectorsynchrocomplete/",children:"Create Connector Synchro Complete"}),"for additional information."]}),"\n",(0,i.jsx)(n.h2,{id:"rule-2-compute-only-whats-necessary",children:"Rule 2: Compute Only What's Necessary"}),"\n",(0,i.jsx)(n.p,{children:"Execute the tasks on the right entity types"}),"\n",(0,i.jsx)(n.p,{children:"Many tasks can be executed either on all entity types, or on a given list of entity types."}),"\n",(0,i.jsx)(n.p,{children:"Make sure to configure the tasks so that they are executed only on the relevant entity types, not all of them by default."}),"\n",(0,i.jsx)(n.p,{children:"For example, instead of using AllEntityType set to true, write the following:"}),"\n",(0,i.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,i.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<ComputeCorrelationKeysTask DisplayName_L1="Directory User - Update the correlation keys" >  \n\xa0\xa0<TaskEntityType EntityType="Directory_UserRecord"/>\xa0\xa0<TaskEntityType EntityType="Directory_User"/>\xa0\xa0<TaskEntityType EntityType="HR_Person"/>  \n</ComputeCorrelationKeysTask>  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,i.jsx)(n.p,{children:"Launch incremental tasks rather than complete"}),"\n",(0,i.jsx)(n.p,{children:"When a task is supposed to be executed on changes only, then there is no use executing the task in complete mode."}),"\n",(0,i.jsxs)(n.p,{children:["Make the relevant tasks incremental by flagging the resources that were recently modified. See the ",(0,i.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/tasks-jobs/how-tos/configure-incremental-job/",children:"\nConfigure an Incremental Job\n"})," topic for additional information."]}),"\n",(0,i.jsx)(n.p,{children:"For example, instead of computing the role model as if it had never been computed before, apply only the changes by writing the following:"}),"\n",(0,i.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,i.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<ComputeRoleModelTask Identifier="AzureAD_Synchronize_Incremental_ComputeRoleModel_WithDirty" DisplayName_L1="Apply the Role Model" Level="6" Dirty="true">\xa0\xa0<TaskEntityType EntityType="Directory_User" /></ComputeRoleModelTask>  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,i.jsx)(n.p,{children:"Launch only the relevant tasks according to the logical chain"}),"\n",(0,i.jsx)(n.p,{children:"Identity Manager's tasks are all linked together by a logical chain that implies that some tasks are supposed to be executed after some others."}),"\n",(0,i.jsxs)(n.p,{children:["Make sure to understand the tasks' logical chain to launch only the relevant tasks. See the ",(0,i.jsx)(n.a,{href:"/docs/usercube/usercube/integration-guide/tasks-jobs/how-tos/troubleshoot-connector-jobs/",children:"\nTroubleshoot Connector Jobs\n"})," topic for additional information."]}),"\n",(0,i.jsx)(n.p,{children:"For example, there is no use computing expressions or correlations if there was beforehand no change in the database. Thus, there should not be UpdateEntityPropertyExpressionsTask or ComputeCorrelationKeysTask without first SynchronizeTask or FulfillTask."}),"\n",(0,i.jsx)(n.h2,{id:"rule-3-wait-for-recurring-tasks",children:"Rule 3: Wait for Recurring Tasks"}),"\n",(0,i.jsx)(n.p,{children:"Inside a recurring job, there is no need including some tasks twice in order to have the whole cycle, because the next execution will complete what has been started."}),"\n",(0,i.jsx)(n.p,{children:"For example, Identity Manager's feedback loop uses the tasks for synchronization, computation of the role model, provisioning, then once more synchronization and computation of the role model."}),"\n",(0,i.jsx)(n.p,{children:"Instead of including any task twice, rather write a job with each task once, schedule a periodic execution of the job, and wait for the next execution to get the whole cycle. For example for the AD:"}),"\n",(0,i.jsxs)(n.p,{children:["Code attributes enclosed with ",(0,i.jsx)(n.code,{children:"<>"})," need to be replaced with a custom value before entering the script in the command line."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<Job Identifier="Synchronization_RoleModelComputation_Provisioning" DisplayName_L1="91: Synchronization / RoleModelComputation / Provisioning" Agent="Local">\xa0\xa0<ExportTask Identifier="Export_AD" DisplayName_L1="AD - Extract Changes" Agent="Local" Connector="AD" Level="0" OpenIdClient="Job" Connection="ADExportFulfillment" ContinueOnError="true" />\xa0\xa0<PrepareSynchronizationTask Identifier="PrepareSynchronization_AD" DisplayName_L1="Synchronization (agent side)" Agent="Local" Connector="AD" Level="1" OpenIdClient="Job" SynchronizationMode="Incremental" Type="ActiveDirectory">\xa0\xa0\xa0\xa0\xa0\xa0<TaskDependsOnTask ParentTask="Export_AD" />\xa0\xa0</PrepareSynchronizationTask>\xa0\xa0<SynchronizeTask Identifier="Synchronization_AD" DisplayName_L1="Synchronization (server side)" Connector="AD" Level="2" Type="ActiveDirectory">\xa0\xa0<TaskDependsOnTask ParentTask="PrepareSynchronization_AD" />\xa0\xa0</SynchronizeTask>\xa0\xa0<UpdateEntityPropertyExpressionsTask Identifier="UpdateEntityPropertyExpressions_AD" DisplayName_L1="Update Computed Properties" Level="4">\xa0\xa0\xa0\xa0\xa0\xa0<TaskEntityType EntityType="AD_Entry" />\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0\xa0</UpdateEntityPropertyExpressionsTask>\xa0\xa0<ComputeCorrelationKeysTask Identifier="ComputeCorrelationKeys_AD" DisplayName_L1="Compute all Correlations" Level="5">\xa0\xa0\xa0\xa0\xa0\xa0<TaskEntityType EntityType="AD_Entry" />\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0</ComputeCorrelationKeysTask>\xa0\xa0<ComputeRoleModelTask Identifier="ComputeRoleModel_AD" DisplayName_L1="Apply the Role Model" Level="6">\xa0\xa0\xa0\xa0\xa0\xa0<TaskEntityType EntityType="Directory_User" />\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0\xa0</ComputeRoleModelTask>\xa0\xa0<GenerateProvisioningOrdersTask Identifier="GenerateProvisioningOrders_AD" DisplayName_L1="Generate Provisioning Orders" Level="7">\xa0\xa0\xa0\xa0<TaskResourceType ResourceType="AD_Entry_NominativeUser" />\xa0\xa0\xa0\xa0...  \n\xa0\xa0</GenerateProvisioningOrdersTask>\xa0\xa0<FulfillTask Identifier="Fulfill_AD" DisplayName_L1="Provisioning" Agent="Local" Level="8" OpenIdClient="Job" ContinueOnError="true">\xa0\xa0\xa0\xa0<TaskDependsOnTask ParentTask="GenerateProvisioningOrders_AD" />\xa0\xa0\xa0\xa0<TaskResourceType ResourceType="AD_Entry_NominativeUser" />\xa0\xa0\xa0\xa0...  \n\xa0\xa0</FulfillTask></Job>\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<CreateConnectorSynchroComplete DisplayName_L1="10: Microsoft Entra ID - Synchronization Complete (scaffolding)" Connector="AzureAD" JobIdentifier="AzureAD_Synchronize_Complete_Scaffolding"/>  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<ComputeCorrelationKeysTask DisplayName_L1="Directory User - Update the correlation keys" >  \n\xa0\xa0<TaskEntityType EntityType="Directory_UserRecord"/>\xa0\xa0<TaskEntityType EntityType="Directory_User"/>\xa0\xa0<TaskEntityType EntityType="HR_Person"/>  \n</ComputeCorrelationKeysTask>  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<ComputeRoleModelTask Identifier="AzureAD_Synchronize_Incremental_ComputeRoleModel_WithDirty" DisplayName_L1="Apply the Role Model" Level="6" Dirty="true">\xa0\xa0<TaskEntityType EntityType="Directory_User" /></ComputeRoleModelTask>  \n\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0  \n<Job Identifier="Synchronization_RoleModelComputation_Provisioning" DisplayName_L1="91: Synchronization / RoleModelComputation / Provisioning" Agent="Local">\xa0\xa0<ExportTask Identifier="Export_AD" DisplayName_L1="AD - Extract Changes" Agent="Local" Connector="AD" Level="0" OpenIdClient="Job" Connection="ADExportFulfillment" ContinueOnError="true" />\xa0\xa0<PrepareSynchronizationTask Identifier="PrepareSynchronization_AD" DisplayName_L1="Synchronization (agent side)" Agent="Local" Connector="AD" Level="1" OpenIdClient="Job" SynchronizationMode="Incremental" Type="ActiveDirectory">\xa0\xa0\xa0\xa0\xa0\xa0<TaskDependsOnTask ParentTask="Export_AD" />\xa0\xa0</PrepareSynchronizationTask>\xa0\xa0<SynchronizeTask Identifier="Synchronization_AD" DisplayName_L1="Synchronization (server side)" Connector="AD" Level="2" Type="ActiveDirectory">\xa0\xa0<TaskDependsOnTask ParentTask="PrepareSynchronization_AD" />\xa0\xa0</SynchronizeTask>\xa0\xa0<UpdateEntityPropertyExpressionsTask Identifier="UpdateEntityPropertyExpressions_AD" DisplayName_L1="Update Computed Properties" Level="4">\xa0\xa0\xa0\xa0\xa0\xa0<TaskEntityType EntityType="AD_Entry" />\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0\xa0</UpdateEntityPropertyExpressionsTask>\xa0\xa0<ComputeCorrelationKeysTask Identifier="ComputeCorrelationKeys_AD" DisplayName_L1="Compute all Correlations" Level="5">\xa0\xa0\xa0\xa0\xa0\xa0<TaskEntityType EntityType="AD_Entry" />\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0</ComputeCorrelationKeysTask>\xa0\xa0<ComputeRoleModelTask Identifier="ComputeRoleModel_AD" DisplayName_L1="Apply the Role Model" Level="6">\xa0\xa0\xa0\xa0\xa0\xa0<TaskEntityType EntityType="Directory_User" />\xa0\xa0\xa0\xa0\xa0\xa0...  \n\xa0\xa0</ComputeRoleModelTask>\xa0\xa0<GenerateProvisioningOrdersTask Identifier="GenerateProvisioningOrders_AD" DisplayName_L1="Generate Provisioning Orders" Level="7">\xa0\xa0\xa0\xa0<TaskResourceType ResourceType="AD_Entry_NominativeUser" />\xa0\xa0\xa0\xa0...  \n\xa0\xa0</GenerateProvisioningOrdersTask>\xa0\xa0<FulfillTask Identifier="Fulfill_AD" DisplayName_L1="Provisioning" Agent="Local" Level="8" OpenIdClient="Job" ContinueOnError="true">\xa0\xa0\xa0\xa0<TaskDependsOnTask ParentTask="GenerateProvisioningOrders_AD" />\xa0\xa0\xa0\xa0<TaskResourceType ResourceType="AD_Entry_NominativeUser" />\xa0\xa0\xa0\xa0...  \n\xa0\xa0</FulfillTask></Job>\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);