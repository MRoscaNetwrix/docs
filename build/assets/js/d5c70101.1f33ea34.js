"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[642636],{28453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var i=n(296540);const t={},r=i.createContext(t);function a(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(r.Provider,{value:s},e.children)}},253318:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/jobanalysis-8b7dfe0f23dea590f304e288be2e0bcf.webp"},269997:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"enterpriseauditor/solutions/databases/azuresql/collection/azuresql_permissionscan","title":"1-AzureSQL\\\\_PermissionScan Job","description":"The 1\u2013AzureSQL\\\\_PermissionScan Job is designed to collect Azure SQL instance and database level permissions from all the targeted instances.","source":"@site/docs/accessanalyzer/enterpriseauditor/solutions/databases/azuresql/collection/1-azuresql_permissionscan.md","sourceDirName":"enterpriseauditor/solutions/databases/azuresql/collection","slug":"/enterpriseauditor/solutions/databases/azuresql/collection/azuresql_permissionscan","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/databases/azuresql/collection/azuresql_permissionscan","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/accessanalyzer/enterpriseauditor/solutions/databases/azuresql/collection/1-azuresql_permissionscan.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"accessAnalyzerSidebar","previous":{"title":"0-AzureSQL\\\\_InstanceDiscovery Job","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/databases/azuresql/collection/azuresql_instancediscovery"},"next":{"title":"2-AzureSQL\\\\_SensitiveDataScan Job","permalink":"/docs/accessanalyzer/enterpriseauditor/solutions/databases/azuresql/collection/azuresql_sensitivedatascan"}}');var t=n(474848),r=n(28453);const a={},o="1-AzureSQL_PermissionScan Job",c={},l=[{value:"Queries for the 1\u2013AzureSQL_PermissionsScan Job",id:"queries-for-the-1azuresql_permissionsscan-job",level:2},{value:"Configure the PermissionsScan Query",id:"configure-the-permissionsscan-query",level:3},{value:"Analysis Tasks for the 1\u2013AzureSQL_PermissionsScan Job",id:"analysis-tasks-for-the-1azuresql_permissionsscan-job",level:2}];function d(e){const s={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"1-azuresql_permissionscan-job",children:"1-AzureSQL_PermissionScan Job"})}),"\n",(0,t.jsx)(s.p,{children:"The 1\u2013AzureSQL_PermissionScan Job is designed to collect Azure SQL instance and database level permissions from all the targeted instances."}),"\n",(0,t.jsx)(s.h2,{id:"queries-for-the-1azuresql_permissionsscan-job",children:"Queries for the 1\u2013AzureSQL_PermissionsScan Job"}),"\n",(0,t.jsx)(s.p,{children:"The 1\u2013AzureSQL_PermissionsScan Job uses the SQL Data Collector for the following query:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Query Selection",src:n(907677).A+"",width:"921",height:"264"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"PermissionScan \u2014 Collects permissions from the targeted instances"}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"configure-the-permissionsscan-query",children:"Configure the PermissionsScan Query"}),"\n",(0,t.jsx)(s.p,{children:"The 1-AzureSQL_PermissionScan Job is preconfigured to run using the default settings within the Permissions Collection category. Follow the steps to customize configurations."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Step 1 \u2013"})," Navigate to the ",(0,t.jsx)(s.strong,{children:"Databases"})," > 0.Collection > AzureSQL > 1-AzureSQL_PermissionsScan > Configure node and select ",(0,t.jsx)(s.strong,{children:"Queries"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Step 2 \u2013"})," In the Query Selection view, select the PermissionsScan query and click on Query Properties. The Query Properties window appears."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Step 3 \u2013"})," Select the Data Source tab and click Configure. The SQL Data Collector Wizard opens."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"CAUTION:"})," Do not make changes to other wizard pages as they have been pre-configured for this job."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Filters",src:n(661175).A+"",width:"779",height:"695"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Step 4 \u2013"})," To query for specific databases/instances, navigate to the ",(0,t.jsx)(s.a,{href:"/docs/accessanalyzer/enterpriseauditor/admin/datacollector/sql/overview",children:"SQL Data Collector"})," page. The default query target is All databases. The default query scope is Only select database objects and click Retrieve. The Available database objects will be populated. Databases and instances can be added in the following ways:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Select the desired database objects and click Add."}),"\n",(0,t.jsx)(s.li,{children:"Use the Import CSV button to import a list from a CSV file, if desired."}),"\n",(0,t.jsx)(s.li,{children:"Optionally, use the Add Custom Filter button to create and apply a custom filter."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Managed Connection Window",src:n(287295).A+"",width:"993",height:"569"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Step 5 \u2013"})," To view all managed connections discovered during the 1-AzureSQL_PermissionScan Job run, click Connections within the Filter page. This screen will list the following items retrieved during the job run:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"All databases discovered"}),"\n",(0,t.jsx)(s.li,{children:"Any configurations made before the job run"}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Select any of the discovered databases and click Test Connection to ensure the database has connected properly."}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Step 6 \u2013"})," Navigate to the Summary page, click Finish to save any setting modifications or click Cancel if no changes were made. Then click OK to close the Query Properties window."]}),"\n",(0,t.jsx)(s.p,{children:"The 1-AzureSQL_PermissionsScan Job is now ready to run with the customized settings."}),"\n",(0,t.jsx)(s.h2,{id:"analysis-tasks-for-the-1azuresql_permissionsscan-job",children:"Analysis Tasks for the 1\u2013AzureSQL_PermissionsScan Job"}),"\n",(0,t.jsxs)(s.p,{children:["Navigate to the Databases > 0.Collection > ",(0,t.jsx)(s.strong,{children:"AzureSQL"})," > 1-AzureSQL_PermissionsScan > Configure node and select Analysis to view the analysis tasks."]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"CAUTION:"})," Do not modify or deselect the selected analysis tasks. The analysis tasks are preconfigured for this job."]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"Analysis Selection",src:n(253318).A+"",width:"686",height:"296"})}),"\n",(0,t.jsx)(s.p,{children:"The default analysis tasks are:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Hosts \u2014 Imports SQL\xa0Hosts to the AIC"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Instance Permissions Node \u2014 Imports a node for instance permission for each instance"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Databases \u2014 Imports each database in the SQL instances"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Permissions \u2014 Imports SQL\xa0Permission to the AIC"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Roles \u2014 Imports a Roles node into the AIC\xa0for Azure SQL\xa0Roles"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Database Role Permissions \u2014 Imports role Permission at the database level"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Local SQL\xa0Server \u2014 Imports Azure SQL local groups to the AIC"}),"\n",(0,t.jsx)(s.li,{children:"AIC\xa0Import \u2013 Instance Role \u2014 Imports permissions assigned to roles at the instance level"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},287295:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/managedconnections-df9c02d228839b8808f8943c678c855a.webp"},661175:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/1sqlpermissionscanfilterpage-464e3db90c4cdc9bf594bd31eec5ab55.webp"},907677:(e,s,n)=>{n.d(s,{A:()=>i});const i=n.p+"assets/images/permissionjob-8259540de2824d2b74012c11d54162b9.webp"}}]);