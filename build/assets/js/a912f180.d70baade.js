"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[468867],{28453:(e,t,r)=>{r.d(t,{R:()=>o,x:()=>d});var i=r(296540);const n={},s=i.createContext(n);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(s.Provider,{value:t},e.children)}},847450:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"auditor/addon/siem/activityrecords","title":"Export Activity Records","description":"Export Activity Records Associated with the Alert","source":"@site/docs/auditor/auditor/addon/siem/activityrecords.md","sourceDirName":"auditor/addon/siem","slug":"/auditor/addon/siem/activityrecords","permalink":"/docs/auditor/auditor/addon/siem/activityrecords","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/addon/siem/activityrecords.md","tags":[],"version":"current","frontMatter":{},"sidebar":"auditorSidebar","previous":{"title":"Define Parameters","permalink":"/docs/auditor/auditor/addon/servicenow/parameters"},"next":{"title":"Work with Collected Data","permalink":"/docs/auditor/auditor/addon/siem/collecteddata"}}');var n=r(474848),s=r(28453);const o={},d="Export Activity Records",a={},c=[{value:"Export Activity Records Associated with the Alert",id:"export-activity-records-associated-with-the-alert",level:2},{value:"Export Activity Records in Bulk",id:"export-activity-records-in-bulk",level:2},{value:"Apply Filters",id:"apply-filters",level:3},{value:"Automate Add-On Execution",id:"automate-add-on-execution",level:3}];function l(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"export-activity-records",children:"Export Activity Records"})}),"\n",(0,n.jsx)(t.h2,{id:"export-activity-records-associated-with-the-alert",children:"Export Activity Records Associated with the Alert"}),"\n",(0,n.jsxs)(t.p,{children:["To export only important audit data, that is, the Activity Records that led to the alert triggering, configure the alert response action, providing path to ",(0,n.jsx)(t.strong,{children:"Netwrix_Auditor_Alerts_to_Event_Log_Add-on.ps1"}),". See the ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/addon/siem/overview",children:"SIEM"})," topic for additional information."]}),"\n",(0,n.jsx)(t.h2,{id:"export-activity-records-in-bulk",children:"Export Activity Records in Bulk"}),"\n",(0,n.jsx)(t.p,{children:"As said, Netwrix recommends exporting the most important data, using the script described above. However, if you need to export all Activity Records in bulk, follow the recommendations below."}),"\n",(0,n.jsx)(t.p,{children:"First, provide a path to your add-on followed by script parameters with their values. Each parameter is preceded with a dash; a space separates a parameter name from its value. You can skip some parameters\u2014the script uses a default value unless a parameter is explicitly defined. If necessary, modify the parameters as required."}),"\n",(0,n.jsx)(t.p,{children:"Follow the steps to run add-on with PowerShell:"}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1 \u2013"})," On computer where you want to execute the add-on, start Windows PowerShell."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2 \u2013"})," Type a path to the add-on. Or simply drag and drop the add-on file in the console window."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 3 \u2013"})," Add script parameters. The console will look similar to the following:"]}),"\n",(0,n.jsx)(t.p,{children:"Windows PowerShell"}),"\n",(0,n.jsx)(t.p,{children:"Copyright (C) 2014 Microsoft Corporation. All rights reserved."}),"\n",(0,n.jsx)(t.p,{children:"PS C:\\Users\\AddOnUser> C:\\Add-ons\\Netwrix_Auditor_Activity_Records_to_Event_Log_Add-on.ps1.ps1"}),"\n",(0,n.jsxs)(t.p,{children:["If the script path contains spaces (e.g., ",(0,n.jsx)(t.code,{children:"C:\\Netwrix Add-ons\\"}),"), embrace it in double quotes and insert the ampersand (&) symbol in front (e.g., ",(0,n.jsx)(t.code,{children:'& "C:\\Netwrix Add-ons\\"'}),")."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 4 \u2013"})," Hit ",(0,n.jsx)(t.strong,{children:"Enter"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"Depending on the number of Activity Records stored in Auditor Audit Database execution may take a while. Ensure the script execution completed successfully. The Netwrix Auditor Integration event log will be created and filled with events."}),"\n",(0,n.jsxs)(t.p,{children:["By default, the Netwrix Auditor Integration event log size is set to ",(0,n.jsx)(t.em,{children:"1GB"}),", and retention is set to ",(0,n.jsx)(t.em,{children:'"Overwrite events as needed"'}),". See the ",(0,n.jsx)(t.a,{href:"/docs/auditor/auditor/addon/siem/integrationeventlog",children:"Integration Event Log Fields"})," topic for additional information."]}),"\n",(0,n.jsx)(t.p,{children:"Event records with more than 30,000 characters length will be trimmed."}),"\n",(0,n.jsxs)(t.p,{children:["At the end of each run, the script creates the ",(0,n.jsx)(t.strong,{children:"Netwrix_Auditor_Event_Log_Export_Add-on_EventIDs.txt"})," file. It defines mapping between the Activity Records and related Event IDs ."]}),"\n",(0,n.jsxs)(t.p,{children:["You can use this file to track possible duplicates of Event IDs created at each script execution. Duplicates, if any, are written to the ",(0,n.jsx)(t.strong,{children:"Netwrix_Auditor_Event_Log_Export_Add-on_EventIDsDuplicates.txt"})," file."]}),"\n",(0,n.jsxs)(t.p,{children:["Similarly, the add-on also creates the ",(0,n.jsx)(t.strong,{children:"Netwrix_Auditor_Event_Log_Export_Add-on_CategoriesIDs.txt"})," file that defines mapping between the Data Source and related Category ID."]}),"\n",(0,n.jsx)(t.h3,{id:"apply-filters",children:"Apply Filters"}),"\n",(0,n.jsx)(t.p,{children:"Every time you run the script, Auditor makes a timestamp. The next time you run the script, it will start retrieving new Activity Records. Consider the following:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"By default, the add-on does not apply any filters when exporting Activity Records. If you are running the add-on for the first time (there is no timestamp yet) with no filters, it will export Activity Records for the last month only. This helps to optimize solution performance during the first run. At the end of the first run, the timestamp will be created, and the next run will start export from that timestamp."}),"\n",(0,n.jsx)(t.li,{children:"However, if you have specified a time period for Activity Records to be exported, then this filter will be applied at the add-on first run and the runs that follow."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"automate-add-on-execution",children:"Automate Add-On Execution"}),"\n",(0,n.jsx)(t.p,{children:"To ensure you feed the most recent data to your SIEM solution, you can schedule a daily task for running the Activity Records to Event Log add-on."}),"\n",(0,n.jsx)(t.p,{children:"To ensure you feed the most recent data to your SIEM solution, Netwrix recommends scheduling a daily task for running the add-on."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"Perform the following steps to create a scheduled task:"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 1 \u2013"})," On the computer where you want to execute the add-on, navigate to ",(0,n.jsx)(t.strong,{children:"Task Scheduler"}),".Task Scheduler."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 2 \u2013"})," On the ",(0,n.jsx)(t.strong,{children:"General"})," tab, specify a task name. Make sure the account that runs the task has all necessary rights and permissions."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 3 \u2013"})," On the ",(0,n.jsx)(t.strong,{children:"Triggers"})," tab, click ",(0,n.jsx)(t.strong,{children:"New"})," and define the schedule. This option controls how often audit data is exported from Auditor and saved to event log. Netwrixrecommends scheduling a daily task."]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 4 \u2013"})," On the ",(0,n.jsx)(t.strong,{children:"Actions"})," tab, click ",(0,n.jsx)(t.strong,{children:"New"})," and specify action details. Review the following for additional information:"]}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Option"}),(0,n.jsx)(t.th,{children:"Value"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Action"}),(0,n.jsxs)(t.td,{children:["Set to ",(0,n.jsx)(t.em,{children:'"Start a program"'}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Program/script"}),(0,n.jsxs)(t.td,{children:["Input ",(0,n.jsx)(t.em,{children:'"Powershell.exe"'}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Add arguments (optional)"}),(0,n.jsx)(t.td,{children:'Add a path to the add-on in double quotes and specify add-on parameters. For example:  -file "C:\\Add-ons\\Netwrix_Auditor_Audit_Records_to_Event_Log_Add-on.ps1"'})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Step 5 \u2013"})," Save the task."]}),"\n",(0,n.jsxs)(t.p,{children:["After creating a task, wait for the next scheduled run or navigate to ",(0,n.jsx)(t.strong,{children:"Task Scheduler"})," and run the task manually. To do this, right-click a task and click ",(0,n.jsx)(t.strong,{children:"Run"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}}}]);