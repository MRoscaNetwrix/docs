"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[34209],{28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>d});var s=r(296540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}},418715:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"usercube/integration-guide/connectors/how-tos/write-fulfill-robotframework-script/index","title":"Write a Robot Framework Script","description":"This guide shows how to write a Robot Framework script that will be used by [","source":"@site/docs/usercube_saas/usercube/integration-guide/connectors/how-tos/write-fulfill-robotframework-script/index.md","sourceDirName":"usercube/integration-guide/connectors/how-tos/write-fulfill-robotframework-script","slug":"/usercube/integration-guide/connectors/how-tos/write-fulfill-robotframework-script/","permalink":"/docs/usercube_saas/usercube/integration-guide/connectors/how-tos/write-fulfill-robotframework-script/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube_saas/usercube/integration-guide/connectors/how-tos/write-fulfill-robotframework-script/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"userCubeSaasSidebar","previous":{"title":"Write a PowerShell Script for Provisioning","permalink":"/docs/usercube_saas/usercube/integration-guide/connectors/how-tos/write-fulfill-powershell-script/"},"next":{"title":"Write a PowerShell Script for Synchronization","permalink":"/docs/usercube_saas/usercube/integration-guide/connectors/how-tos/write-sync-powershell-script/"}}');var t=r(474848),i=r(28453);const o={},d="Write a Robot Framework Script",c={},a=[{value:"Structure of a Robot Framework Script",id:"structure-of-a-robot-framework-script",level:2},{value:"Build the skeleton",id:"build-the-skeleton",level:3},{value:"Example",id:"example",level:4},{value:"Define specific functions",id:"define-specific-functions",level:3},{value:"Example",id:"example-1",level:4},{value:"Keywords",id:"keywords",level:2},{value:"Error handling",id:"error-handling",level:2},{value:"Error Handling for ExecuteAdd, ExecuteDelete, and ExecuteModify",id:"error-handling-for-executeadd-executedelete-and-executemodify",level:3},{value:"Testing a RobotFramework script",id:"testing-a-robotframework-script",level:2},{value:"<code>Get Secure Data</code> and <code>Generate Password</code>",id:"get-secure-data-and-generate-password",level:3},{value:"Use Case: Write a Script to Fulfill a CSV File",id:"use-case-write-a-script-to-fulfill-a-csv-file",level:2},{value:"Define settings",id:"define-settings",level:3},{value:"Define variables",id:"define-variables",level:3},{value:"Define custom keywords",id:"define-custom-keywords",level:3},{value:"Define mandatory keywords",id:"define-mandatory-keywords",level:3},{value:"Define test cases",id:"define-test-cases",level:3},{value:"Read the full script",id:"read-the-full-script",level:3}];function l(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"write-a-robot-framework-script",children:"Write a Robot Framework Script"})}),"\n",(0,t.jsxs)(n.p,{children:["This guide shows how to write a Robot Framework script that will be used by ",(0,t.jsx)(n.a,{href:"/docs/usercube_saas/usercube/integration-guide/connectors/references-connectors/robotframework/",children:"\nRobot Framework\n"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"structure-of-a-robot-framework-script",children:"Structure of a Robot Framework Script"}),"\n",(0,t.jsx)(n.h3,{id:"build-the-skeleton",children:"Build the skeleton"}),"\n",(0,t.jsx)(n.p,{children:"A Robot Framework script is divided into four main parts:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Settings"}),": contains the instructions to import library or external resource files."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Variables"}),": contains the global variables shared by all the functions in the script."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keywords"}),": contains all the functions defined by the user."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test Cases"}),": contains the functions which will be run when the script is launched."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Settings ***\nLibrary  Telnet\n\n*** Variables ***\n${IPADDRESS}  192.168.1.22\n\n*** Keywords ***\nOpen Telnet Connection\n    Open Connection  ${IPADDRESS}  prompt=$\n\n*** Test Cases ***\nRun Provisioning\n    Open Telnet Connection\n\n"})}),"\n",(0,t.jsx)(n.p,{children:"Let's analyze the four parts of this example:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Settings"}),": we import here the Telnet library to use the functions defined in it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Variables"}),": we define the variable ",(0,t.jsx)(n.code,{children:"IPADDRESS"})," to use it later."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keywords"}),": we define a custom function called ",(0,t.jsx)(n.code,{children:"Open Telnet Connection"}),". It will use a function defined in the Telnet library (called ",(0,t.jsx)(n.code,{children:"Open Connection"}),") and the variable ",(0,t.jsx)(n.code,{children:"IPADDRESS"})," which has been defined before in the ",(0,t.jsx)(n.code,{children:"Variables"})," section."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test Cases"}),": we define here the main function which we choose to call ",(0,t.jsx)(n.code,{children:"Run Provisioning"})," (it can be named anything), and which will be run when launching the script. It will use the function ",(0,t.jsx)(n.code,{children:"Open Telnet Connection"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Robot Framework needs two spaces between two different instructions to parse them correctly.",(0,t.jsx)(n.br,{}),"\n","For example, ",(0,t.jsx)(n.code,{children:"Open Connection"})," consists of only one instruction. Only one space is thus needed between the two words. But, ",(0,t.jsx)(n.code,{children:"Open Connection ${IPADDRESS}"})," consists of two instructions, the function and the parameter. Two spaces are then required to separate ",(0,t.jsx)(n.code,{children:"Connection"})," from ",(0,t.jsx)(n.code,{children:"${IPADDRESS}"}),".",(0,t.jsx)(n.br,{}),"\n","To read your script more easily, you could also use the pipe character (",(0,t.jsx)(n.code,{children:"|"}),") between instructions, like this: ",(0,t.jsx)(n.code,{children:"Open Connection | ${IPADDRESS}"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"https://robotframework.org/#robot-framework-libraries",children:"Robot Framework Libraries"})," for additional information."]}),"\n",(0,t.jsx)(n.h3,{id:"define-specific-functions",children:"Define specific functions"}),"\n",(0,t.jsx)(n.p,{children:"To use a Robot Framework script for provisioning external systems with Identity Manager, the following elements are required in the script:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The import of a resource file written by Identity Manager\xa0called ",(0,t.jsx)(n.code,{children:"UsercubeRobotFramework.resource"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The definition of three functions which will be called by Identity Manager\xa0to perform three required actions: ",(0,t.jsx)(n.code,{children:"ExecuteAdd"}),", ",(0,t.jsx)(n.code,{children:"ExecuteDelete"})," and ",(0,t.jsx)(n.code,{children:"ExecuteModify"}),". These functions are where you will write the actions to perform on the external system."]}),"\n",(0,t.jsxs)(n.li,{children:["The use of one function to start the provisioning called ",(0,t.jsx)(n.code,{children:"Launch Provisioning"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Never modify the resource file ",(0,t.jsx)(n.code,{children:"UsercubeRobotFramework.resource"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,t.jsxs)(n.p,{children:["The resource file defined at the beginning of the script is located in Identity Manager's ",(0,t.jsx)(n.code,{children:"Runtime"})," folder. Therefore, you will have to change the path accordingly."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Settings ***\nResource  C:/UsercubeContoso/Runtime/UsercubeRobotFramework.resource\n\n*** Keywords ***\nExecuteAdd\n    [Arguments]  ${order}\n    ...\n\nExecuteDelete\n    [Arguments]  ${order}\n    ...\n\nExecuteModify\n    [Arguments]  ${order}\n    ...\n\n...\n\n*** Test Cases ***\nRun Provisioning\n    ...\n    Launch Provisioning\n    ...\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The parameter ",(0,t.jsx)(n.code,{children:"${order}"})," is mandatory only for the three functions: ",(0,t.jsx)(n.code,{children:"ExecuteAdd"}),", ",(0,t.jsx)(n.code,{children:"ExecuteDelete"})," and ",(0,t.jsx)(n.code,{children:"ExecuteModify"}),". It is an object corresponding to the following sample provisioning order (JSON):"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\n{\n    "AssignedResourceTypeId": "3930001",\n    "ChangeType": "Added",\n    "WorkflowInstanceId": "81",\n    "Owner": {\n        "Id": "21511",\n        "InternalDisplayName": "007 - Bond James",\n        "Identifier": "007",\n        "EmployeeId": "007",\n        "PhotoTag": -3065,\n        "MainFirstName": "James",\n        "MainLastName": "Bond",\n        ...\n    },\n    "ResourceType": {\n        "Id": "-41",\n        "SourceEntityType": {\n            "Id": "51",\n            "Identifier": "Directory_User"\n        },\n        "TargetEntityType": {\n            "Id": "70",\n            "Identifier": "RobotFramework_User"\n        },\n        "Identifier": "RobotFramework_User_NominativeUser"\n    },\n    "Changes": {\n        "identifier": "007",\n        "firstName": "James",\n        "lastName": "Bond"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The elements of ",(0,t.jsx)(n.code,{children:"${order}"}),"can be accessed like this: ",(0,t.jsx)(n.code,{children:"${order['Changes']['identifier']}"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"https://robotframework.org/robotframework/latest/RobotFrameworkUserGuide.html",children:"Robot Framework User Guide"})," for additional information."]}),"\n",(0,t.jsx)(n.h2,{id:"keywords",children:"Keywords"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Keyword"}),(0,t.jsx)(n.th,{children:"Details"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Catch Keyword"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Arguments"}),"    ",(0,t.jsx)(n.code,{children:"Keyword"}),": Keyword   ",(0,t.jsx)(n.code,{children:"*args"}),"   ",(0,t.jsx)(n.strong,{children:"Description"}),"   Launches ",(0,t.jsx)(n.code,{children:"Keyword"})," with the given arguments ",(0,t.jsx)(n.code,{children:"*args"})," if the keyword launched by ",(0,t.jsx)(n.code,{children:"Try Keyword"})," failed. If ",(0,t.jsx)(n.code,{children:"Try Keyword"})," was not called, this keyword will not do anything. ",(0,t.jsx)(n.code,{children:"Catch Keyword"})," should always be called right after ",(0,t.jsx)(n.code,{children:"Try Keyword"}),".   ",(0,t.jsx)(n.strong,{children:"Example"}),"   Try to connect to ",(0,t.jsx)(n.code,{children:"Usercube.com"}),". If the connection fails, restart the browser and try to connect to ",(0,t.jsx)(n.code,{children:"Usercube.com"}),":    ",(0,t.jsx)(n.code,{children:"Connect to URL    Try Keyword Go To Usercube.com    Catch Keyword Restart Browser At URL Usercube.com"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Generate Password"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Description"}),"    Generates a password based on the ",(0,t.jsx)(n.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/connectors/passwordresetsettings/",children:" Password Reset Settings "})," associated to the ",(0,t.jsx)(n.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/connectors/resourcetypemappings/",children:"Resource Type Mappings"})," being provisioned.   ",(0,t.jsx)(n.code,{children:"Send Password Notification"})," should always be called after ",(0,t.jsx)(n.code,{children:"Generate Password"}),", preferably right after the password is used. If ",(0,t.jsx)(n.code,{children:"Send Password Notification"})," is not called before the provisioning of the resource is over, it will automatically be called.   If multiple passwords should be generated, ",(0,t.jsx)(n.code,{children:"Send Password Notification"})," should be called after each password generation.   ",(0,t.jsx)(n.strong,{children:"Returns"}),"   ",(0,t.jsx)(n.code,{children:"Password"}),": string"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Get Secure Data"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Arguments"}),"    ",(0,t.jsx)(n.code,{children:"Attribute"}),": string   ",(0,t.jsx)(n.code,{children:"Erase Data"}),": boolean   ",(0,t.jsx)(n.strong,{children:"Description"}),"   Retrieves the secured option ",(0,t.jsx)(n.code,{children:"Attribute"})," from the connector configuration. If ",(0,t.jsx)(n.code,{children:"Erase Data"})," is set to true, the secured option is deleted once it is read.   ",(0,t.jsx)(n.strong,{children:"Example"}),"   Get Login option and erase it:   ```Get Secure Data"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Launch Provisioning"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Description"}),"    Launches the provisioning defined by the provisioning orders. This keyword is required for any provisioning to happen."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Log Debug"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Arguments"}),"    ",(0,t.jsx)(n.code,{children:"Message"}),": string   ",(0,t.jsx)(n.strong,{children:"Description"}),"   Logs ",(0,t.jsx)(n.code,{children:"Message"})," at the ",(0,t.jsx)(n.code,{children:"Debug"})," log level.   ",(0,t.jsx)(n.strong,{children:"Example"}),"   Log a keyword failure message: ",(0,t.jsx)(n.code,{children:"Log Debug The keyword has failed"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Log Error"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Arguments"}),"    ",(0,t.jsx)(n.code,{children:"Message"}),": string   ",(0,t.jsx)(n.strong,{children:"Description"}),"   Logs ",(0,t.jsx)(n.code,{children:"Message"})," at the ",(0,t.jsx)(n.code,{children:"Error"})," log level.   ",(0,t.jsx)(n.strong,{children:"Example"}),"   Log a keyword failure message: ",(0,t.jsx)(n.code,{children:"Log Error The keyword has failed"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Send Password Notification"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Description"}),"    Sends a notification containing the last password generated. If ",(0,t.jsx)(n.code,{children:"Generate Password"})," is called and ",(0,t.jsx)(n.code,{children:"Send Password Notification"})," is not called before the provisioning of the resource is over, ",(0,t.jsx)(n.code,{children:"Send Password Notification"})," will automatically be called."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Try Keyword"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.strong,{children:"Arguments"}),"    ",(0,t.jsx)(n.code,{children:"Keyword"}),": Keyword   ",(0,t.jsx)(n.code,{children:"*args"}),"   ",(0,t.jsx)(n.strong,{children:"Description"}),"   Launches ",(0,t.jsx)(n.code,{children:"Keyword"})," with the given arguments ",(0,t.jsx)(n.code,{children:"*args"}),", and ignores its errors. If ",(0,t.jsx)(n.code,{children:"Keyword"})," fails, the keyword sent to ",(0,t.jsx)(n.code,{children:"Catch Keyword"})," will run. ",(0,t.jsx)(n.code,{children:"Try Keyword"})," should always be called right before ",(0,t.jsx)(n.code,{children:"Catch Keyword"}),".   ",(0,t.jsx)(n.strong,{children:"Example"}),"   Try to connect to ",(0,t.jsx)(n.code,{children:"Usercube.com"}),". If the connection fails, restart the browser and try to connect to ",(0,t.jsx)(n.code,{children:"Usercube.com"}),":    ",(0,t.jsx)(n.code,{children:"Connect to URL    Try Keyword Go To Usercube.com    Catch Keyword Restart Browser At URL Usercube.com"})]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error handling"}),"\n",(0,t.jsx)(n.p,{children:"Consider a web application that contains user information. Suppose a user is missing from the web application. When the script attempts to reach the user's information page, it will reach an error page, and fail. The next user's provisioning starts, but the web browser is still on the error page, so the script keeps failing."}),"\n",(0,t.jsx)(n.p,{children:"In this example, if a user's provisioning fails, each subsequent provisioning will fail. This failure issue can be solved with the error handling custom keywords."}),"\n",(0,t.jsx)(n.p,{children:"Consider the following example using the Robot Framework Selenium library:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\nOpen Usercube Website\n    Open Browser\n    Connect To Usercube\n    [Teardown]  Close Browser\n\nRestart Browser\n    [Arguments]  ${url}\n    Log Debug  An error has occured, restarting the browser\n    Close Browser\n    Open Browser  ${url}\n\nConnect To Usercube\n    Try Keyword  Go To  Usercube.com\n    Catch Keyword  Restart Browser  Usercube.com\n    Page Should Contain  Usercube\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, the keyword ",(0,t.jsx)(n.code,{children:"Open Usercube Website"})," opens a browser, then calls ",(0,t.jsx)(n.code,{children:"Connect To Usercube"}),". To ensure that the browser is closed regardless of the script's success, the ",(0,t.jsx)(n.code,{children:"Close Browser"})," keyword is used in a teardown. A keyword in a teardown is always executed regardless of what happens in the script or in the teardown."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Restart Browser"})," keyword logs a debug message before restarting the browser to help debug the script. The ",(0,t.jsx)(n.code,{children:"Connect To Usercube"})," tries to use the ",(0,t.jsx)(n.code,{children:"Go To"})," keyword to connect to the ",(0,t.jsx)(n.code,{children:"Usercube.com"})," web page. As ",(0,t.jsx)(n.code,{children:"Go To"})," is used with ",(0,t.jsx)(n.code,{children:"Try Keyword"}),", if the execution fails, ",(0,t.jsx)(n.code,{children:"Restart Browser"})," is called by ",(0,t.jsx)(n.code,{children:"Catch Keyword"}),". This means that if the browser fails to load ",(0,t.jsx)(n.code,{children:"Usercube.com"}),", the browser restarts. Last, ",(0,t.jsx)(n.code,{children:"Connect To Usercube"})," verifies that the page contains the word ",(0,t.jsx)(n.code,{children:"Usercube"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"error-handling-for-executeadd-executedelete-and-executemodify",children:"Error Handling for ExecuteAdd, ExecuteDelete, and ExecuteModify"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"ExecuteAdd"}),", ",(0,t.jsx)(n.code,{children:"ExecuteDelete"}),", and ",(0,t.jsx)(n.code,{children:"ExecuteModify"})," methods are harder to interact with. First, it is not possible to get their execution status within the script. Second, if the execution failed, it should be kept as a failure in order to log the failure."]}),"\n",(0,t.jsx)(n.p,{children:"To simplify error handling, consider the following structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\nExecute Add\n    [Arguments]  ${order}\n    Try Keyword  Add User  ${order}\n    Catch Keyword  Restart Program And Fail  Add User failed.\n\nAdd User\n    [Arguments]  ${order}\n    Click New User\n    Fill In Information  ${order}\n    Click Add User\n\nRestart Program And Fail\n    [Arguments]  ${failmessage}\n    Close Program\n    Start Program\n    Fail  ${failmessage}\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, ",(0,t.jsx)(n.code,{children:"ExecuteAdd"})," does not call the custom keywords to add a new user directly, and only calls ",(0,t.jsx)(n.code,{children:"Add User"})," instead. This means that it is possible to call ",(0,t.jsx)(n.code,{children:"Add User"})," from the ",(0,t.jsx)(n.code,{children:"Try Keyword"})," keyword. If ",(0,t.jsx)(n.code,{children:"Add User"})," fails, then ",(0,t.jsx)(n.code,{children:"Execute Add"})," fails. Therefore it is possible to catch a failure with this structure."]}),"\n",(0,t.jsxs)(n.p,{children:["Note that ",(0,t.jsx)(n.code,{children:"Restart Program And Fail"})," fails. This failure is necessary as the provisioning order would be counted as a success otherwise."]}),"\n",(0,t.jsx)(n.h2,{id:"testing-a-robotframework-script",children:"Testing a RobotFramework script"}),"\n",(0,t.jsx)(n.p,{children:"In order to write a RobotFramework script, we need to test that it works. It is possible to test the script by running a fulfillment job from the Identity Manager\xa0interface. While this kind of test proves that everything works as expected, it can take a long time. There is a faster method to check that the script runs."}),"\n",(0,t.jsxs)(n.p,{children:["Suppose the RobotFramework script's path is ",(0,t.jsx)(n.code,{children:"RobotFramework/script.robot"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"We need the following elements :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["A provisioning order, in folder ",(0,t.jsx)(n.code,{children:"RobotFrameworkScript/Order"}),". The provisioning order can be encrypted or unencrypted. The script will write the encrypted results to ",(0,t.jsx)(n.code,{children:"RobotFrameworkScript/Order/results.csv"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["The path to the ",(0,t.jsx)(n.code,{children:"Runtime"})," folder. In our example, we will consider this path as ",(0,t.jsx)(n.code,{children:"C:/UsercubeDemo/Runtime"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"RobotFramework/script.robot"})," script may be run from the command prompt."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cd RobotFramework\n\nrobot --variable ORDERPATH:./Order --variable RUNTIMEPATH:C:/UsercubeDemo/Runtime --variable RESULTPATH:./Order/results.csv ./script.robot\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This command will generate an output file, a log file, and a report file in the ",(0,t.jsx)(n.code,{children:"RobotFramework"})," folder. This command will also write information to the command prompt."]}),"\n",(0,t.jsxs)(n.p,{children:["For most testing cases, we only care about the command prompt information and the log file, written at ",(0,t.jsx)(n.code,{children:"RobotFramework/log.html"}),". The other outputs can be removed."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"cd RobotFramework\n\nrobot --loglevel NONE --report NONE --variable ORDERPATH:./Order --variable RUNTIMEPATH:C:/UsercubeDemo/Runtime --variable RESULTPATH:./Order/results.csv ./script.robot\n"})}),"\n",(0,t.jsxs)(n.h3,{id:"get-secure-data-and-generate-password",children:[(0,t.jsx)(n.code,{children:"Get Secure Data"})," and ",(0,t.jsx)(n.code,{children:"Generate Password"})]}),"\n",(0,t.jsxs)(n.p,{children:["Most keywords are not different when a script is launched manually. The keywords ",(0,t.jsx)(n.code,{children:"Get Secure Data"})," and ",(0,t.jsx)(n.code,{children:"Generate Password"})," are exceptions."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Get Secure Data"}),": This keyword expects the Robot Framework process to receive a json list of attributes in the stdin stream. This can be provided manually by writing the data in the command prompt. As an example, if the script requires a ",(0,t.jsx)(n.code,{children:"Login"})," and ",(0,t.jsx)(n.code,{children:"Password"})," attribute :\n",(0,t.jsx)(n.code,{children:'{"Login":"login","Password":"password"}'})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Generate Password"}),": This keyword expects a file that contains the ",(0,t.jsx)(n.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/connectors/passwordresetsettings/",children:"\nPassword Reset Settings\n"})," associated to the provisioned ",(0,t.jsx)(n.a,{href:"/docs/usercube_saas/usercube/integration-guide/toolkit/xml-configuration/connectors/resourcetypemappings/",children:"Resource Type Mappings"}),". The easiest way to enable the ",(0,t.jsx)(n.code,{children:"Generate Password"})," keyword is as follow:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Launch the Robot Framework fulfillment through the Identity Manager\xa0web application with a blank script."}),"\n",(0,t.jsxs)(n.li,{children:["Copy the ",(0,t.jsx)(n.code,{children:"PasswordResetSettings"})," folder generated in the most recent subfolder of ",(0,t.jsx)(n.code,{children:"Work/FulfillRobotFramework"}),"."]}),"\n",(0,t.jsx)(n.li,{children:"Paste the folder in the same folder as the provisioning order."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"use-case-write-a-script-to-fulfill-a-csv-file",children:"Use Case: Write a Script to Fulfill a CSV File"}),"\n",(0,t.jsx)(n.p,{children:"The goal of the script is to append, for each provisioning order, a line in a CSV file located on an external system which we will access through a Telnet connection."}),"\n",(0,t.jsxs)(n.p,{children:["Let's consider the following ",(0,t.jsx)(n.code,{children:"ResourceType"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\n...\n<ResourceType Identifier="RobotFramework_User_NominativeUser" DisplayName_L1="Robot Framework User (nominative)" Policy="Default" TargetEntityType="RobotFramework_User" Category="RobotFramework" SourceEntityType="Directory_User" ApprovalWorkflowType="One">  <ScalarRule Property="identifier" Binding="EmployeeId"/>  <ScalarRule Property="firstName" Binding="FirstName"/>  <ScalarRule Property="lastName" Binding="LastName"/></ResourceType>...\n\n'})}),"\n",(0,t.jsx)(n.p,{children:"The end of the CSV file must look like:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\ncommand;identifier;firstName;lastName\n...\nInsert;007;James;Bond\n...\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"define-settings",children:"Define settings"}),"\n",(0,t.jsxs)(n.p,{children:["In every Robot Framework script, we need to import the resource file ",(0,t.jsx)(n.code,{children:"UsercubeRobotFramework.resource"}),".\nIn this example, we also need to import the Telnet library to use its functions."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Settings ***\nResource  C:/UsercubeContoso/Runtime/UsercubeRobotFramework.resource\nLibrary  Telnet\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"define-variables",children:"Define variables"}),"\n",(0,t.jsxs)(n.p,{children:["To connect to the external system through Telnet, we need an IP address corresponding to the external system. We will store the IP address in the global variable ",(0,t.jsx)(n.code,{children:"${IPADDRESS}"}),".\nWe also use the global variable ",(0,t.jsx)(n.code,{children:"${CSVFILEPATH}"})," to define the CSV file where the data will be written in the external system."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Variables ***\n${CSVFILEPATH}  /home/contoso/robotframework_users.csv\n${IPADDRESS}  192.168.1.22\n\n"})}),"\n",(0,t.jsx)(n.h3,{id:"define-custom-keywords",children:"Define custom keywords"}),"\n",(0,t.jsx)(n.p,{children:"We define all the custom functions which we will use to provision the external system:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Delete CSV File"}),": removes a possible pre-existing CSV file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Write In CSV"}),": executes a command to write the line in the CSV file in the external system."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Write Data"}),": formats the line to write in the CSV and calls ",(0,t.jsx)(n.code,{children:"Write In CSV"})," to write it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Write Header"}),": defines the header to write in the CSV and calls ",(0,t.jsx)(n.code,{children:"Write Data"})," to write it."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"Open Telnet Connection"}),": opens the Telnet connection to the external system using the login and the password defined in the ",(0,t.jsx)(n.a,{href:"/docs/usercube_saas/usercube/integration-guide/connectors/references-connectors/robotframework/",children:"\nRobot Framework\n"})," attribute in ",(0,t.jsx)(n.code,{children:"appsettings.agent.json"}),", as well as the IP address defined in the ",(0,t.jsx)(n.code,{children:"Variables"})," section."]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\n*** Keywords ***\nDelete CSV File\n    Execute Command  rm ${CSVFILEPATH}\n\nWrite In CSV\n    [Arguments]  ${line}\n    Execute Command  echo ${line} >> ${CSVFILEPATH}\n\nWrite Data\n    [Arguments]  ${command}  ${identifier}  ${firstName}  ${lastName}\n    Write In CSV  \'"${command}","${identifier}","${firstName}","${lastName}"\'\n\nWrite Header\n    Write Data  Command  identifier  firstName  lastName\n\nOpen Telnet Connection\n    Open Connection  ${IPADDRESS}  prompt=$\n    Read Until  login\n    ${LOGIN}=  Get Secure Data  Login  False\n    Write  ${LOGIN}\n    Read Until  Password\n    ${PASSWORD}=  Get Secure Data  Password  True\n    Write  ${PASSWORD}\n\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The method ",(0,t.jsx)(n.code,{children:"Get Secure Data"})," will retrieve the value of the attributes filled in the options in ",(0,t.jsx)(n.code,{children:"appsettings.agent.json"}),". This is the method strongly recommended by Identity Manager. However, you could also enter the value directly into the script (example: ",(0,t.jsx)(n.code,{children:"${LOGIN}= UserName"}),"). This may be easier for initial testing purposes."]}),"\n",(0,t.jsx)(n.h3,{id:"define-mandatory-keywords",children:"Define mandatory keywords"}),"\n",(0,t.jsxs)(n.p,{children:["To be able to provision the external system, we need the three required functions: ",(0,t.jsx)(n.code,{children:"ExecuteAdd"}),", ",(0,t.jsx)(n.code,{children:"ExecuteDelete"})," and ",(0,t.jsx)(n.code,{children:"ExecuteModify"}),". These methods are called by the connector depending on the action to perform on the external system."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Keywords ***\nExecuteAdd\n    [Arguments]  ${order}\n    Write Data  Insert  ${order['Changes']['identifier']}  ${order['Changes']['firstName']}  ${order['Changes']['lastName']}\n\nExecuteDelete\n    [Arguments]  ${order}\n    Write Data  Delete  ${order['Changes']['identifier']}  ${order['Changes']['firstName']}  ${order['Changes']['lastName']}\n\nExecuteModify\n    [Arguments]  ${order}\n    Write Data  Update  ${order['Changes']['identifier']}  ${order['Changes']['firstName']}  ${order['Changes']['lastName']}\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, for each action, we use the function ",(0,t.jsx)(n.code,{children:"Write Data"})," defined in the previous section to write the changes to the CSV file with a corresponding word ",(0,t.jsx)(n.code,{children:"Insert"}),", ",(0,t.jsx)(n.code,{children:"Delete"})," or ",(0,t.jsx)(n.code,{children:"Update"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"define-test-cases",children:"Define test cases"}),"\n",(0,t.jsxs)(n.p,{children:["The function launched by the Robot Framework script will be written in the section ",(0,t.jsx)(n.code,{children:"Test Cases"})," and will be called ",(0,t.jsx)(n.code,{children:"Run Provisioning"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Test Cases ***\nRun Provisioning\n    Open Telnet Connection\n    Delete CSV File\n    Write Header\n    Launch Provisioning\n    Close All Connections\n\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In our test case, we will perform the following operations in ",(0,t.jsx)(n.code,{children:"Run Provisioning"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Open the Telnet connection with the external system."}),"\n",(0,t.jsx)(n.li,{children:"Remove a possible pre-existing CSV file."}),"\n",(0,t.jsx)(n.li,{children:"Write the header to the new CSV file."}),"\n",(0,t.jsxs)(n.li,{children:["Launch the Identity Manager provisioning. The method ",(0,t.jsx)(n.code,{children:"Launch Provisioning"})," is mandatory when using the Robot Framework connector."]}),"\n",(0,t.jsx)(n.li,{children:"Close the Telnet connection with the external system."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"read-the-full-script",children:"Read the full script"}),"\n",(0,t.jsx)(n.p,{children:"The full script is as follows:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\n*** Settings ***\nResource  C:/UsercubeContoso/Runtime/UsercubeRobotFramework.resource\nLibrary  Telnet\n\n*** Variables ***\n${CSVFILEPATH}  /home/contoso/robotframework_users.csv\n${IPADDRESS}  192.168.1.22\n\n*** Keywords ***\nExecuteAdd\n    [Arguments]  ${order}\n    Write Data  Insert  ${order['Changes']['identifier']}  ${order['Changes']['firstName']}  ${order['Changes']['lastName']}\n\nExecuteDelete\n    [Arguments]  ${order}\n    Write Data  Delete  ${order['Changes']['identifier']}  ${order['Changes']['firstName']}  ${order['Changes']['lastName']}\n\nExecuteModify\n    [Arguments]  ${order}\n    Write Data  Update  ${order['Changes']['identifier']}  ${order['Changes']['firstName']}  ${order['Changes']['lastName']}\n\nDelete CSV File\n    Execute Command  rm ${CSVFILEPATH}\n\nWrite In CSV\n    [Arguments]  ${line}\n    Execute Command  echo ${line} >> ${CSVFILEPATH}\n\nWrite Data\n    [Arguments]  ${command}  ${identifier}  ${firstName}  ${lastName}\n    Write In CSV  '\"${command}\",\"${identifier}\",\"${firstName}\",\"${lastName}\"'\n\nWrite Header\n    Write Data  Command  identifier  firstName  lastName\n\nOpen Telnet Connection\n    Open Connection  ${IPADDRESS}  prompt=$\n    Read Until  login\n    ${LOGIN}=  Get Secure Data  Login  False\n    Write  ${LOGIN}\n    Read Until  Password\n    ${PASSWORD}=  Get Secure Data  Password  True\n    Write  ${PASSWORD}\n\n*** Test Cases ***\nRun Provisioning\n    Open Telnet Connection\n    Delete CSV File\n    Write Header\n    Launch Provisioning\n    Close All Connections\n\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}}}]);