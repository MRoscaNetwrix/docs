"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[638648],{28453:(e,i,t)=>{t.d(i,{R:()=>s,x:()=>r});var n=t(296540);const o={},c=n.createContext(o);function s(e){const i=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(c.Provider,{value:i},e.children)}},462367:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>a});const n=JSON.parse('{"id":"config/netapp7mode/activity","title":"NetApp Data ONTAP 7-Mode Activity Auditing Configuration","description":"The Activity Monitor agent employed to monitor NetApp leverages 128-bit encrypted Remote Procedure Calls (RPC), NetApp ONTAP-API, and NetApp FPolicy to monitor file system events. This includes both NetApp 7-Mode and Cluster-Mode configurations. To learn more about FPolicy please visit the NetApp website and read the What FPolicy is article.","source":"@site/docs/activitymonitor/config/netapp7mode/activity.md","sourceDirName":"config/netapp7mode","slug":"/config/netapp7mode/activity","permalink":"/docs/activitymonitor/config/netapp7mode/activity","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/activitymonitor/config/netapp7mode/activity.md","tags":[],"version":"current","frontMatter":{},"sidebar":"activityMonitorSidebar","previous":{"title":"Nasuni Edge Appliance Activity Auditing Configuration","permalink":"/docs/activitymonitor/config/nasuni/activity"},"next":{"title":"Configure FPolicy","permalink":"/docs/activitymonitor/config/netapp7mode/configurefpolicy"}}');var o=t(474848),c=t(28453);const s={},r="NetApp Data ONTAP 7-Mode Activity Auditing Configuration",l={},a=[];function d(e){const i={a:"a",code:"code",em:"em",h1:"h1",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"netapp-data-ontap-7-mode-activity-auditing-configuration",children:"NetApp Data ONTAP 7-Mode Activity Auditing Configuration"})}),"\n",(0,o.jsxs)(i.p,{children:["The Activity Monitor agent employed to monitor NetApp leverages 128-bit encrypted Remote Procedure Calls (RPC), NetApp ONTAP-API, and NetApp FPolicy to monitor file system events. This includes both NetApp 7-Mode and Cluster-Mode configurations. To learn more about FPolicy please visit the NetApp website and read the ",(0,o.jsx)(i.a,{href:"https://library.netapp.com/ecmdocs/ECMP1401220/html/GUID-54FE1A84-6CF0-447E-9AAE-F43B61CA2138.html",children:"What FPolicy is"})," article."]}),"\n",(0,o.jsx)(i.p,{children:"If the activity agent is stopped, a notification will be sent to the NetApp device to disconnect and disable the associated FPolicy policy, but it will not be removed."}),"\n",(0,o.jsx)(i.p,{children:"If the network connection is lost between the activity agent and the NetApp device, the NetApp device is configured with a default timeout to wait for a response. If a response is not received from the Activity Agent within the timeout, then the NetApp device will disconnect and disable the FPolicy policy. The Activity Agent will check every minute by default to see if the FPolicy policy has been disabled and will enable it (if the auto-enable functionality is enabled for the agent). The default setting to check every minute is configurable."}),"\n",(0,o.jsx)(i.p,{children:"The NetApp FPolicy uses a \u201cpush\u201d mechanism such that notification will only be sent to the activity agent when a transaction occurs. Daily activity log files are created only if activity is performed. No activity log file will be created if there is no activity for the day."}),"\n",(0,o.jsx)(i.p,{children:"Configuration Checklist"}),"\n",(0,o.jsx)(i.p,{children:"Complete the following checklist prior to configuring activity monitoring of NetApp Data ONTAP 7-Mode devices. Instructions for each item of the checklist are detailed within the following topics."}),"\n",(0,o.jsx)(i.p,{children:"Checklist Item 1: Plan Deployment"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Gather the following information:","\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Names of the vFiler\u2122(s) to be monitored"}),"\n",(0,o.jsx)(i.li,{children:"DNS name of the CIFS shares(s) to be monitored"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Checklist Item 2: ",(0,o.jsx)(i.a,{href:"/docs/activitymonitor/config/netapp7mode/provisionactivity",children:"Provision FPolicy Account"})]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Group membership with a role granting access to the following commands:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"login-http-admin  \napi-system-api-list  \napi-system-get-version  \napi-cifs-share-list-iter-*  \napi-volume-list-info-iter-*\n"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"For Automatic FPolicy creation (Checklist Item 4), group membership with a role granting access to the following command:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"api-fpolicy*\n"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"To use the \u201cEnable and connect FPolicy\u201d option within the Activity Monitor, group membership with a role granting access to the following command:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"cli-fpolicy*\n"})}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Group membership in:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"ONTAP Power Users"}),"\n",(0,o.jsx)(i.li,{children:"ONTAP Backup Operators"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Checklist Item 3: Firewall Configuration"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"HTTP (80) or HTTPS (443)"}),"\n",(0,o.jsx)(i.li,{children:"HTTP or HTTPS protocols need to be enabled on the NetApp filer"}),"\n",(0,o.jsx)(i.li,{children:"TCP 135"}),"\n",(0,o.jsx)(i.li,{children:"TCP 445"}),"\n",(0,o.jsx)(i.li,{children:"Dynamic port range: TCP/UDP 137-139"}),"\n",(0,o.jsxs)(i.li,{children:["See the ",(0,o.jsx)(i.a,{href:"/docs/activitymonitor/config/netapp7mode/enablehttp",children:"Enable HTTP or HTTPS"})," topic for instructions."]}),"\n"]}),"\n",(0,o.jsxs)(i.p,{children:["Checklist Item 4: ",(0,o.jsx)(i.a,{href:"/docs/activitymonitor/config/netapp7mode/configurefpolicy",children:"Configure FPolicy"})]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"If using vFilers:"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"FPolicy operates on the vFiler so the FPolicy must be created on the vFiler"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.strong,{children:"NOTE:"})," Activity Monitor must target the vFiler"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(i.li,{children:["\n",(0,o.jsx)(i.p,{children:"Select method:"}),"\n",(0,o.jsxs)(i.p,{children:[(0,o.jsx)(i.em,{children:(0,o.jsx)(i.strong,{children:"RECOMMENDED:"})})," Configure FPolicy Manually \u2013 A tailored FPolicy"]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["Allow the Activity Monitor to create an FPolicy automatically","\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"This option is enabled when the Activity Monitor agent is configured to monitor the NetApp device on the NetApp FPolicy Configuration page of the Add New Hosts window."}),"\n",(0,o.jsx)(i.li,{children:"It monitors all file system activity."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(i.p,{children:"Checklist Item 5: Activity Monitor Configuration"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsx)(i.li,{children:"Deploy the Activity Monitor Activity Agent to a Windows proxy server"}),"\n",(0,o.jsx)(i.li,{children:"Configure the Activity Agent to monitor the NetApp device"}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,c.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);