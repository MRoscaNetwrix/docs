<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-usercube_saas docs-version-current docs-doc-page docs-doc-id-usercube/installation-guide/reverse-proxy/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Reverse Proxy | Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" name="twitter:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" property="og:url" content="https://docs.yourcompany.com/docs/usercube_saas/usercube/installation-guide/reverse-proxy/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-usercube_saas-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-usercube_saas-current"><meta data-rh="true" property="og:title" content="Reverse Proxy | Documentation"><meta data-rh="true" name="description" content="Identity Manager can be installed behind a reverse proxy that acts as an intermediate server between users and Identity Manager&#x27;s server, in order to process users&#x27; requests and redirect them to the right server(s), for performance and security purposes."><meta data-rh="true" property="og:description" content="Identity Manager can be installed behind a reverse proxy that acts as an intermediate server between users and Identity Manager&#x27;s server, in order to process users&#x27; requests and redirect them to the right server(s), for performance and security purposes."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.yourcompany.com/docs/usercube_saas/usercube/installation-guide/reverse-proxy/"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/usercube_saas/usercube/installation-guide/reverse-proxy/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/usercube_saas/usercube/installation-guide/reverse-proxy/" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"><link rel="stylesheet" href="/assets/css/styles.4cbdd69d.css">
<script src="/assets/js/runtime~main.a42836f1.js" defer="defer"></script>
<script src="/assets/js/main.3131faef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/1secure">1Secure</a></li><li><a class="dropdown__link" href="/docs/accessanalyzer">Access Analyzer</a></li><li><a class="dropdown__link" href="/docs/accessinformationcenter">Access Information Center</a></li><li><a class="dropdown__link" href="/docs/activitymonitor">Activity Monitor</a></li><li><a class="dropdown__link" href="/docs/auditor">Auditor</a></li><li><a class="dropdown__link" href="/docs/changetracker">Change Tracker</a></li><li><a class="dropdown__link" href="/docs/dataclassification">Data Classification</a></li><li><a class="dropdown__link" href="/docs/groupid">Group ID</a></li><li><a class="dropdown__link" href="/docs/passwordpolicyenforcer">Password Policy Enforcer</a></li><li><a class="dropdown__link" href="/docs/passwordreset">Password Reset</a></li><li><a class="dropdown__link" href="/docs/passwordsecure">Password Secure</a></li><li><a class="dropdown__link" href="/docs/policypak">PolicyPak</a></li><li><a class="dropdown__link" href="/docs/privilegesecure">Privilege Secure</a></li><li><a class="dropdown__link" href="/docs/recoveryforactivedirectory">Recovery for Active Directory</a></li><li><a class="dropdown__link" href="/docs/strongpointfornetsuite">StrongPoint for NetSuite</a></li><li><a class="dropdown__link" href="/docs/strongpointforsalesforce">StrongPoint for Salesforce</a></li><li><a class="dropdown__link" href="/docs/strongpointnetsuiteflashlight">StrongPoint NetSuite Flashlight</a></li><li><a class="dropdown__link" href="/docs/strongpointsalesforceflashlight">StrongPoint Salesforce Flashlight</a></li><li><a class="dropdown__link" href="/docs/threatmanager">Threat Manager</a></li><li><a class="dropdown__link" href="/docs/threatprevention">Threat Prevention</a></li><li><a class="dropdown__link" href="/docs/usercube">UserCube</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/usercube_saas">UserCube SaaS</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="http://github.com/netwrix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/usercube_saas/">Usercube SaaS</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/usercube_saas/usercube/">A software solution to match your IGA needs</a><button aria-label="Collapse sidebar category &#x27;A software solution to match your IGA needs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/usercube_saas/usercube/installation-guide/">Installation Guide</a><button aria-label="Collapse sidebar category &#x27;Installation Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube_saas/usercube/installation-guide/overview/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube_saas/usercube/installation-guide/production-ready/">Production-Ready Installation</a><button aria-label="Expand sidebar category &#x27;Production-Ready Installation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube_saas/usercube/installation-guide/quick-start/">Quick Start Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube_saas/usercube/installation-guide/requirements/">Requirements</a><button aria-label="Expand sidebar category &#x27;Requirements&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/usercube_saas/usercube/installation-guide/reverse-proxy/">Reverse Proxy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube_saas/usercube/integration-guide/">Integration Guide</a><button aria-label="Expand sidebar category &#x27;Integration Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube_saas/usercube/introduction-guide/">Introduction Guide</a><button aria-label="Expand sidebar category &#x27;Introduction Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube_saas/usercube/migration-guide/">Migration Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube_saas/usercube/user-guide/">User Guide</a><button aria-label="Expand sidebar category &#x27;User Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube_saas/usercube/whatsnew/">What&#x27;s New</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/usercube_saas/usercube/"><span itemprop="name">A software solution to match your IGA needs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/usercube_saas/usercube/installation-guide/"><span itemprop="name">Installation Guide</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Reverse Proxy</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Reverse Proxy</h1></header>
<p>Identity Manager can be installed behind a <a href="https://en.wikipedia.org/wiki/Reverse_proxy" target="_blank" rel="noopener noreferrer">reverse proxy</a> that acts as an intermediate server between users and Identity Manager&#x27;s server, in order to process users&#x27; requests and redirect them to the right server(s), for performance and security purposes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>A reverse proxy is usually used when:</p>
<ul>
<li>
<p>needing to encrypt the requests from/to end-users on the one hand, and on the other hand to be able to monitor plain text requests from/to Identity Manager&#x27;s server;</p>
<p><img decoding="async" loading="lazy" alt="Proxy Purposes: Encryption" src="/assets/images/proxy_purpose_encryption-f405b5bdfbaa304010e19aa35d11a835.webp" width="2423" height="1007" class="img_ev3q"></p>
</li>
<li>
<p>installing Identity Manager with an integrated agent on a network isolated from the users&#x27; browsers, in order to be able to access sensitive systems which are protected by being set up on a network isolated from the Internet;</p>
<p><img decoding="async" loading="lazy" alt="Proxy Installation Example" src="/assets/images/proxy_example-afcb156dbef5caa809c1b79c13228e10.webp" width="2846" height="2470" class="img_ev3q"></p>
<p>This installation will be used for the configuration examples below.</p>
</li>
<li>
<p>using several Identity Manager&#x27;s server instances for load-balancing purposes.</p>
<p><img decoding="async" loading="lazy" alt="Proxy Purposes: Load Balancing" src="/assets/images/proxy_purpose_loadbalancing-f7249d9a621db1f1331e899040b879b5.webp" width="2399" height="1860" class="img_ev3q"></p>
</li>
</ul>
<p>As Identity Manager is session-less, working with several servers does not imply the need to synchronize sessions between servers, nor the need to guarantee that a particular IP will be processed by a particular server.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nginx">Nginx<a href="#nginx" class="hash-link" aria-label="Direct link to Nginx" title="Direct link to Nginx">​</a></h3>
<p>For these tasks, <a href="https://docs.nginx.com/nginx/admin-guide/web-server/reverse-proxy/#nginx" target="_blank" rel="noopener noreferrer">nginx</a> is a relevant choice of reverse proxy. There are several versions of nginx available, suitable for several Linux-based environments. <a href="https://docs.nginx.com/nginx/admin-guide/installing-nginx/" target="_blank" rel="noopener noreferrer">Installation instructions</a> can be found directly on the nginx website.</p>
<p>At its core, Identity Manager is an ASP.NET application with a Kestrel server. We can configure a nginx reverse proxy accordingly by following <a href="https://learn.microsoft.com/en-us/aspnet/core/host-and-deploy/linux-nginx?view=aspnetcore-8.0&amp;tabs=linux-ubuntu#microsofts-guidelines" target="_blank" rel="noopener noreferrer">Microsoft&#x27;s guidelines</a>.</p>
<p>Nginx <a href="https://docs.nginx.com/nginx/admin-guide/basic-functionality/managing-configuration-files/" target="_blank" rel="noopener noreferrer">configuration files</a> are usually located in <code>/etc/nginx</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancing">Load balancing<a href="#load-balancing" class="hash-link" aria-label="Direct link to Load balancing" title="Direct link to Load balancing">​</a></h3>
<p>Nginx offers several <a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/#load-balancing-methods" target="_blank" rel="noopener noreferrer">load balancing methods</a> which are all compatible with Identity Manager.</p>
<p>Then, in order for servers to be able to properly schedule and coordinate synchronization and provisioning, the following file locations must be shared by all Identity Manager servers:</p>
<ul>
<li>TempFolderPath</li>
<li>WorkFolderPath</li>
</ul>
<p>All Identity Manager servers also share a database. See the <a href="/docs/usercube_saas/usercube/integration-guide/network-configuration/agent-configuration/appsettings/">Application Settings</a> topic for additional information.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="basic-configuration">Basic Configuration<a href="#basic-configuration" class="hash-link" aria-label="Direct link to Basic Configuration" title="Direct link to Basic Configuration">​</a></h2>
<p>The following is a basic configuration, in the <code>nginx.conf</code> file, with one virtual host, that directs incoming requests on <code>&lt;listening-port&gt;</code> from network 1 to a Identity Manager server instance at <code>&lt;Usercube-server-url&gt;</code> on network 2.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nginx.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">worker_processes auto;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# Basic Settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	sendfile on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	tcp_nopush on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	tcp_nodelay on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	keepalive_timeout 65;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	types_hash_max_size 2048;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	default_type application/octet-stream;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# SSL Settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	ssl_prefer_server_ciphers on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# Logging Settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	access_log /nginx-1.19.7/logs/access.log;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	error_log /nginx-1.19.7/logs/error.log;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# Gzip Settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	gzip on;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	# Virtual Host Configs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	##</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		listen       &lt;listening-port&gt; default_server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		server_name  &lt;server-name&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_pass         http://&lt;Usercube-server-url&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_set_header   Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_set_header   Connection keep-alive;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_set_header   Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_cache_bypass $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_set_header   X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			proxy_set_header   X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Where:</p>
<ul>
<li><code>&lt;listening-port&gt;</code> is the port that nginx listens to on network 1 for incoming HTTP requests. It should be set to <code>80</code>, except if you have another web server listening for port 80 requests and passing them to your nginx server.</li>
<li><code>&lt;server-name&gt;</code> is the URL used by end-users to request Identity Manager&#x27;s server, such as <code>contoso.usercube.com</code>. It is the content of the host header in the incoming HTTP request.</li>
<li><code>&lt;Usercube-server-url&gt;</code> is Identity Manager&#x27;s server URL on network 2.</li>
</ul>
<p>With this configuration, SSL is enabled between the nginx proxy and the client, but not between the proxy and Identity Manager&#x27;s server. <code>gzip</code> is used to compress files to be sent over the network.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="static-files">Static files<a href="#static-files" class="hash-link" aria-label="Direct link to Static files" title="Direct link to Static files">​</a></h3>
<p>Performance can be enhanced for static file serving. This requires extracting static files such as the UI JavaScript application and the logo and pictures, and storing them on the nginx server directly.See more information about <a href="https://docs.nginx.com/nginx/admin-guide/web-server/serving-static-content/" target="_blank" rel="noopener noreferrer">static file serving with nginx</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="load-balancing-configuration">Load Balancing Configuration<a href="#load-balancing-configuration" class="hash-link" aria-label="Direct link to Load Balancing Configuration" title="Direct link to Load Balancing Configuration">​</a></h2>
<p>Load balancing involves at least two Identity Manager servers to which <a href="https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/" target="_blank" rel="noopener noreferrer">nginx, acting as a load balancer</a>, distributes the load of incoming requests.</p>
<p>Then, in addition to the configuration from the previous example, a group of servers must be declared, using the <code>upstream</code> directive in the <code>http</code> section.</p>
<p>The following configuration defines a group named <code>usercubegroup</code> which contains two server configurations, each one resolving to an actual Identity Manager&#x27;s server instance:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    upstream usercubegroup {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server usercube1.contoso.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server usercube2.contoso.com;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then, the name of the group takes the place of <code>&lt;Usercube-server-url&gt;</code> in the virtual host definition:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        listen       &lt;listening-port&gt; default_server;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        server_name  &lt;server-name&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		location / {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_pass         http://IdentityManagergroup;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_set_header   Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_set_header   Connection keep-alive;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_set_header   Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_cache_bypass $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	        proxy_set_header   X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		    proxy_set_header   X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	   }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube_saas/usercube/installation-guide/reverse-proxy/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/usercube_saas/usercube/installation-guide/requirements/server-requirements/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Server</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/usercube_saas/usercube/integration-guide/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Integration Guide</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#nginx" class="table-of-contents__link toc-highlight">Nginx</a></li><li><a href="#load-balancing" class="table-of-contents__link toc-highlight">Load balancing</a></li></ul></li><li><a href="#basic-configuration" class="table-of-contents__link toc-highlight">Basic Configuration</a><ul><li><a href="#static-files" class="table-of-contents__link toc-highlight">Static files</a></li></ul></li><li><a href="#load-balancing-configuration" class="table-of-contents__link toc-highlight">Load Balancing Configuration</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>