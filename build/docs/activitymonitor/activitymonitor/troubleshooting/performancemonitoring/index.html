<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-activitymonitor docs-version-current docs-doc-page docs-doc-id-activitymonitor/troubleshooting/performancemonitoring" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Performance Monitoring | Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" name="twitter:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" property="og:url" content="https://docs.yourcompany.com/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-activitymonitor-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-activitymonitor-current"><meta data-rh="true" property="og:title" content="Performance Monitoring | Documentation"><meta data-rh="true" name="description" content="This topic provides a list of Activity Monitor performance counters and standard system-wide performance counters (Memory and CPU usage, TCP disconnections, etc) that are recommended for Activity Monitor performance monitoring. These performance counters can help diagnose performance issues."><meta data-rh="true" property="og:description" content="This topic provides a list of Activity Monitor performance counters and standard system-wide performance counters (Memory and CPU usage, TCP disconnections, etc) that are recommended for Activity Monitor performance monitoring. These performance counters can help diagnose performance issues."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.yourcompany.com/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"><link rel="stylesheet" href="/assets/css/styles.4cbdd69d.css">
<script src="/assets/js/runtime~main.a42836f1.js" defer="defer"></script>
<script src="/assets/js/main.3131faef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/1secure">1Secure</a></li><li><a class="dropdown__link" href="/docs/accessanalyzer">Access Analyzer</a></li><li><a class="dropdown__link" href="/docs/accessinformationcenter">Access Information Center</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/activitymonitor">Activity Monitor</a></li><li><a class="dropdown__link" href="/docs/auditor">Auditor</a></li><li><a class="dropdown__link" href="/docs/changetracker">Change Tracker</a></li><li><a class="dropdown__link" href="/docs/dataclassification">Data Classification</a></li><li><a class="dropdown__link" href="/docs/groupid">Group ID</a></li><li><a class="dropdown__link" href="/docs/passwordpolicyenforcer">Password Policy Enforcer</a></li><li><a class="dropdown__link" href="/docs/passwordreset">Password Reset</a></li><li><a class="dropdown__link" href="/docs/passwordsecure">Password Secure</a></li><li><a class="dropdown__link" href="/docs/policypak">PolicyPak</a></li><li><a class="dropdown__link" href="/docs/privilegesecure">Privilege Secure</a></li><li><a class="dropdown__link" href="/docs/recoveryforactivedirectory">Recovery for Active Directory</a></li><li><a class="dropdown__link" href="/docs/strongpointfornetsuite">StrongPoint for NetSuite</a></li><li><a class="dropdown__link" href="/docs/strongpointforsalesforce">StrongPoint for Salesforce</a></li><li><a class="dropdown__link" href="/docs/strongpointnetsuiteflashlight">StrongPoint NetSuite Flashlight</a></li><li><a class="dropdown__link" href="/docs/strongpointsalesforceflashlight">StrongPoint Salesforce Flashlight</a></li><li><a class="dropdown__link" href="/docs/threatmanager">Threat Manager</a></li><li><a class="dropdown__link" href="/docs/threatprevention">Threat Prevention</a></li><li><a class="dropdown__link" href="/docs/usercube">UserCube</a></li><li><a class="dropdown__link" href="/docs/usercube_saas">UserCube SaaS</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="http://github.com/netwrix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/activitymonitor/activitymonitor/admin/agents/add/activedirectory">activitymonitor</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/activitymonitor/activitymonitor/admin/agents/add/activedirectory">admin</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/gettingstarted">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/activitymonitor/activitymonitor/install/agent/manual">install</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/overview">Netwrix Activity Monitor v8.0 Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/activitymonitor/activitymonitor/requirements/activityagent">requirements</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/activitymonitor/activitymonitor/restapi/agent">restapi</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/activitymonitor/activitymonitor/siem/overview">siem</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/antivirusexclusions">troubleshooting</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/antivirusexclusions">Antivirus Exclusions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/backuprestore/agentbackup">backuprestore</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/credentialpasswords">Update Credential Passwords</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/overview">Troubleshooting and Maintenance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring">Performance Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/troubleshooting/tracelogs">Trace Logs</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/activitymonitor/activitymonitor/whatsnew">What&#x27;s New</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/activitymonitor/config/activedirectory/activity">config</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/activitymonitor/">Activity Monitor</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">activitymonitor</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">troubleshooting</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Performance Monitoring</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Performance Monitoring</h1></header>
<p>This topic provides a list of Activity Monitor performance counters and standard system-wide performance counters (Memory and CPU usage, TCP disconnections, etc) that are recommended for Activity Monitor performance monitoring. These performance counters can help diagnose performance issues.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="performance-counters">Performance Counters<a href="#performance-counters" class="hash-link" aria-label="Direct link to Performance Counters" title="Direct link to Performance Counters">​</a></h2>
<p>The following performance counters are provided by Activity Monitor.</p>
<table><thead><tr><th>Category</th><th>Recommended</th><th>Counter</th><th>Description</th></tr></thead><tbody><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Events Received</td><td>Number of events received from NetApp</td></tr><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Events Received/sec</td><td>Rate at which events are received from NetApp</td></tr><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Events Reported</td><td>Number of events passed the filters and being reported to outputs</td></tr><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Events Reported/sec</td><td>Rate at which events are reported to outputs</td></tr><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Session Negotiated</td><td>Number of connections established with ONTAP cluster nodes</td></tr><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Active Connections</td><td>Number of active connections with ONTAP cluster nodes</td></tr><tr><td>NetApp</td><td></td><td>Activity Monitor - NetApp\Outage Files</td><td>Number of outage (resilience) files processed</td></tr><tr><td>NetApp</td><td>✔</td><td>Activity Monitor - NetApp\Overloaded</td><td>Number of times the agent was overloaded and had to limit the rate of events. This counter may increase from time to time when processing large batches of events. But if it keeps increasing, it is a sure sign that the agent is not coping with the load. Consider moving some SVMs to another agent or spreading the load from one SVM across multiple agents.</td></tr><tr><td>VNX, Isilon, Unity</td><td>✔</td><td>Activity Monitor - Dell\Events Received</td><td>Number of events received from CEE</td></tr><tr><td>VNX, Isilon, Unity</td><td>✔</td><td>Activity Monitor - Dell\Events Received/sec</td><td>Rate at which events are received from CEE</td></tr><tr><td>VNX, Isilon, Unity</td><td>✔</td><td>Activity Monitor - Dell\Events Reported</td><td>Number of events passed the filters and being reported to outputs</td></tr><tr><td>VNX, Isilon, Unity</td><td>✔</td><td>Activity Monitor - Dell\Events Reported/sec</td><td>Rate at which events are reported to outputs</td></tr><tr><td>VNX, Isilon, Unity</td><td>✔</td><td>Activity Monitor - Dell\Queue Size</td><td>Number of events received from CEE and waiting in queue to be processed</td></tr><tr><td>VNX, Isilon, Unity</td><td>✔</td><td>Activity Monitor - Dell\Receive Throttling</td><td>Delay, in milliseconds, introduced to manage the queue</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Events Reported</td><td>Total number of events reported</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Events Reported/sec</td><td>Rate at which events are reported</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Events Reported to Files</td><td>Total number of events reported to log files</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Events Reported to Syslog</td><td>Total number of events reported to syslog servers</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Events Reported to AMQP</td><td>Total number of events reported to AMQP servers (not used currently)</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Resolved SIDs</td><td>Number of attempts, both successful and failed, to resolve SIDs to names</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Resolved SIDs/sec</td><td>Rate at which SIDs are resolved to names</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Resolved SIDs Failures</td><td>Number of failed attempts to resolve SIDs to names</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Resolved SIDs Avg Time</td><td>The moving average length of time, in microseconds, per a SID to name translation</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\Resolved SIDs Max Time</td><td>The moving maximum length of time, in microseconds, per a SID to name translation</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Translated UIDs</td><td>Number of attempts, both successful and failed, to translate UIDs to SIDs</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Translated UIDs/sec</td><td>Rate at which UIDs are translated to SIDs</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Translated UIDs Failures</td><td>Number of failed attempts to translate UIDs to SIDs</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Translated UIDs Avg Time</td><td>The moving average length of time, in microseconds, per a UID to SID translation</td></tr><tr><td>Outputs</td><td></td><td>Activity Monitor - Outputs\Translated UIDs Max Time</td><td>The moving maximum length of time, in microseconds, per a UID to SID translation</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\DNS Queries</td><td>Number of DNS queries, both successful and failed</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\DNS Queries/sec</td><td>Rate at which DNS queries are executed</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\DNS Queries Failures</td><td>Number of failed DNS queries</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\DNS Queries Avg Time</td><td>The moving average length of time, in microseconds, per a DNS query</td></tr><tr><td>Outputs</td><td>✔</td><td>Activity Monitor - Outputs\DNS Queries Max Time</td><td>The moving maximum length of time, in microseconds, per a DNS query</td></tr></tbody></table>
<p><strong>NOTE:</strong> DNS and AD queries typically contribute the most to the processing time. Since the resolution occurs in real time, slow responses can affect throughput (A 100ms DNS response limits the throughput to 10 events per second). Observing average and maximum values of DNS Queries Time, Resolved SIDs Time, and Translated UIDs Time allows you to estimate the response time.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recommended-system-performance-counters">Recommended System Performance Counters<a href="#recommended-system-performance-counters" class="hash-link" aria-label="Direct link to Recommended System Performance Counters" title="Direct link to Recommended System Performance Counters">​</a></h2>
<p>In addition to the Activity Monitor performance counters, it is recommended to use the following performance counters:</p>
<table><thead><tr><th>Counter</th><th>Notes</th></tr></thead><tbody><tr><td>Processor(_Total)% Processor Time</td><td>The percentage of elapsed time that the processor spends to execute a non-Idle thread.</td></tr><tr><td>Memory\Available MBytes</td><td>The amount of physical memory, in Megabytes, immediately available for allocation to a process or for system use.</td></tr><tr><td>Paging File(_Total)% Usage</td><td>The percentage of the paging file that is currently in use.</td></tr><tr><td>TCPv4\Connections Reset</td><td>The rate of reset TCPv4 connections</td></tr><tr><td>TCPv4\Segments Received/sec</td><td>The quantity of segments received via TCPv4 per second.</td></tr><tr><td>TCPv4\Segments Retransmitted/Sec</td><td>Quantity of segments retransmitted via TCPv4 per second.</td></tr><tr><td>TCPv6\Segments Received/sec</td><td>The quantity of segments received via TCPv6 per second.</td></tr><tr><td>TCPv6\Segments Retransmitted/Sec</td><td>Quantity of segments retransmitted via TCPv6 per second.</td></tr><tr><td>Network Interface(*)\Bytes Received/sec</td><td>From all network adapters:  The rate at which bytes are received.</td></tr><tr><td>Network Interface(*)\Bytes Sent/sec</td><td>From all network adapters:  The rate at which bytes are sent.</td></tr><tr><td>Network Interface(*)\Output Queue Length</td><td>From all network adapters:  The length of the output packet queue (in packets).</td></tr><tr><td>Network Interface(*)\Packets Received Discarded</td><td>From all network adapters:  The number of inbound packets that were chosen to be discarded even though no errors had been detected to prevent their being deliverable to a higher-layer protocol.</td></tr><tr><td>Network Interface(*)\Packets Received Errors</td><td>From all network adapters:  The number of inbound packets that contained errors. As a result, the errored packets were not delivered to a higher-layer protocol.</td></tr><tr><td>Process(ConfigurationAgent.Grpc.Host)% Processor Time</td><td>For Agent:  The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(ConfigurationAgent.Grpc.Host)\Elapsed Time</td><td>For Agent:  The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(ConfigurationAgent.Grpc.Host)\Handle Count</td><td>For Agent:  The number of operating system handles the process has opened.</td></tr><tr><td>Process(ConfigurationAgent.Grpc.Host)\Thread Count</td><td>For Agent:  The set of threads that are running in the associated process.</td></tr><tr><td>Process(ConfigurationAgent.Grpc.Host)\Private Bytes</td><td>For Agent:  The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(ConfigurationAgent.Grpc.Host)\Working Set</td><td>For Agent:  The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(ConfigurationAgent)% Processor Time</td><td>For Agent version 6.0 and earlier: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(ConfigurationAgent)\Elapsed Time</td><td>For Agent version 6.0 and earlier: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(ConfigurationAgent)\Handle Count</td><td>For Agent version 6.0 and earlier: The number of operating system handles the process has opened.</td></tr><tr><td>Process(ConfigurationAgent)\Thread Count</td><td>For Agent version 6.0 and earlier: The set of threads that are running in the associated process.</td></tr><tr><td>Process(ConfigurationAgent)\Private Bytes</td><td>For Agent version 6.0 and earlier: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(ConfigurationAgent)\Working Set</td><td>For Agent version 6.0 and earlier: The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(SBTService)% Processor Time</td><td>For Windows Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(SBTService)\Elapsed Time</td><td>For Windows Monitoring: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(SBTService)\Handle Count</td><td>For Windows Monitoring: The number of operating system handles the process has opened.</td></tr><tr><td>Process(SBTService)\Thread Count</td><td>For Windows Monitoring: The set of threads that are running in the associated process.</td></tr><tr><td>Process(SBTService)\Private Bytes</td><td>For Windows Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(SBTService)\Working Set</td><td>For Windows Monitoring: The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(FPolicyServerSvc)% Processor Time</td><td>For NetApp Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(FPolicyServerSvc)\Elapsed Time</td><td>For NetApp Monitoring: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(FPolicyServerSvc)\Handle Count</td><td>For NetApp Monitoring: The number of operating system handles the process has opened.</td></tr><tr><td>Process(FPolicyServerSvc)\Thread Count</td><td>For NetApp Monitoring: The set of threads that are running in the associated process.</td></tr><tr><td>Process(FPolicyServerSvc)\Private Bytes</td><td>For NetApp Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(FPolicyServerSvc)\Working Set</td><td>For NetApp Monitoring: The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(HitachiService)% Processor Time</td><td>For Hitachi Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(HitachiService)\Elapsed Time</td><td>For Hitachi Monitoring: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(HitachiService)\Handle Count</td><td>For Hitachi Monitoring: The number of operating system handles the process has opened.</td></tr><tr><td>Process(HitachiService)\Thread Count</td><td>For Hitachi Monitoring: The set of threads that are running in the associated process.</td></tr><tr><td>Process(HitachiService)\Private Bytes</td><td>For Hitachi Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(HitachiService)\Working Set</td><td>For Hitachi Monitoring: The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(CelerraServerSvc)% Processor Time</td><td>For Dell Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(CelerraServerSvc)\Elapsed Time</td><td>For Dell Monitoring: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(CelerraServerSvc)\Handle Count</td><td>For Dell Monitoring: The number of operating system handles the process has opened.</td></tr><tr><td>Process(CelerraServerSvc)\Thread Count</td><td>For Dell Monitoring: The set of threads that are running in the associated process.</td></tr><tr><td>Process(CelerraServerSvc)\Private Bytes</td><td>For Dell Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(CelerraServerSvc)\Working Set</td><td>For Dell Monitoring: The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(FSACLoggingSvc)% Processor Time</td><td>For Logging Service: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(FSACLoggingSvc)\Elapsed Time</td><td>For Logging Service: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(FSACLoggingSvc)\Handle Count</td><td>For Logging Service: The number of operating system handles the process has opened.</td></tr><tr><td>Process(FSACLoggingSvc)\Thread Count</td><td>For Logging Service: The set of threads that are running in the associated process.</td></tr><tr><td>Process(FSACLoggingSvc)\Private Bytes</td><td>For Logging Service: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(FSACLoggingSvc)\Working Set</td><td>For Logging Service: The associated process&#x27;s physical memory usage, in bytes.</td></tr><tr><td>Process(MonitorService)% Processor Time</td><td>For Other, Different Device Monitoring: The percentage of elapsed time that all of process threads used the processor to execution instructions.</td></tr><tr><td>Process(MonitorService)\Elapsed Time</td><td>For Other, Different Device Monitoring: The duration from when the process was started until the time it terminated.</td></tr><tr><td>Process(MonitorService)\Handle Count</td><td>For Other, Different Device Monitoring: The number of operating system handles the process has opened.</td></tr><tr><td>Process(MonitorService)\Thread Count</td><td>For Other, Different Device Monitoring: The set of threads that are running in the associated process.</td></tr><tr><td>Process(MonitorService)\Private Bytes</td><td>For Other, Different Device Monitoring: The total amount of memory that a process has allocated, not including memory shared with other processes.</td></tr><tr><td>Process(MonitorService)\Working Set</td><td>For Other, Different Device Monitoring: The associated process&#x27;s physical memory usage, in bytes.</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-performance-counters">Register Performance Counters<a href="#register-performance-counters" class="hash-link" aria-label="Direct link to Register Performance Counters" title="Direct link to Register Performance Counters">​</a></h2>
<p>The Activity Monitor performance counters are not registered by default and must be registered manually.</p>
<p>Follow the steps to register the Activity Monitor performance counters on each SAM Agent server.</p>
<p><strong>Step 1 –</strong> Run <code>cmd.exe</code> as Administrator.</p>
<p><strong>Step 2 –</strong> Change current directory to the agent installation folder (<code>C:\Program Files\Netwrix\Activity Monitor\Agent</code>).</p>
<p>cd &quot;C:\Program Files\Netwrix\Activity Monitor\Agent&quot;</p>
<p><strong>Step 3 –</strong> Register the performance counters manifest file.</p>
<p>lodctr /M<!-- -->:PerfCounters<!-- -->.man</p>
<p>Expected output: Info: Successfully installed performance counters in <code>C:\Program Files\Netwrix\Activity Monitor\Agent\PerfCounters.man</code></p>
<p><strong>Step 4 –</strong> Restart the services:</p>
<p>sc stop SBFileMonAgentSvc</p>
<p>sc stop FPolicyServerSvc</p>
<p>sc stop CelerraServerSvc</p>
<p>sc stop SBTLoggingSvc</p>
<p>sc start SBFileMonAgentSvc</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="collect-performance-data">Collect Performance Data<a href="#collect-performance-data" class="hash-link" aria-label="Direct link to Collect Performance Data" title="Direct link to Collect Performance Data">​</a></h2>
<p>The performance data can be observed or saved using any tool capable of collecting performance counters. For example, Performance Monitor.</p>
<p><strong>NOTE:</strong> The following script is only compatible with PowerShell 5.X and previous versions. Using PowerShell 7.X requires Windows Performance Monitor to be configured to collect performance counters.</p>
<p>Below is a PowerShell script that collects the counters every second and stores them in <code>perfcounters_SERVERNAME_TIMESTAMP.csv</code> files. The expected file size per day is about 50MB.</p>
<p>Run the script on each agent server using the following command:</p>
<p>powershell -file AM.PerfCollect.ps1</p>
<p>To stop the script press <strong>Ctrl+C</strong>.</p>
<p>Script (save it to AM.PerfCollect.ps1):</p>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$sampleInterval = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$maxSamples = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$outputFile = &quot;perfcounters_$($env:COMPUTERNAME)_$(Get-Date -Format &quot;yyyy_MM_dd_HH_mm_ss&quot;).csv&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$counters =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;\Processor(_Total)\% Processor Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Memory\Available MBytes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Paging File(_Total)\% Usage&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\TCPv4\Connections Reset&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\TCPv4\Segments Received/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\TCPv4\Segments Retransmitted/Sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\TCPv6\Connections Reset&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\TCPv6\Segments Received/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\TCPv6\Segments Retransmitted/Sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Network Interface(*)\Bytes Received/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Network Interface(*)\Bytes Sent/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Network Interface(*)\Output Queue Length&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Network Interface(*)\Packets Received Discarded&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Network Interface(*)\Packets Received Errors&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Events Received&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Events Received/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Events Reported&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Events Reported/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Session Negotiated&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Active Connections&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - NetApp\Outage Files&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - Dell\Events Received&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - Dell\Events Received/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - Dell\Events Reported&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - Dell\Events Reported/sec&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - Dell\Queue Size&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Activity Monitor - Dell\Receive Throttling&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FPolicyServerSvc)\% Processor Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FPolicyServerSvc)\Elapsed Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FPolicyServerSvc)\Handle Count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FPolicyServerSvc)\Thread Count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FPolicyServerSvc)\Private Bytes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FPolicyServerSvc)\Working Set&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FSACLoggingSvc)\% Processor Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FSACLoggingSvc)\Elapsed Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FSACLoggingSvc)\Handle Count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FSACLoggingSvc)\Thread Count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FSACLoggingSvc)\Private Bytes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(FSACLoggingSvc)\Working Set&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(CelerraServerSvc)\% Processor Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(CelerraServerSvc)\Elapsed Time&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(CelerraServerSvc)\Handle Count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(CelerraServerSvc)\Thread Count&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(CelerraServerSvc)\Private Bytes&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">,&quot;\Process(CelerraServerSvc)\Working Set&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$variables = @{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SampleInterval = $sampleInterval</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Counter = $counters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if ($maxSamples -eq 0) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$variables.Add(&quot;Continuous&quot;, 1)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$variables.Add(&quot;MaxSamples&quot;, &quot;$maxSamples&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Write-Host &quot;Collecting performance counters to $outputFile... Press Ctrl+C to stop.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Get-Counter @variables | Export-Counter -FileFormat csv -Path $outputFile -Force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="unregister-performance-counters">Unregister Performance Counters<a href="#unregister-performance-counters" class="hash-link" aria-label="Direct link to Unregister Performance Counters" title="Direct link to Unregister Performance Counters">​</a></h2>
<p>When performance monitoring is not needed anymore, unregister the Activity Monitor performance counters.</p>
<p>Follow the steps to unregister the Activity Monitor performance counters on each SAM Agent server.</p>
<p><strong>Step 1 –</strong> Run <code>cmd.exe</code> as Administrator.</p>
<p><strong>Step 2 –</strong> Change current directory to the agent installation folder.</p>
<p>cd &quot;C:\Program Files\Netwrix\Activity Monitor\Agent&quot;</p>
<p><strong>Step 3 –</strong> Unregister the performance counters manifest file.</p>
<p>unlodctr /M<!-- -->:PerfCounters<!-- -->.man</p>
<p>Expected output: Info: Successfully uninstalled the performance counters from the counter definition XML file PerfCounters.man.</p>
<p><strong>Step 4 –</strong> Restart the services:</p>
<p>sc stop SBFileMonAgentSvc</p>
<p>sc stop FPolicyServerSvc</p>
<p>sc stop CelerraServerSvc</p>
<p>sc stop SBTLoggingSvc</p>
<p>sc start SBFileMonAgentSvc</p>
<p>Once the services have been restarted, the Activity Monitor performance counters are unregistered.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/activitymonitor/activitymonitor/troubleshooting/performancemonitoring.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/activitymonitor/activitymonitor/troubleshooting/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Troubleshooting and Maintenance</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/activitymonitor/activitymonitor/troubleshooting/tracelogs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Trace Logs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#performance-counters" class="table-of-contents__link toc-highlight">Performance Counters</a></li><li><a href="#recommended-system-performance-counters" class="table-of-contents__link toc-highlight">Recommended System Performance Counters</a></li><li><a href="#register-performance-counters" class="table-of-contents__link toc-highlight">Register Performance Counters</a></li><li><a href="#collect-performance-data" class="table-of-contents__link toc-highlight">Collect Performance Data</a></li><li><a href="#unregister-performance-counters" class="table-of-contents__link toc-highlight">Unregister Performance Counters</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>