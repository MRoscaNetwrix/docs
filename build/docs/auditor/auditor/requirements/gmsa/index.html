<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-auditor docs-version-current docs-doc-page docs-doc-id-auditor/requirements/gmsa" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Use Group Managed Service Account (gMSA) | Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" name="twitter:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" property="og:url" content="https://docs.yourcompany.com/docs/auditor/auditor/requirements/gmsa"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-auditor-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-auditor-current"><meta data-rh="true" property="og:title" content="Use Group Managed Service Account (gMSA) | Documentation"><meta data-rh="true" name="description" content="Auditor supports using Group Managed Service Accounts (gMSA) for data collection and storage. This can help you to simplify product administration, providing the following benefits:"><meta data-rh="true" property="og:description" content="Auditor supports using Group Managed Service Accounts (gMSA) for data collection and storage. This can help you to simplify product administration, providing the following benefits:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.yourcompany.com/docs/auditor/auditor/requirements/gmsa"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/auditor/auditor/requirements/gmsa" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/auditor/auditor/requirements/gmsa" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"><link rel="stylesheet" href="/assets/css/styles.4cbdd69d.css">
<script src="/assets/js/runtime~main.a42836f1.js" defer="defer"></script>
<script src="/assets/js/main.3131faef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/1secure">1Secure</a></li><li><a class="dropdown__link" href="/docs/accessanalyzer">Access Analyzer</a></li><li><a class="dropdown__link" href="/docs/accessinformationcenter">Access Information Center</a></li><li><a class="dropdown__link" href="/docs/activitymonitor">Activity Monitor</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/auditor">Auditor</a></li><li><a class="dropdown__link" href="/docs/changetracker">Change Tracker</a></li><li><a class="dropdown__link" href="/docs/dataclassification">Data Classification</a></li><li><a class="dropdown__link" href="/docs/groupid">Group ID</a></li><li><a class="dropdown__link" href="/docs/passwordpolicyenforcer">Password Policy Enforcer</a></li><li><a class="dropdown__link" href="/docs/passwordreset">Password Reset</a></li><li><a class="dropdown__link" href="/docs/passwordsecure">Password Secure</a></li><li><a class="dropdown__link" href="/docs/policypak">PolicyPak</a></li><li><a class="dropdown__link" href="/docs/privilegesecure">Privilege Secure</a></li><li><a class="dropdown__link" href="/docs/recoveryforactivedirectory">Recovery for Active Directory</a></li><li><a class="dropdown__link" href="/docs/strongpointfornetsuite">StrongPoint for NetSuite</a></li><li><a class="dropdown__link" href="/docs/strongpointforsalesforce">StrongPoint for Salesforce</a></li><li><a class="dropdown__link" href="/docs/strongpointnetsuiteflashlight">StrongPoint NetSuite Flashlight</a></li><li><a class="dropdown__link" href="/docs/strongpointsalesforceflashlight">StrongPoint Salesforce Flashlight</a></li><li><a class="dropdown__link" href="/docs/threatmanager">Threat Manager</a></li><li><a class="dropdown__link" href="/docs/threatprevention">Threat Prevention</a></li><li><a class="dropdown__link" href="/docs/usercube">UserCube</a></li><li><a class="dropdown__link" href="/docs/usercube_saas">UserCube SaaS</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="http://github.com/netwrix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/auditor/access/general/datagrid">access</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/auditor/auditor/accessreviews">auditor</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/accessreviews">Access Reviews</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/accessreviewsconfiguration">Select Data Sources</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/accountlockoutexaminer/configure">accountlockoutexaminer</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/addon/alienvaultusm/automate">addon</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/admin/alertsettings/create">admin</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/api/activityrecordreference">api</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/configuration/activedirectory/additional">configuration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/gettingstarted">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/install/automatelogin">install</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/overview">Netwrix Auditor v10.7 Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/producteditions">Product Editions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/auditor/auditor/requirements/console">requirements</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/console">Hardware Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/deploymentscenarios">Sample Deployment Scenarios</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/auditor/auditor/requirements/gmsa">Use Group Managed Service Account (gMSA)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/longtermarchive">File-Based Repository for Long-Term Archive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/monitoredobjecttypes">Monitored Object Types, Actions, and Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/overview">Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/ports">Protocols and Ports Required</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/serviceaccount">Configure Netwrix Auditor Service Accounts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/software">Software Requirements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/sqlserver">Requirements for SQL Server to Store Audit Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/sqlserverreportingservice">SQL Server Reporting Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/supporteddatasources">Supported Data Sources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/requirements/workingfolder">Working Folder</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/auditor/auditor/tools/auditconfigurationassistant">tools</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/auditor/auditor/whatsnew">What&#x27;s New</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/auditor/">Auditor</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">auditor</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">requirements</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Use Group Managed Service Account (gMSA)</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Use Group Managed Service Account (gMSA)</h1></header>
<p>Auditor supports using Group Managed Service Accounts (gMSA) for data collection and storage. This can help you to simplify product administration, providing the following benefits:</p>
<ul>
<li>There is no password to manage for this account: Windows handles the password management for it. User interaction for password update on a regular basis is not required.</li>
<li>Using the gMSA also eliminates a need in service accounts with static passwords that are set upon creation and then never cycled.</li>
<li>The gMSA also helps to ensure that service account is only used to run a service (gMSA accounts cannot be used to log on interactively to domain computers).</li>
<li>The gMSA is allowed to audit trusted domains using configured and validated gMSA from the target domain.</li>
</ul>
<p>Currently, gMSA is supported:</p>
<ul>
<li>
<p>As a data collecting account for the following data sources:</p>
<ul>
<li>Active Directory (including Group Policy and Logon Activity)</li>
<li>File Server (currently for Windows File Servers)</li>
<li>SQL Server</li>
<li>SharePoint</li>
<li>User Activity (including User Activity Video Recording)</li>
<li>Windows Server</li>
</ul>
<p>See the <a href="/docs/auditor/auditor/admin/monitoringplans/dataaccounts">Data Collecting Account</a> topic for additional information about supported data sources.</p>
<p><strong>NOTE:</strong> If you are using a gMSA account for Active Directory collection consider that the Active Directory Object Restore tool will not work.</p>
</li>
<li>
<p>As an account for accessing Long-Term archive. See the <a href="/docs/auditor/auditor/requirements/longtermarchive">File-Based Repository for Long-Term Archive</a> topic for additional information.</p>
</li>
<li>
<p>As an account for accessing Audit Databases. See <a href="/docs/auditor/auditor/requirements/sqlserver">Requirements for SQL Server to Store Audit Data</a> topic for additional information.</p>
<p><strong>CAUTION:</strong> In case of accessing Audit Databases using gMSA account, SSRS-based reports will not work.</p>
</li>
</ul>
<p><em><strong>RECOMMENDED:</strong></em> Prepare a dedicated gMSA for these purposes.</p>
<p>The gMSA would work only within one domain, the parent domain and NA also should be joined within the same domain. The reason is that gMSAs are designed to be scoped within a single Active Directory domain or subdomain.</p>
<p>See the following Microsoft article for more information: <a href="https://learn.microsoft.com/en-us/windows-server/identity/ad-ds/manage/group-managed-service-accounts/group-managed-service-accounts/getting-started-with-group-managed-service-accounts" target="_blank" rel="noopener noreferrer">Get started with Group Managed Service Accounts</a></p>
<p>By default, the gMSA account is not a member of any domain groups. After creating gMSA account, you need to add this account to one of the domain groups as required for the data source you are going to audit.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="check-for-a-kds-root-key">Check for a KDS Root Key<a href="#check-for-a-kds-root-key" class="hash-link" aria-label="Direct link to Check for a KDS Root Key" title="Direct link to Check for a KDS Root Key">​</a></h2>
<p>To generate password for gMSA accounts, domain controllers require a Key Distribution Services (KDS) root key. This key is created once, so if there are any gMSA accounts in your domain, this means the root key already exists.</p>
<p>Follow the steps to check whether the root key exists in your domain.</p>
<p><strong>Step 1 –</strong>  Open the <strong>Active Directory Sites and Services</strong> Console and select <strong>View</strong> &gt; <strong>Show Services Node</strong>.</p>
<p><strong>Step 2 –</strong> Browse to <strong>Services</strong> &gt; <strong>Group Key Distribution Services</strong> &gt; <strong>Master Root Keys</strong>.</p>
<p><strong>Step 3 –</strong> Alternatively, you can run the <code>Get-KdsRootKey</code> cmdlet. If the key does not exist, it will not return any output.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-kds-root-key">Create a KDS Root Key<a href="#create-a-kds-root-key" class="hash-link" aria-label="Direct link to Create a KDS Root Key" title="Direct link to Create a KDS Root Key">​</a></h2>
<p>If the KDS root key does not exist, then you can create a KDS root key as described below, or contact your Active Directory administrator.</p>
<p>Follow the steps to create a KDS key (on a domain controller running Windows Server 2012 or later).</p>
<p><strong>Step 1 –</strong> On the domain controller, run <strong>Windows PowerShell</strong>.</p>
<p><strong>Step 2 –</strong> In the command prompt of Windows PowerShell Active Directory module, run the following cmdlet:</p>
<p><code>Add-KdsRootKey -EffectiveImmediately</code></p>
<p><strong>Step 3 –</strong> A root key will be added to the target DC which will be used by the KDS service immediately.</p>
<p><strong>NOTE:</strong> This requires waiting 10 hours, as other domain controllers will be able to use the root key only after a successful replication. See the <a href="https://docs.microsoft.com/en-us/windows-server/security/group-managed-service-accounts/create-the-key-distribution-services-kds-root-key" target="_blank" rel="noopener noreferrer">Create the Key Distribution Services KDS Root Key</a> Microsoft article for additional information.</p>
<p><strong>Step 4 –</strong> Alternatively, you can use the following cmdlet:</p>
<p><code>Add-KdsRootKey -EffectiveTime MM/DD/YYYY</code></p>
<p>This cmdlet generates a KDS root key that will take effect on the specified date. Use the <em>mm/dd/yyyy</em> format, for example: <code>Add-KdsRootKey -EffectiveTime 02/27/21</code></p>
<p><strong>CAUTION:</strong> This approach, however, should be used with care. Waiting up to 10 hours is a safety measure to prevent password generation from occurring before all DCs in the environment are capable of answering gMSA requests. For more information, refer to the following microsoft article: <a href="https://learn.microsoft.com/en-us/windows-server/security/group-managed-service-accounts/create-the-key-distribution-services-kds-root-key" target="_blank" rel="noopener noreferrer">Create the Key Distribution Services KDS Root Key</a>.</p>
<p>To make the KDS Root Key work immediately you can use the following powershell command:</p>
<p>Add-KDSRootKey -Effectivetime ((get-date).addhours(-10))</p>
<p>This command will make the KDS Root Key work immediately.</p>
<p><strong>NOTE:</strong> This is recommended only for small environments. In large environments, it is required to wait 10 hours for replication.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-gmsa">Create a gMSA<a href="#create-a-gmsa" class="hash-link" aria-label="Direct link to Create a gMSA" title="Direct link to Create a gMSA">​</a></h2>
<p>To create a new gMSA, you will need to specify:</p>
<ul>
<li>
<p>New account name and FQDN</p>
</li>
<li>
<p>Computer account(s) that will be allowed to make use of that gMSA. Here it will be your Auditor Server</p>
<ul>
<li>The account must be a member of the <strong>Administrators</strong> group on the Auditor Server.</li>
</ul>
</li>
</ul>
<p>For example, you can create a gMSA using the <code>New-ADServiceAccount</code> PowerShell cmdlet. If so, you should specify your Auditor Server account in the <code>-PrincipalsAllowedToRetrieveManagedPassword</code> attribute.</p>
<p>Make sure you specify a valid computer object in this attribute.</p>
<p>If you have multiple Auditor servers, you can specify the computer accounts using a comma separated list, or specify a security group and add the required computer accounts to that security group.</p>
<p>To create a new gMSA in the root domain using PowerShell:</p>
<ul>
<li>
<p>If you are using a single Netwrix Auditor Server, run the command as follows:</p>
<p><code>New-ADServiceAccount -name nagmsa -DNSHostName nagmsa.mydomain.local -PrincipalsAllowedToRetrieveManagedPassword NASrv$</code></p>
<p>here:</p>
<ul>
<li><em>name</em> — new gMSA name, here <strong>nagmsa</strong>. Make sure the name refers to a valid computer objects.</li>
<li><em>DNSHostName</em> — FQDN of the new gMSA account, here <strong>nagmsa.mydomain.local</strong></li>
<li><em>PrincipalsAllowedToRetrieveManagedPassword</em> — your Netwrix Auditor Server NETBIOS name ended with $, here <strong>NASrv$</strong></li>
</ul>
</li>
<li>
<p>If you want to specify a security group that comprises multiple Auditor  servers, run the command as follows:</p>
<p><code>New-ADServiceAccount -Name gmsagroup -DNSHostName gmsagroup.mydomain.local -PrincipalsAllowedToRetrieveManagedPassword NAServers</code></p>
<p>here <strong>NAServers</strong> — a security group with your Auditor  servers.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="assign-required-roles-and-permissions-to-a-gmsa">Assign Required Roles and Permissions to a gMSA<a href="#assign-required-roles-and-permissions-to-a-gmsa" class="hash-link" aria-label="Direct link to Assign Required Roles and Permissions to a gMSA" title="Direct link to Assign Required Roles and Permissions to a gMSA">​</a></h2>
<p>Once a new gMSA account has been prepared, assign the required roles and permissions to this account, depending on what purpose a gMSA account will be used for.</p>
<ul>
<li>
<p>If you are going to use a gMSA as a data collecting account in Auditor, add this account to the Local Admins group on the Auditor Server and assign the following rights and permissions, depending on the data source you want to collect data from:</p>
<ul>
<li>
<p><a href="/docs/auditor/auditor/configuration/activedirectory/permissions">Permissions for Active Directory Auditing</a></p>
</li>
<li>
<p><a href="/docs/auditor/auditor/configuration/grouppolicy/permissions">Permissions for Group Policy Auditing
</a></p>
</li>
<li>
<p><a href="/docs/auditor/auditor/configuration/logonactivity/permissions">Permissions for Logon Activity Auditing
</a></p>
</li>
<li>
<p><a href="/docs/auditor/auditor/configuration/fileservers/windows/permissions">Permissions for Windows File Server Auditing</a></p>
</li>
<li>
<p><a href="/docs/auditor/auditor/configuration/sharepoint/permissions">Permissions for SharePoint Auditing</a></p>
</li>
<li>
<p><a href="/docs/auditor/auditor/configuration/sqlserver/permissions">Permissions for SQL Server Auditing
</a></p>
</li>
<li>
<p><a href="/docs/auditor/auditor/configuration/windowsserver/permissions">Permissions for Windows Server Auditing
</a></p>
<p><em>Remember,</em> <a href="/docs/auditor/auditor/configuration/windowsserver/permissions">Permissions for Windows Server Auditing
</a></p>
</li>
</ul>
</li>
<li>
<p>If you are going to use a gMSA to access Long-Term archive, assign the roles and permissions required for a custom account:</p>
<ul>
<li>
<p><a href="/docs/auditor/auditor/requirements/longtermarchive">File-Based Repository for Long-Term Archive</a></p>
<p><em>Remember,</em> that you can use custom (gMSA) account only if your Long-Term archive stored on a file share.</p>
</li>
</ul>
</li>
<li>
<p>If you are going to use a gMSA to access Audit Database, assign the required roles:</p>
<ul>
<li>
<p><a href="/docs/auditor/auditor/requirements/sqlserver">Requirements for SQL Server to Store Audit Data</a></p>
<p><em>Remember,</em> that a gMSA account cannot access SSRS due to Microsoft restrictions.</p>
</li>
</ul>
</li>
<li>
<p>If you are going to use a gMSA as a data collection accoun for User Activity or User Activity Video Recording, refer to the following topics:</p>
<ul>
<li><a href="/docs/auditor/auditor/configuration/useractivity/overview">User Activity</a></li>
<li><a href="/docs/auditor/auditor/configuration/useractivity/videorecordings">Configure Video Recordings Playback Settings</a></li>
</ul>
</li>
</ul>
<p>Now you can use a gMSA account as one of the Auditor Service Account.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="apply-a-gmsa">Apply a gMSA<a href="#apply-a-gmsa" class="hash-link" aria-label="Direct link to Apply a gMSA" title="Direct link to Apply a gMSA">​</a></h2>
<p>This topic contains instructions on how to apply a gMSA as one of the Auditor Service Accounts.</p>
<ul>
<li><a href="#Apply-a-gMSA-as-a-Data-Collecting-Account">Apply a gMSA as a Data Collecting Account</a></li>
<li><a href="#Apply-gMSAto-Access-Long-Term-Archive">Apply gMSA to Access Long-Term Archive</a></li>
<li><a href="#Apply-gMSAto-Access-Audit-Database">Apply gMSA to Access Audit Database</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apply-a-gmsa-as-a-data-collecting-account">Apply a gMSA as a Data Collecting Account<a href="#apply-a-gmsa-as-a-data-collecting-account" class="hash-link" aria-label="Direct link to Apply a gMSA as a Data Collecting Account" title="Direct link to Apply a gMSA as a Data Collecting Account">​</a></h3>
<p>To process the corresponding monitored items using gMSA, you can specify this account in the monitored plan properties. See the <a href="/docs/auditor/auditor/admin/monitoringplans/create">Create a New Monitoring Plan</a> topic for additional information.</p>
<p>Follow the steps to set a custom account in the monitored item properties.</p>
<p><strong>Step 1 –</strong>  Open the monitored item properties for editing.</p>
<p><strong>Step 2 –</strong> On the <strong>General</strong> tab, under <strong>Specify account for collecting data</strong>, select <strong>gMSA</strong> option.</p>
<p><img decoding="async" loading="lazy" alt="Monitored Item Properties page" src="/assets/images/gmsa-8bbf163a0abc0b38a4a4b879aeb2283a.webp" width="2034" height="885" class="img_ev3q"></p>
<p>See the <a href="/docs/auditor/auditor/admin/monitoringplans/datasources#add-items-for-monitoring">Add Items for Monitoring</a> topic for additional information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apply-gmsato-access-long-term-archive">Apply gMSA to Access Long-Term Archive<a href="#apply-gmsato-access-long-term-archive" class="hash-link" aria-label="Direct link to Apply gMSA to Access Long-Term Archive" title="Direct link to Apply gMSA to Access Long-Term Archive">​</a></h3>
<p>To write data to the Long-Term Archive and upload report subscriptions to shared folders, you can specify this account as a custom account in the Long-Term Archive settings. See the <a href="/docs/auditor/auditor/admin/settings/longtermarchive">Long-Term Archive</a> topic for additional information.</p>
<p><strong>NOTE:</strong> For a custom account or a gMSA one, consider that you can use the account for the Long-Term Archive based on a file share</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="apply-gmsato-access-audit-database">Apply gMSA to Access Audit Database<a href="#apply-gmsato-access-audit-database" class="hash-link" aria-label="Direct link to Apply gMSA to Access Audit Database" title="Direct link to Apply gMSA to Access Audit Database">​</a></h3>
<p>To access Audit Database, generate reports and run interactive search queries, you can specify this account under the &#x27;Specify custom connection parameters in your common database plan settings. See the <a href="/docs/auditor/auditor/admin/monitoringplans/finetune">Fine-Tune Your Plan and Edit Settings</a> topic for additional information.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auditor/auditor/requirements/gmsa.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/auditor/auditor/requirements/deploymentscenarios"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Sample Deployment Scenarios</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/auditor/auditor/requirements/longtermarchive"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">File-Based Repository for Long-Term Archive</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#check-for-a-kds-root-key" class="table-of-contents__link toc-highlight">Check for a KDS Root Key</a></li><li><a href="#create-a-kds-root-key" class="table-of-contents__link toc-highlight">Create a KDS Root Key</a></li><li><a href="#create-a-gmsa" class="table-of-contents__link toc-highlight">Create a gMSA</a></li><li><a href="#assign-required-roles-and-permissions-to-a-gmsa" class="table-of-contents__link toc-highlight">Assign Required Roles and Permissions to a gMSA</a></li><li><a href="#apply-a-gmsa" class="table-of-contents__link toc-highlight">Apply a gMSA</a><ul><li><a href="#apply-a-gmsa-as-a-data-collecting-account" class="table-of-contents__link toc-highlight">Apply a gMSA as a Data Collecting Account</a></li><li><a href="#apply-gmsato-access-long-term-archive" class="table-of-contents__link toc-highlight">Apply gMSA to Access Long-Term Archive</a></li><li><a href="#apply-gmsato-access-audit-database" class="table-of-contents__link toc-highlight">Apply gMSA to Access Audit Database</a></li></ul></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>