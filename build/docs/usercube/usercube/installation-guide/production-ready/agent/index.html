<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-usercube docs-version-current docs-doc-page docs-doc-id-usercube/installation-guide/production-ready/agent/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Install the Agents | Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" name="twitter:image" content="https://docs.yourcompany.com/img/Logo_RGB.svg"><meta data-rh="true" property="og:url" content="https://docs.yourcompany.com/docs/usercube/usercube/installation-guide/production-ready/agent/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-usercube-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-usercube-current"><meta data-rh="true" property="og:title" content="Install the Agents | Documentation"><meta data-rh="true" name="description" content="Most on-premises installations use an agent integrated with Identity Manager&#x27;s server. If this is your case, and the server is already installed, no need to go further. If, on the other hand, you need separate agents, or if you are installing Identity Manager&#x27;s agents within Identity Manager&#x27;s SaaS offering, this is the way to go."><meta data-rh="true" property="og:description" content="Most on-premises installations use an agent integrated with Identity Manager&#x27;s server. If this is your case, and the server is already installed, no need to go further. If, on the other hand, you need separate agents, or if you are installing Identity Manager&#x27;s agents within Identity Manager&#x27;s SaaS offering, this is the way to go."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.yourcompany.com/docs/usercube/usercube/installation-guide/production-ready/agent/"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/usercube/usercube/installation-guide/production-ready/agent/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.yourcompany.com/docs/usercube/usercube/installation-guide/production-ready/agent/" hreflang="x-default"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"><link rel="stylesheet" href="/assets/css/styles.4cbdd69d.css">
<script src="/assets/js/runtime~main.a42836f1.js" defer="defer"></script>
<script src="/assets/js/main.3131faef.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/branding/logo.svg" alt="Netwrix Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Products</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/1secure">1Secure</a></li><li><a class="dropdown__link" href="/docs/accessanalyzer">Access Analyzer</a></li><li><a class="dropdown__link" href="/docs/accessinformationcenter">Access Information Center</a></li><li><a class="dropdown__link" href="/docs/activitymonitor">Activity Monitor</a></li><li><a class="dropdown__link" href="/docs/auditor">Auditor</a></li><li><a class="dropdown__link" href="/docs/changetracker">Change Tracker</a></li><li><a class="dropdown__link" href="/docs/dataclassification">Data Classification</a></li><li><a class="dropdown__link" href="/docs/groupid">Group ID</a></li><li><a class="dropdown__link" href="/docs/passwordpolicyenforcer">Password Policy Enforcer</a></li><li><a class="dropdown__link" href="/docs/passwordreset">Password Reset</a></li><li><a class="dropdown__link" href="/docs/passwordsecure">Password Secure</a></li><li><a class="dropdown__link" href="/docs/policypak">PolicyPak</a></li><li><a class="dropdown__link" href="/docs/privilegesecure">Privilege Secure</a></li><li><a class="dropdown__link" href="/docs/recoveryforactivedirectory">Recovery for Active Directory</a></li><li><a class="dropdown__link" href="/docs/strongpointfornetsuite">StrongPoint for NetSuite</a></li><li><a class="dropdown__link" href="/docs/strongpointforsalesforce">StrongPoint for Salesforce</a></li><li><a class="dropdown__link" href="/docs/strongpointnetsuiteflashlight">StrongPoint NetSuite Flashlight</a></li><li><a class="dropdown__link" href="/docs/strongpointsalesforceflashlight">StrongPoint Salesforce Flashlight</a></li><li><a class="dropdown__link" href="/docs/threatmanager">Threat Manager</a></li><li><a class="dropdown__link" href="/docs/threatprevention">Threat Prevention</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/usercube">UserCube</a></li><li><a class="dropdown__link" href="/docs/usercube_saas">UserCube SaaS</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="http://github.com/netwrix" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/usercube/">Usercube</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/usercube/usercube/">A software solution to match your IGA needs</a><button aria-label="Collapse sidebar category &#x27;A software solution to match your IGA needs&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/usercube/usercube/installation-guide/">Installation Guide</a><button aria-label="Collapse sidebar category &#x27;Installation Guide&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/overview/">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/usercube/usercube/installation-guide/production-ready/">Production-Ready Installation</a><button aria-label="Collapse sidebar category &#x27;Production-Ready Installation&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/usercube/usercube/installation-guide/production-ready/agent/">Install the Agents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/production-ready/database/">Install the Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/production-ready/email-server/">Send Notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/production-ready/server/">Install the Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/production-ready/working-directory/">Create a Working Directory</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/quick-start/">Quick Start Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube/usercube/installation-guide/requirements/">Requirements</a><button aria-label="Expand sidebar category &#x27;Requirements&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/installation-guide/reverse-proxy/">Reverse Proxy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube/usercube/integration-guide/">Integration Guide</a><button aria-label="Expand sidebar category &#x27;Integration Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube/usercube/introduction-guide/">Introduction Guide</a><button aria-label="Expand sidebar category &#x27;Introduction Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/migration-guide/">Migration Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/usercube/usercube/user-guide/">User Guide</a><button aria-label="Expand sidebar category &#x27;User Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usercube/usercube/whatsnew/">What&#x27;s New</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/usercube/usercube/"><span itemprop="name">A software solution to match your IGA needs</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/usercube/usercube/installation-guide/"><span itemprop="name">Installation Guide</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/usercube/usercube/installation-guide/production-ready/"><span itemprop="name">Production-Ready Installation</span></a><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Install the Agents</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Install the Agents</h1></header>
<p>Most on-premises installations use an agent integrated with Identity Manager&#x27;s server. If this is your case, and the server is already installed, no need to go further. If, on the other hand, you need separate agents, or if you are installing Identity Manager&#x27;s agents within Identity Manager&#x27;s SaaS offering, this is the way to go.</p>
<p><strong>NOTE:</strong> Please make sure that Identity Manager&#x27;s agent requirements are met before going further. See the <a href="/docs/usercube/usercube/installation-guide/requirements/agent-requirements/">
Agent </a> topic for additional information.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="agent-working-directory">Agent Working Directory<a href="#agent-working-directory" class="hash-link" aria-label="Direct link to Agent Working Directory" title="Direct link to Agent Working Directory">​</a></h2>
<p>The agent runtime content should be extracted from the runtime archive following the instructions provided in the <a href="/docs/usercube/usercube/installation-guide/production-ready/working-directory/">
Create a Working Directory
</a> topic.</p>
<p>In the separate agent setup, the agent is usually installed on a different workstation from the server.</p>
<p>The agent is configured thanks to the appsettings.agent.json file. See the <a href="/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings-agent/">appsettings.agent</a> topic for additional information.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-iis-website">Create an IIS Website<a href="#create-an-iis-website" class="hash-link" aria-label="Direct link to Create an IIS Website" title="Direct link to Create an IIS Website">​</a></h2>
<p>It is recommended to run the Identity Manager agent as an IIS website.</p>
<p><em>Remember,</em> to install Identity Manager&#x27;s agent as a Windows service, see the <a href="/docs/usercube/usercube/installation-guide/requirements/agent-requirements/">
Agent </a> topic for additional information.</p>
<p>Adding Identity Manager&#x27;s agent as an IIS website can be achieved with the <a href="https://www.iis.net/" target="_blank" rel="noopener noreferrer">Internet Information Services (IIS) Manager</a> which can be launched with the <code>INETMGR.MSC</code> command. You need to have an IIS 10.0 or greater.</p>
<p>The Microsoft Documentation provides the <a href="https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-8.0" target="_blank" rel="noopener noreferrer">prerequisites</a> and the procedure to <a href="https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-8.0#create-a-new-iis-site" target="_blank" rel="noopener noreferrer">create a new IIS site</a>.</p>
<p>The information needed to go through the creation process are the following:</p>
<ul>
<li>
<p>Identity Manager&#x27;s agent uses an in-process hosting model</p>
</li>
<li>
<p>Identity Manager&#x27;s agent uses .NET</p>
</li>
<li>
<p>Identity Manager agent&#x27;s web.config dwells in the runtime directory</p>
<p>It might require a few modifications to target the agent instead of the server:</p>
<p><strong>Step 1 –</strong> Open web.config with a text editor.</p>
<p><strong>Step 2 –</strong> Change the arguments and stdoutLogFile attributes of the <code>aspNet</code> element as indicated below:</p>
</li>
</ul>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;aspNetCore processPath=&quot;&lt;dotnet&gt;&quot; arguments=&quot;&lt;./Usercube-Agent.dll&gt;&quot; stdoutLogEnabled=&quot;&lt;false&gt;&quot; stdoutLogFile=&quot;&lt;../Temp/stdout-agent.log&gt;&quot; hostingModel=&quot;&lt;inprocess&gt;&quot;&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<p>When creating the website, enter the following data:</p>
<p><strong>Step 1 –</strong> Site name: Identity Manager Agent <code>Organization</code> is the recommended naming convention</p>
<p><strong>Step 2 –</strong> Physical path: /<code>agent working directory</code>/Runtime</p>
<p><strong>Step 3 –</strong> Type: http</p>
<p><strong>Step 4 –</strong> IP address: All unassigned</p>
<p><strong>Step 5 –</strong> Port &amp; Hostname: To access Identity Manager&#x27;s agent. Use the hostname and port that has been reserved for Identity Manager.</p>
</li>
</ul>
<p>After creation, the following settings are recommended:</p>
<ul>
<li>
<p><strong>Application Pool</strong> &gt; <strong>Identity Manager <code>Organization</code></strong> &gt; <strong>Advanced Settings</strong> &gt; <strong>General</strong> &gt; <strong>Start Mode</strong> set to AlwaysRunning;</p>
</li>
<li>
<p><strong>Application Pool</strong> &gt; <code>Identity Manager Organization</code> &gt; <strong>Advanced Settings</strong> &gt; <strong>Process Model</strong> &gt; <strong>Idle Time-out</strong> (minutes) set to 0 and Load User Profile set to True;</p>
</li>
<li>
<p><strong>Application Pool</strong> &gt; <strong>Identity Manager <code>Organization</code></strong> &gt; <strong>Recycling</strong> &gt; Regular time intervals set to 0.</p>
<p>Recycling the application pool creates a discontinuation in the connection between server and agent, which can disrupt some of Identity Manager&#x27;s features such as the job scheduler. IIS already recycles the application pool at each setting change, thus Netwrix recommends not using periodic recycling.</p>
</li>
</ul>
<p>The following is <a href="https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/iis/?view=aspnetcore-8.0#mandatory" target="_blank" rel="noopener noreferrer">mandatory</a>:</p>
<ul>
<li><strong>Application Pool</strong> &gt; <strong>Identity Manager <code>Organization</code></strong> &gt; <strong>Advanced Settings</strong> &gt; <strong>General</strong> &gt; <strong>.NET CLR Version</strong> &gt; <strong>No Managed Code</strong></li>
</ul>
<p><img decoding="async" loading="lazy" alt="IIS Settings" src="/assets/images/iis_settings-8e92e9aa9f2b1801a133dd137537ff89.webp" width="1415" height="2475" class="img_ev3q"></p>
<p>This sums up IIS settings.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hosting-bundle">Hosting Bundle<a href="#hosting-bundle" class="hash-link" aria-label="Direct link to Hosting Bundle" title="Direct link to Hosting Bundle">​</a></h2>
<p>You need to install the <a href="https://dotnet.microsoft.com/en-us/download/dotnet/8.0" target="_blank" rel="noopener noreferrer">dotnet hosting bundle</a> (version 8.0 or higher) to be able to run dotnet application.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="select-an-agent-identity">Select an Agent Identity<a href="#select-an-agent-identity" class="hash-link" aria-label="Direct link to Select an Agent Identity" title="Direct link to Select an Agent Identity">​</a></h2>
<p>The agent, through Identity Manager&#x27;s server IIS Website, should be assigned a service account with the relevant permissions. See the <a href="/docs/usercube/usercube/installation-guide/requirements/agent-requirements/">
Agent </a> topic for additional information.</p>
<p>You can either:</p>
<ul>
<li>Use the built-in application pool identity and grant this identity the right permissions. See the <a href="#Install-the-Agents">
Install the Agents</a> topic for additional information.</li>
<li>Use a custom Windows service account with the right permissions and use it as an IIS identity for Identity Manager&#x27;s agent IIS Website</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-default-behavior">Check default behavior<a href="#check-default-behavior" class="hash-link" aria-label="Direct link to Check default behavior" title="Direct link to Check default behavior">​</a></h3>
<p>Usually, creating an IIS application pool, such as the one within which Identity Manager&#x27;s server website runs, triggers the creation of a service account <code>IIS APPPOOL/apppool_name</code> (where <code>apppool_name</code> is the application pool name) known as an application pool identity. It is associated with the IIS website. This account is granted basic group membership that should enable it to access what it needs.</p>
<p>For more information about IIS identities, visit the <a href="https://support.microsoft.com/en-us/help/4466942/understanding-identities-in-iis" target="_blank" rel="noopener noreferrer">Microsoft Documentation</a>.</p>
<p>Building on this default behavior, the default Application Pool Identity is usually granted the necessary permissions for Identity Manager&#x27;s server to operate.</p>
<p>Before going further, you should check the following points:</p>
<p><strong>Step 1 –</strong> Find the group membership of <code>IIS APPPOOL\apppool_name</code>.</p>
<p><strong>Step 2 –</strong> Check the permissions on the working directory.
Right-click the working directory and select Security. The group section should contain one of the <code>IIS APPPOOL/apppool_name</code> groups, namely Users. And,</p>
<p><strong>Step 3 –</strong> If the built-in application pool identity has been created but does not have the right permissions, you can follow the steps outlined in Install the Agents section to fix it. Go back to the section to make sure that the built-in application pool identity is effectively used by Identity Manager&#x27;s server IIS Website.</p>
<p><strong>Step 4 –</strong> If you would rather use a custom service account instead of the built-in application pool identity, start with
Install the Agents.</p>
<p><strong>Step 5 –</strong> If you&#x27;re not sure what to do, follow the procedure below, starting with
Install the Agents.</p>
<p>Once the steps indicated above are completed you can carry on with setting an IIS Identity.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="set-an-iis-identity">Set an IIS Identity<a href="#set-an-iis-identity" class="hash-link" aria-label="Direct link to Set an IIS Identity" title="Direct link to Set an IIS Identity">​</a></h3>
<p>If you want to use the built-in application pool identity created with the application pool, you can use the<a href="https://docs.microsoft.com/en-us/iis/manage/configuring-security/application-pool-identities" target="_blank" rel="noopener noreferrer"> Microsoft documentation</a>.</p>
<p>If you would rather use a custom service account created for Identity Manager&#x27;s agent, follow the procedure below.</p>
<p>The following implies that a <a href="https://docs.microsoft.com/en-us/windows/security/identity-protection/access-control/service-accounts" target="_blank" rel="noopener noreferrer">custom service account</a> has already been created for Identity Manager&#x27;s agent. See the<a href="/docs/usercube/usercube/installation-guide/production-ready/server/">Install the Server</a> topic for additional information.</p>
<p>Follow the steps below to set an IIS identity and note that these are the same for the server:</p>
<p><strong>Step 1 –</strong> Open the IIS Manager (<code>INETMGR.MSC</code>).</p>
<p><strong>Step 2 –</strong> Open the <strong>Application Pools</strong> node underneath the machine node.</p>
<p><strong>Step 3 –</strong> Select the Identity ManagerAgent/<code>Organization</code> application pool.</p>
<p><strong>Step 4 –</strong> Right-click and select <strong>Advanced Settings</strong>.</p>
<p><strong>Step 5 –</strong> In the <strong>Process Model</strong> section, on the <strong>Identity</strong> list item, click on the three dots to open the <strong>Application Pool Identity</strong> dialog.</p>
<p><strong>Step 6 –</strong> Select the <strong>Custom Account</strong> radio button and click on <strong>Set</strong>.</p>
<p><strong>Step 7 –</strong> Enter the Service Account credentials.</p>
<p><strong>Step 8 –</strong> Click <strong>OK</strong>. You&#x27;re all set.</p>
<p>Identity Manager&#x27;s server IIS site will now use this identity to access the database and the working directory.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="set-the-agent-permissions">Set the Agent Permissions<a href="#set-the-agent-permissions" class="hash-link" aria-label="Direct link to Set the Agent Permissions" title="Direct link to Set the Agent Permissions">​</a></h2>
<p>Identity Manager&#x27;s agent needs specific permissions on its working directory to run, write synchronization output and read provisioning orders. See the <a href="/docs/usercube/usercube/installation-guide/requirements/server-requirements/">Server</a> topic for additional information.</p>
<p>Up to four folders have to be considered:</p>
<ul>
<li>the working directory</li>
<li>the runtime directory, usually <code>C:/Usercube&lt;Organization&gt;/Runtime</code></li>
<li>the data collection directory, usually <code>C:/Usercube&lt;Organization&gt;/Temp</code></li>
<li>the provisioning orders directory, usually <code>C:/Usercube&lt;Organization&gt;/Temp</code> (same as for the data collection directory).</li>
</ul>
<p>See the<a href="/docs/usercube/usercube/installation-guide/production-ready/working-directory/">
Create a Working Directory
</a> and <a href="/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings/">Application Settings</a> topics for additional information.</p>
<p>Further check the permissions of the service account and perform the steps for each of the relevant directories:</p>
<p><strong>Step 1 –</strong> Go to the working directory parent folder.</p>
<p><strong>Step 2 –</strong> Right-click the working directory.</p>
<p><strong>Step 3 –</strong> Select <strong>Properties</strong>.</p>
<p><strong>Step 4 –</strong> Select <strong>Security</strong>.</p>
<p>The agent service account selected in the previous step can either:</p>
<ul>
<li>have the necessary permissions or it belongs to a group that does, so no further action is required</li>
<li>is missing one of the permissions</li>
</ul>
<p>To fix the missing permissions follow the steps:</p>
<p><strong>Step 1 –</strong> Click on <strong>Edit</strong>.</p>
<p><strong>Step 2 –</strong> Click on <strong>Add</strong>.</p>
<p><strong>Step 3 –</strong> In the <strong>Enter the object names to select</strong> textbox, enter the service account name in the down-level logon format. For example, if you chose the built-in application pool identity, this would be <code>IIS APPPOOL/UsercubeAgent&lt;Organization&gt;</code>.</p>
<p><strong>Step 4 –</strong> Click on <strong>OK</strong>.</p>
<p><strong>Step 5 –</strong> Select the newly added user name in the Group or user names panel at the top of the window.</p>
<p><img decoding="async" loading="lazy" alt="Object Names" src="data:image/webp;base64,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" width="455" height="249" class="img_ev3q"></p>
<p><strong>Step 6 –</strong> Check the <strong>Allow</strong> column for the relevant permissions. Check the <strong>Deny</strong> column for the others. See the<a href="/docs/usercube/usercube/installation-guide/requirements/server-requirements/">Server</a> topic for additional information.</p>
<p><strong>Step 7 –</strong> Click <strong>OK</strong>.</p>
<p>The working directory permissions are all set.</p>
<p>The same steps have to be performed on the runtime, the data collection and the provisioning orders directories. See the<a href="/docs/usercube/usercube/installation-guide/production-ready/working-directory/">
Create a Working Directory
</a> and <a href="/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings/">Application Settings</a> topics for additional information.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="name-the-agent">Name the Agent<a href="#name-the-agent" class="hash-link" aria-label="Direct link to Name the Agent" title="Direct link to Name the Agent">​</a></h2>
<p>Every agent is assigned a name. This name will be used in the UI to differentiate agents for the end-user, and in the XML configuration to assign connectors to specific agents.</p>
<p>In the appsettings.agent.json file, the <strong>OpenId</strong> &gt; <strong>AgentIdentifier</strong> can be set to any string except for Local which is already taken by Identity Manager&#x27;s inner workings. Then the agent set in the XML configuration must have the same string as identifier.</p>
<p>For example:</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">appsettings.agent.json  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;&lt;OpenId&quot;&gt;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;AgentIdentifier&quot;: &quot;&lt;MyAgent&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>With the following configuration:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;Agent Identifier=&quot;&lt;MyAgent&gt;&quot; DisplayName_L1=&quot;&lt;My Agent&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">URI=&quot;&lt;https://contoso.com&gt;&quot; /&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connect-the-agent-to-the-managed-systems">Connect the Agent to the Managed Systems<a href="#connect-the-agent-to-the-managed-systems" class="hash-link" aria-label="Direct link to Connect the Agent to the Managed Systems" title="Direct link to Connect the Agent to the Managed Systems">​</a></h2>
<p>The Runtime/appsettings.agent.json file is a technical configuration file that will enable you set up the connection between the agent and the target managed systems. See the <a href="/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings-agent/">appsettings.agent</a> topic for additional information.</p>
<p>Every agent is associated with an appsettings.agent.json file.</p>
<p>The integration team should communicate the list of the managed systems to be connected to the agent, together with their configuration.</p>
<p>Here is an example of appsettings.agent.json connecting an agent to an Active Directory and an SAP server.</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">appsettings.agent.json  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;Connections&quot;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ADExport&quot;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Servers&quot;: [  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;Server&quot;: &quot;&lt;paris.contoso.com&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           &quot;BaseDN&quot;: &quot;&lt;DC=paris,DC=com&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ],  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;AuthType&quot;: &quot;&lt;Basic&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Login&quot;: &quot;&lt;Login&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Password&quot;: &quot;&lt;Password&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Filter&quot;: &quot;&lt;(objectclass=*)&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;EnableSSL&quot;: &quot;&lt;true&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;&lt;SAPExportFulfillment&gt;&quot;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Server&quot;: &quot;&lt;serverUrl&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Login&quot;: &quot;&lt;login&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Password&quot;: &quot;&lt;password&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Remember,</em> storing sensitive managed system data in configuration files, such as login/password pairs, is strongly discouraged. Sensitive data should be protected by one of the credentials protection methods. See the<a href="/docs/usercube/usercube/integration-guide/connectors/">Connectors</a> topic for additional information.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="encryption-key-pair">Encryption Key Pair<a href="#encryption-key-pair" class="hash-link" aria-label="Direct link to Encryption Key Pair" title="Direct link to Encryption Key Pair">​</a></h2>
<p>Identity Manager&#x27;s agent needs an <a href="https://en.wikipedia.org/wiki/Public-key_cryptography" target="_blank" rel="noopener noreferrer">RSA key pair</a> to perform various encryption operations, such as source, configuration, or log file encryptions.</p>
<p>An RSA key pair, as in an <a href="https://fr.wikipedia.org/wiki/X.509" target="_blank" rel="noopener noreferrer">X.509</a> public key certificate and a private key, can be stored one of two ways:</p>
<ul>
<li>As a <a href="https://en.wikipedia.org/wiki/PKCS_12" target="_blank" rel="noopener noreferrer">PKCS #12</a> archive (also called <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/install/personal-information-exchange---pfx--files" target="_blank" rel="noopener noreferrer">Personal Information Exchange file</a> or .pfx file) stored in the server&#x27;s host file system. The file contains both the public key certificate and the private key.</li>
<li>As a certificate from a Windows&#x27; <a href="https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/working-with-certificates#certificate-store" target="_blank" rel="noopener noreferrer">certificate store</a> identified by SubjectDistinguishedName or by Thumbprint. The Windows certificate also contains both the public key certificate and the private key. This is the recommended method.</li>
</ul>
<p>The key pair can be generated with tools such as <a href="https://www.openssl.org/docs/manmaster/man1/req.html" target="_blank" rel="noopener noreferrer">OpenSSL</a> or Microsoft&#x27;s <a href="https://learn.microsoft.com/en-us/powershell/module/pki/new-selfsignedcertificate?view=windowsserver2022-ps" target="_blank" rel="noopener noreferrer">New-SelfSignedCertificate</a> and <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/devtest/pvk2pfx?redirectedfrom=MSDN" target="_blank" rel="noopener noreferrer">pvk2pfx tool</a>.</p>
<p>Here&#x27;s an example showing how to generate a <a href="https://en.wikipedia.org/wiki/PKCS_12" target="_blank" rel="noopener noreferrer">PKCS #12</a> archive (<code>UsercubeContoso.pfx</code>) bundling a public key certificate (<code>Identity Manager contoso.cert</code>) and a private key (<code>usercubecontoso.key</code>) with OpenSSL, with a 50-year expiration date:</p>
<p><strong>Step 1 –</strong> Enter the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -x509 -newkey rsa:1024 -keyout usercubecontoso.key -out usercubecontoso.cert -days 18250</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Step 2 –</strong> Enter the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">openssl req -x509 -newkey rsa:1024 -keyout usercubecontoso.key -out usercubecontoso.cert -days 18250</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Public key certificates can also be bought from trusted certificate providers and bundled with a private key into a <a href="https://en.wikipedia.org/wiki/PKCS_12" target="_blank" rel="noopener noreferrer">PKCS #12</a> archive using step 2 in the frame above.</p>
<p>The certificate has to be linked to Identity Manager via EncryptionCertificate in the appsettings.agent.json file.</p>
<p>See the<a href="/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings/">Application Settings</a> topic for additional information about configuration parameters.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="certificate-as-a-plain-file">Certificate as a plain file<a href="#certificate-as-a-plain-file" class="hash-link" aria-label="Direct link to Certificate as a plain file" title="Direct link to Certificate as a plain file">​</a></h3>
<p>The following parameters are used to link the file to Identity Manager in EncryptionCertificate.</p>
<p><a href="https://en.wikipedia.org/wiki/PKCS_12" target="_blank" rel="noopener noreferrer">PKCS #12</a> archive can be <a href="https://www.openssl.org/docs/man1.1.0/man1/openssl.html#password-protected" target="_blank" rel="noopener noreferrer">password protected</a>, hence the X509KeyFilePassword attribute.</p>
<p>Storing a <code>.pfx</code> file password in plain text in a production environment is strongly discouraged. It should always be encrypted using the Usercube-Protect-CertificatePassword tool. See the<a href="/docs/usercube/usercube/integration-guide/executables/references/protect-certificatepassword/">
Usercube-Protect-CertificatePassword
</a> topic for additional information.</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">appsettings.agent.json  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;&lt;EncryptionCertificate&gt;&quot;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;File&gt;&quot;: &quot;&lt;./UsercubeContoso.pfx&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;X509KeyFilePassword&gt;&quot;: &quot;&lt;adefe$/izih&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="certificate-in-the-certificate-store">Certificate in the certificate store<a href="#certificate-in-the-certificate-store" class="hash-link" aria-label="Direct link to Certificate in the certificate store" title="Direct link to Certificate in the certificate store">​</a></h3>
<p>The certificate can be stored in the certificate store instead of the file system. This is the recommended method.</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">appsettings.agent.json  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &quot;&lt;EncryptionCertificate&gt;&quot;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;DistinguishedName&gt;&quot;:&quot;&lt;UsercubeContoso&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;StoreLocation&gt;&quot;: &quot;&lt;LocalMachine&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &quot;&lt;StoreName&gt;&quot;: &quot;&lt;AuthRoot&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connect-the-agent-to-server">Connect the Agent to Server<a href="#connect-the-agent-to-server" class="hash-link" aria-label="Direct link to Connect the Agent to Server" title="Direct link to Connect the Agent to Server">​</a></h2>
<p>The connection to Identity Manager&#x27;s server can be configured through:</p>
<ul>
<li>
<p>The applicationUri attribute in the Runtime/appsettings.agent.json file has to be set to Identity Manager&#x27;s server URL</p>
</li>
<li>
<p>OpenIdClients and DefaultOpenIdClient must be used to set the agent&#x27;s credentials to connect to the server; See the<a href="/docs/usercube/usercube/integration-guide/network-configuration/agent-configuration/appsettings-agent/">appsettings.agent</a> and<a href="/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/access-control/openidclient/">
OpenIdClient
</a> topics for additional information.</p>
</li>
</ul>
<p>Their content should be provided by the integration team, in relation to the OpenIdClient tag in the applicative configuration. See the<a href="/docs/usercube/usercube/integration-guide/toolkit/xml-configuration/access-control/openidclient/">
OpenIdClient
</a> topic for additional information.</p>
<p>The following example shows an appsettings.agent.json file that sets an agent to connect to Identity Manager&#x27;s server (<code>https://usercubeserver.contoso.com</code>) with the OpenId client identifier <code>Job</code> and the password <code>secret</code>, stored in the OpenIdClients list which also contains the &quot;admin/secret&quot; login/password pair.</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ....  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;ApplicationUri&quot;: &quot;&lt;https://usercubeserver.contoso.com&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;OpenIdClients&quot;: {  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Job&quot;: &quot;&lt;secret&gt;&quot;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;Admin&quot;: &quot;&lt;secret&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;DefaultOpenIdClient&quot;: &quot;&lt;Job&gt;&quot;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Remember,</em> storing plain text passwords in configuration files is strongly discouraged. Sensitive passwords should be encrypted.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-agent-as-a-windows-service">Install the Agent as a Windows Service<a href="#install-the-agent-as-a-windows-service" class="hash-link" aria-label="Direct link to Install the Agent as a Windows Service" title="Direct link to Install the Agent as a Windows Service">​</a></h2>
<p>Installing Identity Manager&#x27;s agent as a Windows service instead of an IIS website is mostly useful when using IIS is rendered moot by another system. For example, using a reverse proxy in front of Identity Manager&#x27;s agent.</p>
<p>To install Identity Manager&#x27;s agent as a service in Windows server, use the following command:</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sc.exe create Usercube binpath= &quot;&lt;Usercube-Agent.exe --service&gt;&quot; displayname= &quot;&lt;Usercube Agent&gt;&quot; start= auto obj= &quot;&lt;DOMAIN\USER&gt;&quot; password= &quot;&lt;PASSWORD&gt;&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><em>Remember,</em> make sure to include a space between each parameter&#x27;s equal sign (=) and the parameter value.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-starting-mode-in-iis-optional">Configure the Starting Mode in IIS (optional)<a href="#configure-the-starting-mode-in-iis-optional" class="hash-link" aria-label="Direct link to Configure the Starting Mode in IIS (optional)" title="Direct link to Configure the Starting Mode in IIS (optional)">​</a></h2>
<p>This step is important if the scheduler is enabled. IIS starts Identity Manager&#x27;s agent only if an incoming http request is made on the server and the scheduler is not launched until Identity Manager&#x27;s agent is started. Because of that, you need to carefully set up the starting mode of IIS to force the starting of Identity Manager&#x27;s agent.</p>
<p>Identity Manager&#x27;s agent warm up is done using the <code>&lt;applicationInitialization&gt;</code> element in the web.config file, the configuration is described <a href="https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-8/iis-80-application-initialization" target="_blank" rel="noopener noreferrer">here.</a></p>
<p>You need to:</p>
<p><strong>Step 1 –</strong> Enable the Application Initialization feature</p>
<p><strong>Step 2 –</strong> Modify the applicationHost.config file to set the startMode of the application pool as AlwaysRunning. You also need to set the preloadEnabled of your application set to true. It is advised to backup the applicationHost.config file when doing this step to prevent mistakes.</p>
<p><strong>Step 3 –</strong> Double check that the following section is set in your web.config file, in the section system.webServer:</p>
<p>Code attributes enclosed with <code>&lt;&gt;</code> need to be replaced with a custom value before entering the script in the command line.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">\&lt;applicationInitialization doAppInitAfterRestart=&quot;\&lt;true\&gt;&quot;\&gt;    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\&lt;add initializationPage=&quot;\&lt;/\&gt;&quot;\&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\&lt;/applicationInitialization\&gt;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Once done, you need to check that the configured jobs are launched via the Identity Manager&#x27;s scheduler without having to manually issue a request on Identity Manager&#x27;s agent.</p>
<p>If this is not correctly configured, any restart of your IIS or application pool could prevent jobs from being launched.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s Next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s Next?" title="Direct link to What&#x27;s Next?">​</a></h2>
<p>The last step in the installation process is setting up an Email server. See the <a href="/docs/usercube/usercube/installation-guide/production-ready/email-server/">Send Notifications</a>topic for additional information.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/usercube/usercube/installation-guide/production-ready/agent/index.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/usercube/usercube/installation-guide/production-ready/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Production-Ready Installation</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/usercube/usercube/installation-guide/production-ready/database/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Install the Database</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#agent-working-directory" class="table-of-contents__link toc-highlight">Agent Working Directory</a></li><li><a href="#create-an-iis-website" class="table-of-contents__link toc-highlight">Create an IIS Website</a></li><li><a href="#hosting-bundle" class="table-of-contents__link toc-highlight">Hosting Bundle</a></li><li><a href="#select-an-agent-identity" class="table-of-contents__link toc-highlight">Select an Agent Identity</a><ul><li><a href="#check-default-behavior" class="table-of-contents__link toc-highlight">Check default behavior</a></li><li><a href="#set-an-iis-identity" class="table-of-contents__link toc-highlight">Set an IIS Identity</a></li></ul></li><li><a href="#set-the-agent-permissions" class="table-of-contents__link toc-highlight">Set the Agent Permissions</a></li><li><a href="#name-the-agent" class="table-of-contents__link toc-highlight">Name the Agent</a></li><li><a href="#connect-the-agent-to-the-managed-systems" class="table-of-contents__link toc-highlight">Connect the Agent to the Managed Systems</a></li><li><a href="#encryption-key-pair" class="table-of-contents__link toc-highlight">Encryption Key Pair</a><ul><li><a href="#certificate-as-a-plain-file" class="table-of-contents__link toc-highlight">Certificate as a plain file</a></li><li><a href="#certificate-in-the-certificate-store" class="table-of-contents__link toc-highlight">Certificate in the certificate store</a></li></ul></li><li><a href="#connect-the-agent-to-server" class="table-of-contents__link toc-highlight">Connect the Agent to Server</a></li><li><a href="#install-the-agent-as-a-windows-service" class="table-of-contents__link toc-highlight">Install the Agent as a Windows Service</a></li><li><a href="#configure-the-starting-mode-in-iis-optional" class="table-of-contents__link toc-highlight">Configure the Starting Mode in IIS (optional)</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next?</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>