---
sidebar_position: 975
title: Workforce Module
---

# Workforce Module

Generates the workforce repository based on the data filled in the Workforce Core Solution module.

## Examples

The following example generates the Workforce module in the application:

Code attributes enclosed with  need to be replaced with a custom value before entering the script in the command line.

```
  
      
      
      
  
      
      
  
      
      
      
      
      
      
  
  
      
      
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  

```
## Properties

| Property | Type | Description |
| --- | --- | --- |
| IsEnabled default value: true | Boolean | True to enable the Worforce module. If set to false, Identity Manager deletes all existing items computed by the Workforce Core Solution module. |

## Child Elements

Here is a list of child elements:

* CompositeProfile (optional) – Defines the users profiles
* EmailGeneration (optional) – Defines the email generation policy
* HomonymEntityLinkOptions (optional) – Updates/Modifies the HomonymEntityLink of the Directory\_UserRecord entity of the workforce configuration
* LoginGeneration (optional) – Defines the login generation policy
* ModelUsage (optional) – Defines the entity types/properties that must be ignored from the model and customize the pickers for the kept ones
* NewExternalWorkflow (optional) – Enable/disable the review step for the new external workflow
* NewInternalWorkflow (optional) – Enable/disable the review step for the new internal workflow
* UniqueIdentifierGeneration (optional) – Defines the unique identifier generation policy

### CompositeProfile

| Property | Type | Description |
| --- | --- | --- |
| AreaOfResponsibility required | String | Represents the argument value. |
| ProfileDisplayName required | String | Generic column used to store information for internal use. |
| ProfileIdentifier required | String | Generic column used to store information for internal use. |
| TargetProfile required | String | Generic column used to store information for internal use. |

### EmailGeneration

| Property | Type | Description |
| --- | --- | --- |
| Strategy required | String | Represents the argument value. |
| Domain optional | String | Generic column used to store information for internal use. |
| NameSeparator optional | String | Character used to separate users' names and first names in their generated emails and logins (in the Workforce Core Solution module). |

### HomonymEntityLinkOptions

| Property | Type | Description |
| --- | --- | --- |
| ActivatePhoneticComparison default value: false | Boolean | Adds 3 filters in the HomonymEntityLink comparing the first and last names (current workflow) to the phonetic properties corresponding to the first and last names (existing records). |
| DisableBirthNameComparison default value: false | Boolean | Deletes the filter in the HomonymEntityLink comparing the last name (current workflow) with the birth name (existing records). |
| DisableInversion default value: false | Boolean | Deletes the filters in the HomonymEntityLink comparing the first name (current workflow) with the last name (existing records) and the last name (current workflow) with the first name (existing records). |

### LoginGeneration

| Property | Type | Description |
| --- | --- | --- |
| Strategy required | String | Represents the argument value. |
| MaxLength optional | Int32 | Generic column used to store information for internal use. |
| Prefix optional | String | Generic column used to store information for internal use. |

### ModelUsage

| Property | Type | Description |
| --- | --- | --- |
| Binding required | String | Generic column used to store information for internal use. |
| Count optional | Int32 | Generic column used to store information for internal use. |
| ForcedCount optional | Int32 | Number of entries for a given entity or entity's property in the workforce data model. The `ForcedCount` value overwrites the count computed by Identity Manager. |

### NewExternalWorkflow

| Property | Type | Description |
| --- | --- | --- |
| IsReviewRequired default value: false | Boolean | For the Argument AddTask the property after define the place of the task to add with the TaskCompareWith. |

### NewInternalWorkflow

| Property | Type | Description |
| --- | --- | --- |
| IsReviewRequired default value: true | Boolean | For the Argument AddTask the property after define the place of the task to add with the TaskCompareWith. |

### UniqueIdentifierGeneration

| Property | Type | Description |
| --- | --- | --- |
| Strategy required | String | Represents the argument value. |
| Max optional | Int32 | Upper limit of the range used for the generation of unique identifiers. |
| Min optional | Int32 | Lower limit of the range used for the generation of unique identifiers. |
| NameSeparator optional | String | Character used to separate users' names and first names in their generated emails and logins (in the Workforce Core Solution module). |
| Prefix optional | String | Prefix used for the generation of unique identifiers. |

## Generated XML

Our example generates the following configuration:

Code attributes enclosed with  need to be replaced with a custom value before entering the script in the command line.

```
  
      
      
      
      
      
      
  
      
      
      
      
      
      
  
  
      
      
      
      
      
  
      
      
      
      
      
      
      
      
      
      
      
      
  
      
      
      
      
      
      
  
  
      
      
      
      
      
  
      
      
      
      
      
      
  
      
      
      
      
      
      
      
      
  
  
      
      
  
  
      
      
  
  
      
      
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
  
  
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
  
  
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 we can't get any manager */  
return managerId;  
}  
  
managerId = record.Organization.Manager?.Id;  
if (managerId == null)  
{  
/* No org manager => we can't get any manager */  
return managerId;  
}  
  
if (record.User?.Id != managerId)  
{  
/* The current user is not his org's manager => we take the org's manager */  
return managerId;  
}  
/* We take the N+2 org's manager */  
managerId = record.Organization.Parent?.Manager?.Id;  
return managerId;" Property="EffectiveIGAManager" />  
  
  
  
  
  
  
  
  
();  
foreach (var record in user.Records)  
{  
var id = record.Id;  
records.Add((id, false, record.StartDate ?? System.DateTime.MinValue, record.EndDate ?? System.DateTime.MaxValue));  
records.Add((id, false, record.ContractStartDate ?? System.DateTime.MinValue, record.ContractEndDate ?? System.DateTime.MaxValue));  
records.Add((id, false, record.PositionStartDate ?? System.DateTime.MinValue, record.PositionEndDate ?? System.DateTime.MaxValue));  
}  
  
/* all the records are in the future, take the closest one */  
if (records.All(r => r.start > now))  
{  
return records.OrderBy(r => (r.start, r.main, r.id)).First().id;  
}  
  
/* all the records are in the past, take the closest one */  
if (records.All(r => r.end  (r.end, r.main, r.id.HasValue ? -r.id.Value : long.MinValue)).First().id;  
}  
  
/* find the closest current record */  
var currentRecord = records.Where(r => (r.start  now)).OrderByDescending(r => (r.start, r.main, r.id.HasValue ? -r.id.Value : long.MinValue)).Select(r => r.id).FirstOrDefault();  
if (currentRecord == null)  
{  
/* current record not found : take the first */  
currentRecord = records.OrderBy(r => (r.main, r.id)).First().id;  
}  
  
return currentRecord;  
" Priority="-2" Property="MainRecord" />  
  
  
  
 (!r.ContractStartDate.HasValue || (r.ContractStartDate  DateTime.UtcNow))))  
{  
return -101L;  
}  
  
/* at least of record in the future */  
if (user.Records.Any(r => r.ContractStartDate.HasValue && (r.ContractStartDate > DateTime.UtcNow)))  
{  
return -102L;  
}  
  
return -100L;" Property="PresenceState" />  
  
  
  
  
  
  
  
  
  
  
  
      
      
      
      
  
  
  
      
      
      
      
      
      
      
  
  
  
  
  
      
  
  
      
      
      
      
      
  
  
      
      
  
  
      
      
  
  
      
      
  
  
  
  
      
  
  
      
      
      
  
  
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
      
      
      
      
      
      
  
  
      
      
      
  
  
  
  
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
  
  
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
  
  
      
      
  
  
  
  
      
      
      
      
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
      
      
      
      
  
  
      
  
  
  
  
  
  
  
  
  
  
      
      
      
      
  
  
      
      
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
      
      
          
          
      
      
      
      
      
      
      
      
      
      
  
  
  
  
    
      
        
        
      
    
    
    
    
    
      
      
    
    
    
      
    
  
  
  
  
    
  
  
  
  
      
      
      
      
      
      
      
      
  
  
  
  
  
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
      
      
      
      
      
  
  
  
  
  
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
  
  
      
      
      
      
      
      
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
      
  
  
  
  
  
  
      
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 0)  
{  
result += iteration.ToString();  
}  
  
result = result + (record.UserType?.EmailSuffix ?? string.Empty) + '@' + (record.Subsidiary?.EmailDomain ?? "acme.com");  
return result;" IterationsCount="10">  
 0)  
{  
result += iteration.ToString();  
}  
  
return result;" TargetEntityType="Directory_ReservedEmail" TargetExpression="C#:reservedEmail:  
if (string.IsNullOrEmpty(reservedEmail.Value))  
{  
return null;  
}  
  
var result = reservedEmail.Value;  
var index = result.IndexOf('@');  
if(index >=0)  
{  
result = result.Substring(0, index);  
}  
  
return result;" />  
 0)  
{  
result += iteration.ToString();  
}  
  
return result;" TargetEntityType="Directory_UserRecord" TargetExpression="C#:record:  
if (string.IsNullOrEmpty(record.Email))  
{  
return null;  
}  
  
var result = record.Email;  
  
/*Delete Domain*/  
var index = result.IndexOf('@');  
if(index >= 0)  
{  
result = result.Substring(0, index);  
}  
  
var resources = queryHandler.Select("select EmailSuffix");  
  
foreach (var resource in resources.Where(r => r != null && r.EmailSuffix != null).OrderByDescending(r => r.EmailSuffix!.Length))  
{  
var foundIndex = result.IndexOf(resource.EmailSuffix!);  
if (foundIndex >= 0)  
{  
    result = result.Substring(0, foundIndex);  
    break;  
}  
}  
return result;" />  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
("select UniqueIdentifierRangeStart,UniqueIdentifierRangeEnd,UniqueIdentifierPrefix,UniqueIdentifierSuffix");  
foreach (var resource in resources)  
{  
result = record.UserIdentifier;  
if (result == null)  
{  
    continue;  
}  
  
var prefix = resource.UniqueIdentifierPrefix ?? "";  
var suffix = resource.UniqueIdentifierSuffix;  
  
if (!string.IsNullOrEmpty(prefix))  
{  
    if (!result.StartsWith(prefix))  
    {  
        continue;  
    }  
  
    result = result.Substring(prefix.Length);  
}  
  
if (!string.IsNullOrEmpty(suffix))  
{  
    if (!result.EndsWith(suffix))  
    {  
        continue;  
    }  
  
    result = result.Substring(0, result.Length - suffix.Length);  
}  
  
break;  
}  
  
return result;" />  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
 0 ? record.Records[0].UserIdentifier : null;">  
  
  
  
  
  
&nbsp;  
  
      
      
    Usercube.  
      
          
          
          
              
              
                  
                Hello,  
                An update user request needs your attention.  
                  
                    Summary  
                    Date@System.DateTime.Now.ToLocalTime().ToString("dd/MM/yyyy hh:mm", System.Globalization.CultureInfo.InvariantCulture)  
                    Full Name@Model.MainRecord.FirstName @Model.MainRecord.LastName  
  
                    User Type@Model.MainRecord.UserType.DisplayName  
  
                    Contract Start Date@Model.MainRecord.ContractStartDate  
  
                    Contract End Date@Model.MainRecord.ContractEndDate  
  
                    Department@Model.MainRecord.Organization.DisplayName  
  
                @Html.MessageBody(new { style = "box-sizing: border-box; color: #74787E; font-family: sans-serif, 'Helvetica Neue', Helvetica, sans-serif;" })  
                  
              
              
          
          
          
      
      
      
          
          
              
            This message was created by an automated workflow in Usercube. Do not reply.  
              
          
          
      
      
      
      
  
&nbsp;  
  
  
" CssFile="@media only screen and (max-width: 620px) {  
table[class=body] h1 {  
    font-size: 28px !important;  
    margin-bottom: 10px !important;  
}  
  
table[class=body] p,  
table[class=body] ul,  
table[class=body] ol,  
table[class=body] td,  
table[class=body] span,  
table[class=body] a {  
    font-size: 16px !important;  
}  
  
table[class=body] .wrapper,  
table[class=body] .article {  
    padding: 10px !important;  
}  
  
table[class=body] .content {  
    padding: 0 !important;  
}  
  
table[class=body] .container {  
    padding: 0 !important;  
    width: 100% !important;  
}  
  
table[class=body] .main {  
    border-left-width: 0 !important;  
    border-radius: 0 !important;  
    border-right-width: 0 !important;  
}  
  
table[class=body] .btn table {  
    width: 100% !important;  
}  
  
table[class=body] .btn a {  
    width: 100% !important;  
}  
  
table[class=body] .img-responsive {  
    height: auto !important;  
    max-width: 100% !important;  
    width: auto !important;  
}  
}  
/* -------------------------------------  
PRESERVE THESE STYLES IN THE HEAD  
------------------------------------- */  
@media all {  
.ExternalClass {  
    width: 100%;  
}  
  
    .ExternalClass,  
    .ExternalClass p,  
    .ExternalClass span,  
    .ExternalClass font,  
    .ExternalClass td,  
    .ExternalClass div {  
        line-height: 100%;  
    }  
  
.apple-link a {  
    color: inherit !important;  
    font-family: inherit !important;  
    font-size: inherit !important;  
    font-weight: inherit !important;  
    line-height: inherit !important;  
    text-decoration: none !important;  
}  
  
.btn-primary table td:hover {  
    background-color: #34495e !important;  
}  
  
.btn-primary a:hover {  
    background-color: #34495e !important;  
    border-color: #34495e !important;  
}  
}  
  
body {  
background-color: #f6f6f6;  
font-family: sans-serif;  
-webkit-font-smoothing: antialiased;  
font-size: 14px;  
line-height: 1.4;  
margin: 0;  
padding: 0;  
-ms-text-size-adjust: 100%;  
-webkit-text-size-adjust: 100%;  
}  
">  
  
  
  
  
  
&nbsp;  
  
      
      
    Usercube.  
      
          
          
          
              
              
                  
                Hello,  
                A new user request needs your attention.  
                  
                    Summary  
                    Date@System.DateTime.Now.ToLocalTime().ToString("dd/MM/yyyy hh:mm", System.Globalization.CultureInfo.InvariantCulture)  
                    Full Name@Model.Records.First().FirstName @Model.Records.First().LastName  
  
                    User Type@Model.Records.First().UserType.DisplayName  
  
                    Contract Start Date@Model.Records.First().ContractStartDate  
  
                    Contract End Date@Model.Records.First().ContractEndDate  
  
                    Department@Model.Records.First().Organization.DisplayName  
  
                @Html.MessageBody(new { style = "box-sizing: border-box; color: #74787E; font-family: sans-serif, 'Helvetica Neue', Helvetica, sans-serif;" })  
                  
              
              
          
          
          
      
      
      
          
          
              
            This message was created by an automated workflow in Usercube. Do not reply.  
              
          
          
      
      
      
      
  
&nbsp;  
  
  
" CssFile="@media only screen and (max-width: 620px) {  
table[class=body] h1 {  
    font-size: 28px !important;  
    margin-bottom: 10px !important;  
}  
  
table[class=body] p,  
table[class=body] ul,  
table[class=body] ol,  
table[class=body] td,  
table[class=body] span,  
table[class=body] a {  
    font-size: 16px !important;  
}  
  
table[class=body] .wrapper,  
table[class=body] .article {  
    padding: 10px !important;  
}  
  
table[class=body] .content {  
    padding: 0 !important;  
}  
  
table[class=body] .container {  
    padding: 0 !important;  
    width: 100% !important;  
}  
  
table[class=body] .main {  
    border-left-width: 0 !important;  
    border-radius: 0 !important;  
    border-right-width: 0 !important;  
}  
  
table[class=body] .btn table {  
    width: 100% !important;  
}  
  
table[class=body] .btn a {  
    width: 100% !important;  
}  
  
table[class=body] .img-responsive {  
    height: auto !important;  
    max-width: 100% !important;  
    width: auto !important;  
}  
}  
/* -------------------------------------  
PRESERVE THESE STYLES IN THE HEAD  
------------------------------------- */  
@media all {  
.ExternalClass {  
    width: 100%;  
}  
  
    .ExternalClass,  
    .ExternalClass p,  
    .ExternalClass span,  
    .ExternalClass font,  
    .ExternalClass td,  
    .ExternalClass div {  
        line-height: 100%;  
    }  
  
.apple-link a {  
    color: inherit !important;  
    font-family: inherit !important;  
    font-size: inherit !important;  
    font-weight: inherit !important;  
    line-height: inherit !important;  
    text-decoration: none !important;  
}  
  
.btn-primary table td:hover {  
    background-color: #34495e !important;  
}  
  
.btn-primary a:hover {  
    background-color: #34495e !important;  
    border-color: #34495e !important;  
}  
}  
  
body {  
background-color: #f6f6f6;  
font-family: sans-serif;  
-webkit-font-smoothing: antialiased;  
font-size: 14px;  
line-height: 1.4;  
margin: 0;  
padding: 0;  
-ms-text-size-adjust: 100%;  
-webkit-text-size-adjust: 100%;  
}  
">  
  
  
  
  
  
  
"2022-05-31T00:00:00Z"))" ReturnedEntityType="Directory_UserRecord" />  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  

```